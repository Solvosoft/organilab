var e=window.SvgCanvas&&Object.prototype.hasOwnProperty.call(window.SvgCanvas,"default")?window.SvgCanvas.default:window.SvgCanvas;function ownKeys$7(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$7(Object(o),!0).forEach((function(n){_defineProperty$1(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$7(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function _regeneratorRuntime(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
_regeneratorRuntime=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function define(e,n,o){return Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{define({},"")}catch(e){define=function(e,n,o){return e[n]=o}}function wrap(e,n,o,i){var r=n&&n.prototype instanceof Generator?n:Generator,a=Object.create(r.prototype),s=new Context(i||[]);return a._invoke=function(e,n,o){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return doneResult()}for(o.method=r,o.arg=a;;){var s=o.delegate;if(s){var c=maybeInvokeDelegate(s,o);if(c){if(c===l)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===i)throw i="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i="executing";var u=tryCatch(e,n,o);if("normal"===u.type){if(i=o.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(i="completed",o.method="throw",o.arg=u.arg)}}}(e,o,s),a}function tryCatch(e,n,o){try{return{type:"normal",arg:e.call(n,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var l={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var c={};define(c,r,(function(){return this}));var u=Object.getPrototypeOf,d=u&&u(u(values([])));d&&d!==n&&o.call(d,r)&&(c=d);var p=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function defineIteratorMethods(e){["next","throw","return"].forEach((function(n){define(e,n,(function(e){return this._invoke(n,e)}))}))}function AsyncIterator(e,n){function invoke(i,r,a,s){var l=tryCatch(e[i],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&o.call(u,"__await")?n.resolve(u.__await).then((function(e){invoke("next",e,a,s)}),(function(e){invoke("throw",e,a,s)})):n.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return invoke("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,o){function callInvokeWithMethodAndArg(){return new n((function(n,i){invoke(e,o,n,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,n){var o=e.iterator[n.method];if(void 0===o){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,maybeInvokeDelegate(e,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var i=tryCatch(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,l;var r=i.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function pushTryEntry(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function resetTryEntry(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function next(){for(;++i<e.length;)if(o.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(p,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===GeneratorFunction||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(n,o,i,r,a){void 0===a&&(a=Promise);var s=new AsyncIterator(wrap(n,o,i,r),a);return e.isGeneratorFunction(o)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},defineIteratorMethods(p),define(p,s,"Generator"),define(p,r,(function(){return this})),define(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=[];for(var o in e)n.push(o);return n.reverse(),function next(){for(;n.length;){var o=n.pop();if(o in e)return next.value=o,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function handle(o,i){return a.type="throw",a.arg=e,n.next=o,i&&(n.method="next",n.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return handle("end");if(r.tryLoc<=this.prev){var s=o.call(r,"catchLoc"),l=o.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return handle(r.catchLoc,!0);if(this.prev<r.finallyLoc)return handle(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return handle(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return handle(r.finallyLoc)}}}},abrupt:function(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=n,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),l},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),l}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc===e){var i=o.completion;if("throw"===i.type){var r=i.arg;resetTryEntry(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:values(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=void 0),l}},e}function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function asyncGeneratorStep(e,n,o,i,r,a,s){try{var l=e[a](s),c=l.value}catch(e){return void o(e)}l.done?n(c):Promise.resolve(c).then(i,r)}function _asyncToGenerator(e){return function(){var n=this,o=arguments;return new Promise((function(i,r){var a=e.apply(n,o);function _next(e){asyncGeneratorStep(a,i,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,i,r,_next,_throw,"throw",e)}_next(void 0)}))}}function _classCallCheck$1(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass$1(e,n,o){return n&&_defineProperties$1(e.prototype,n),o&&_defineProperties$1(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function _inherits$1(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_setPrototypeOf$1(e,n)}function _getPrototypeOf$1(e){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf$1(e)}function _setPrototypeOf$1(e,n){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,n){return e.__proto__=n,e},_setPrototypeOf$1(e,n)}function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,n,o){return _construct=_isNativeReflectConstruct$4()?Reflect.construct.bind():function _construct(e,n,o){var i=[null];i.push.apply(i,n);var r=new(Function.bind.apply(e,i));return o&&_setPrototypeOf$1(r,o.prototype),r},_construct.apply(null,arguments)}function _wrapNativeSuper(e){var n="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(e){if(null===e||!function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf$1(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(Wrapper,e)},_wrapNativeSuper(e)}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn$1(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(e)}function _createSuper$4(e){var n=_isNativeReflectConstruct$4();return function _createSuperInternal(){var o,i=_getPrototypeOf$1(e);if(n){var r=_getPrototypeOf$1(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return _possibleConstructorReturn$1(this,o)}}function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=_getPrototypeOf$1(e)););return e}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(e,n,o){var i=_superPropBase(e,n);if(i){var r=Object.getOwnPropertyDescriptor(i,n);return r.get?r.get.call(arguments.length<3?e:o):r.value}},_get.apply(this,arguments)}function set(e,n,o,i){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set(e,n,o,i){var r,a=_superPropBase(e,n);if(a){if((r=Object.getOwnPropertyDescriptor(a,n)).set)return r.set.call(i,o),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,n)){if(!r.writable)return!1;r.value=o,Object.defineProperty(i,n,r)}else _defineProperty$1(i,n,o);return!0},set(e,n,o,i)}function _set(e,n,o,i,r){if(!set(e,n,o,i||e)&&r)throw new Error("failed to set property");return o}function _taggedTemplateLiteral(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function _slicedToArray(e,n){return function _arrayWithHoles$1(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,n){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==o)return;var i,r,a=[],s=!0,l=!1;try{for(o=o.call(e);!(s=(i=o.next()).done)&&(a.push(i.value),!n||a.length!==n);s=!0);}catch(e){l=!0,r=e}finally{try{s||null==o.return||o.return()}finally{if(l)throw r}}return a}(e,n)||_unsupportedIterableToArray$1(e,n)||function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}(e)||function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray$1(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray$1(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray$1(e,n):void 0}}function _arrayLikeToArray$1(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,i=new Array(n);o<n;o++)i[o]=e[o];return i}function _createForOfIteratorHelper(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray$1(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var i=0,F=function(){};return{s:F,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,o){return n&&_defineProperties(e.prototype,n),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,n){return e.__proto__=n,e},_setPrototypeOf(e,n)}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_setPrototypeOf(e,n)}function _possibleConstructorReturn(e,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,i=new Array(n);o<n;o++)i[o]=e[o];return i}function _toArray(e){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,n):void 0}}(e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var n={type:"logger",log:function log(e){this.output("log",e)},warn:function warn(e){this.output("warn",e)},error:function error(e){this.output("error",e)},output:function output(e,n){console&&console[e]&&console[e].apply(console,n)}},o=new(function(){function Logger(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Logger),this.init(e,n)}return _createClass(Logger,[{key:"init",value:function init(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=o.prefix||"i18next:",this.logger=e||n,this.options=o,this.debug=o.debug}},{key:"setDebug",value:function setDebug(e){this.debug=e}},{key:"log",value:function log(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return this.forward(n,"log","",!0)}},{key:"warn",value:function warn(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return this.forward(n,"warn","",!0)}},{key:"error",value:function error(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return this.forward(n,"error","")}},{key:"deprecate",value:function deprecate(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function forward(e,n,o,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(o).concat(this.prefix," ").concat(e[0])),this.logger[n](e))}},{key:"create",value:function create(e){return new Logger(this.logger,_objectSpread(_objectSpread({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}}]),Logger}()),i=function(){function EventEmitter(){_classCallCheck(this,EventEmitter),this.observers={}}return _createClass(EventEmitter,[{key:"on",value:function on(e,n){var o=this;return e.split(" ").forEach((function(e){o.observers[e]=o.observers[e]||[],o.observers[e].push(n)})),this}},{key:"off",value:function off(e,n){this.observers[e]&&(n?this.observers[e]=this.observers[e].filter((function(e){return e!==n})):delete this.observers[e])}},{key:"emit",value:function emit(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,o)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(n){n.apply(n,[e].concat(o))}))}}}]),EventEmitter}();function defer(){var e,n,o=new Promise((function(o,i){e=o,n=i}));return o.resolve=e,o.reject=n,o}function makeString(e){return null==e?"":""+e}function copy(e,n,o){e.forEach((function(e){n[e]&&(o[e]=n[e])}))}function getLastOfPath(e,n,o){function cleanKey(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function canNotTraverseDeeper(){return!e||"string"==typeof e}for(var i="string"!=typeof n?[].concat(n):n.split(".");i.length>1;){if(canNotTraverseDeeper())return{};var r=cleanKey(i.shift());!e[r]&&o&&(e[r]=new o),e=Object.prototype.hasOwnProperty.call(e,r)?e[r]:{}}return canNotTraverseDeeper()?{}:{obj:e,k:cleanKey(i.shift())}}function setPath(e,n,o){var i=getLastOfPath(e,n,Object);i.obj[i.k]=o}function getPath(e,n){var o=getLastOfPath(e,n),i=o.obj,r=o.k;if(i)return i[r]}function getPathWithDefaults(e,n,o){var i=getPath(e,o);return void 0!==i?i:getPath(n,o)}function deepExtend(e,n,o){for(var i in n)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof n[i]||n[i]instanceof String?o&&(e[i]=n[i]):deepExtend(e[i],n[i],o):e[i]=n[i]);return e}function regexEscape$1(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return r[e]})):e}var a="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,s=[" ",",","?","!",";"];function ownKeys$1(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread$1(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$1(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$1(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(e);if(n){var r=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function deepFind(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[n])return e[n];for(var i=n.split(o),r=e,a=0;a<i.length;++a){if(!r)return;if("string"==typeof r[i[a]]&&a+1<i.length)return;if(void 0===r[i[a]]){for(var s=2,l=i.slice(a,a+s).join(o),c=r[l];void 0===c&&i.length>a+s;)s++,c=r[l=i.slice(a,a+s).join(o)];if(void 0===c)return;if(null===c)return null;if(n.endsWith(l)){if("string"==typeof c)return c;if(l&&"string"==typeof c[l])return c[l]}var u=i.slice(a+s).join(o);return u?deepFind(c,u,o):void 0}r=r[i[a]]}return r}}var l=function(e){_inherits(ResourceStore,i);var n=_createSuper(ResourceStore);function ResourceStore(e){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck(this,ResourceStore),o=n.call(this),a&&i.call(_assertThisInitialized(o)),o.data=e||{},o.options=r,void 0===o.options.keySeparator&&(o.options.keySeparator="."),void 0===o.options.ignoreJSONStructure&&(o.options.ignoreJSONStructure=!0),o}return _createClass(ResourceStore,[{key:"addNamespaces",value:function addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function removeNamespaces(e){var n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}},{key:"getResource",value:function getResource(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,a=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,n];o&&"string"!=typeof o&&(s=s.concat(o)),o&&"string"==typeof o&&(s=s.concat(r?o.split(r):o)),e.indexOf(".")>-1&&(s=e.split("."));var l=getPath(this.data,s);return l||!a||"string"!=typeof o?l:deepFind(this.data&&this.data[e]&&this.data[e][n],o,r)}},{key:"addResource",value:function addResource(e,n,o,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var s=[e,n];o&&(s=s.concat(a?o.split(a):o)),e.indexOf(".")>-1&&(i=n,n=(s=e.split("."))[1]),this.addNamespaces(n),setPath(this.data,s,i),r.silent||this.emit("added",e,n,o,i)}},{key:"addResources",value:function addResources(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in o)"string"!=typeof o[r]&&"[object Array]"!==Object.prototype.toString.apply(o[r])||this.addResource(e,n,r,o[r],{silent:!0});i.silent||this.emit("added",e,n,o)}},{key:"addResourceBundle",value:function addResourceBundle(e,n,o,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,n];e.indexOf(".")>-1&&(i=o,o=n,n=(s=e.split("."))[1]),this.addNamespaces(n);var l=getPath(this.data,s)||{};i?deepExtend(l,o,r):l=_objectSpread$1(_objectSpread$1({},l),o),setPath(this.data,s,l),a.silent||this.emit("added",e,n,o)}},{key:"removeResourceBundle",value:function removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}},{key:"hasResourceBundle",value:function hasResourceBundle(e,n){return void 0!==this.getResource(e,n)}},{key:"getResourceBundle",value:function getResourceBundle(e,n){return n||(n=this.options.defaultNS),"v1"===this.options.compatibilityAPI?_objectSpread$1(_objectSpread$1({},{}),this.getResource(e,n)):this.getResource(e,n)}},{key:"getDataByLanguage",value:function getDataByLanguage(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function hasLanguageSomeTranslations(e){var n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find((function(e){return n[e]&&Object.keys(n[e]).length>0}))}},{key:"toJSON",value:function toJSON(){return this.data}}]),ResourceStore}(),c={processors:{},addPostProcessor:function addPostProcessor(e){this.processors[e.name]=e},handle:function handle(e,n,o,i,r){var a=this;return e.forEach((function(e){a.processors[e]&&(n=a.processors[e].process(n,o,i,r))})),n}};function ownKeys$2(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread$2(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$2(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$2(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function _createSuper$1(e){var n=function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(e);if(n){var r=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}var u={},d=function(e){_inherits(Translator,i);var n=_createSuper$1(Translator);function Translator(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,Translator),r=n.call(this),a&&i.call(_assertThisInitialized(r)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,_assertThisInitialized(r)),r.options=s,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r.logger=o.create("translator"),r}return _createClass(Translator,[{key:"changeLanguage",value:function changeLanguage(e){e&&(this.language=e)}},{key:"exists",value:function exists(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var o=this.resolve(e,n);return o&&void 0!==o.res}},{key:"extractFromKey",value:function extractFromKey(e,n){var o=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===o&&(o=":");var i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,r=n.ns||this.options.defaultNS||[],a=o&&e.indexOf(o)>-1,l=!(this.options.userDefinedKeySeparator||n.keySeparator||this.options.userDefinedNsSeparator||n.nsSeparator||function looksLikeObjectPath(e,n,o){n=n||"",o=o||"";var i=s.filter((function(e){return n.indexOf(e)<0&&o.indexOf(e)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),a=!r.test(e);if(!a){var l=e.indexOf(o);l>0&&!r.test(e.substring(0,l))&&(a=!0)}return a}(e,o,i));if(a&&!l){var c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:r};var u=e.split(o);(o!==i||o===i&&this.options.ns.indexOf(u[0])>-1)&&(r=u.shift()),e=u.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function translate(e,n,o){var i=this;if("object"!==_typeof(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var r=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],n),l=s.key,c=s.namespaces,u=c[c.length-1],d=n.lng||this.language,p=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(p){var h=n.nsSeparator||this.options.nsSeparator;return r?(g.res="".concat(u).concat(h).concat(l),g):"".concat(u).concat(h).concat(l)}return r?(g.res=l,g):l}var g=this.resolve(e,n),f=g&&g.res,v=g&&g.usedKey||l,b=g&&g.exactUsedKey||l,y=Object.prototype.toString.apply(f),m=["[object Number]","[object Function]","[object RegExp]"],k=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,w="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(x&&f&&w&&m.indexOf(y)<0&&("string"!=typeof k||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,f,_objectSpread$2(_objectSpread$2({},n),{},{ns:c})):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");return r?(g.res=C,g):C}if(a){var S="[object Array]"===y,P=S?[]:{},$=S?b:v;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var L="".concat($).concat(a).concat(E);P[E]=this.translate(L,_objectSpread$2(_objectSpread$2({},n),{joinArrays:!1,ns:c})),P[E]===L&&(P[E]=f[E])}f=P}}else if(x&&"string"==typeof k&&"[object Array]"===y)(f=f.join(k))&&(f=this.extendTranslation(f,e,n,o));else{var O=!1,A=!1,T=void 0!==n.count&&"string"!=typeof n.count,j=Translator.hasDefaultValue(n),I=T?this.pluralResolver.getSuffix(d,n.count,n):"",R=n["defaultValue".concat(I)]||n.defaultValue;!this.isValidLookup(f)&&j&&(O=!0,f=R),this.isValidLookup(f)||(A=!0,f=l);var M=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,D=M&&A?void 0:f,B=j&&R!==f&&this.options.updateMissing;if(A||O||B){if(this.logger.log(B?"updateKey":"missingKey",d,u,l,B?R:f),a){var N=this.resolve(l,_objectSpread$2(_objectSpread$2({},n),{},{keySeparator:!1}));N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var G=[],z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&z&&z[0])for(var q=0;q<z.length;q++)G.push(z[q]);else"all"===this.options.saveMissingTo?G=this.languageUtils.toResolveHierarchy(n.lng||this.language):G.push(n.lng||this.language);var H=function send(e,o,r){var a=j&&r!==f?r:D;i.options.missingKeyHandler?i.options.missingKeyHandler(e,u,o,a,B,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,u,o,a,B,n),i.emit("missingKey",e,u,o,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?G.forEach((function(e){i.pluralResolver.getSuffixes(e,n).forEach((function(o){H([e],l+o,n["defaultValue".concat(o)]||R)}))})):H(G,l,R))}f=this.extendTranslation(f,e,n,g,o),A&&f===l&&this.options.appendNamespaceToMissingKey&&(f="".concat(u,":").concat(l)),(A||O)&&this.options.parseMissingKeyHandler&&(f="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(u,":").concat(l):l,O?f:void 0):this.options.parseMissingKeyHandler(f))}return r?(g.res=f,g):f}},{key:"extendTranslation",value:function extendTranslation(e,n,o,i,r){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,_objectSpread$2(_objectSpread$2({},this.options.interpolation.defaultVariables),o),i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(_objectSpread$2(_objectSpread$2({},o),{interpolation:_objectSpread$2(_objectSpread$2({},this.options.interpolation),o.interpolation)}));var s,l="string"==typeof e&&(o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(l){var u=e.match(this.interpolator.nestingRegexp);s=u&&u.length}var d=o.replace&&"string"!=typeof o.replace?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=_objectSpread$2(_objectSpread$2({},this.options.interpolation.defaultVariables),d)),e=this.interpolator.interpolate(e,d,o.lng||this.language,o),l){var p=e.match(this.interpolator.nestingRegexp);s<(p&&p.length)&&(o.nest=!1)}!1!==o.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!o.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(n[0])),null):a.translate.apply(a,i.concat([n]))}),o)),o.interpolation&&this.interpolator.reset()}var h=o.postProcess||this.options.postProcess,g="string"==typeof h?[h]:h;return null!=e&&g&&g.length&&!1!==o.applyPostProcessor&&(e=c.handle(g,e,n,this.options&&this.options.postProcessPassResolved?_objectSpread$2({i18nResolved:i},o):o,this)),e}},{key:"resolve",value:function resolve(e){var n,o,i,r,a,s=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(n)){var c=s.extractFromKey(e,l),d=c.key;o=d;var p=c.namespaces;s.options.fallbackNS&&(p=p.concat(s.options.fallbackNS));var h=void 0!==l.count&&"string"!=typeof l.count,g=h&&!l.ordinal&&0===l.count&&s.pluralResolver.shouldUseIntlApi(),f=void 0!==l.context&&("string"==typeof l.context||"number"==typeof l.context)&&""!==l.context,v=l.lngs?l.lngs:s.languageUtils.toResolveHierarchy(l.lng||s.language,l.fallbackLng);p.forEach((function(e){s.isValidLookup(n)||(a=e,!u["".concat(v[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(a)&&(u["".concat(v[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(o,'" for languages "').concat(v.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach((function(o){if(!s.isValidLookup(n)){r=o;var a,c=[d];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(c,d,o,e,l);else{var u;h&&(u=s.pluralResolver.getSuffix(o,l.count,l));var p="".concat(s.options.pluralSeparator,"zero");if(h&&(c.push(d+u),g&&c.push(d+p)),f){var v="".concat(d).concat(s.options.contextSeparator).concat(l.context);c.push(v),h&&(c.push(v+u),g&&c.push(v+p))}}for(;a=c.pop();)s.isValidLookup(n)||(i=a,n=s.getResource(o,e,a,l))}})))}))}})),{res:n,usedKey:o,exactUsedKey:i,usedLng:r,usedNS:a}}},{key:"isValidLookup",value:function isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function getResource(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,o,i):this.resourceStore.getResource(e,n,o,i)}}],[{key:"hasDefaultValue",value:function hasDefaultValue(e){var n="defaultValue";for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&n===o.substring(0,n.length)&&void 0!==e[o])return!0;return!1}}]),Translator}();function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}var p=function(){function LanguageUtil(e){_classCallCheck(this,LanguageUtil),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=o.create("languageUtils")}return _createClass(LanguageUtil,[{key:"getScriptPartFromCode",value:function getScriptPartFromCode(e){if(!e||e.indexOf("-")<0)return null;var n=e.split("-");return 2===n.length?null:(n.pop(),"x"===n[n.length-1].toLowerCase()?null:this.formatLanguageCode(n.join("-")))}},{key:"getLanguagePartFromCode",value:function getLanguagePartFromCode(e){if(!e||e.indexOf("-")<0)return e;var n=e.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function formatLanguageCode(e){if("string"==typeof e&&e.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],o=e.split("-");return this.options.lowerCaseLng?o=o.map((function(e){return e.toLowerCase()})):2===o.length?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),n.indexOf(o[1].toLowerCase())>-1&&(o[1]=capitalize(o[1].toLowerCase()))):3===o.length&&(o[0]=o[0].toLowerCase(),2===o[1].length&&(o[1]=o[1].toUpperCase()),"sgn"!==o[0]&&2===o[2].length&&(o[2]=o[2].toUpperCase()),n.indexOf(o[1].toLowerCase())>-1&&(o[1]=capitalize(o[1].toLowerCase())),n.indexOf(o[2].toLowerCase())>-1&&(o[2]=capitalize(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function getBestMatchFromCodes(e){var n,o=this;return e?(e.forEach((function(e){if(!n){var i=o.formatLanguageCode(e);o.options.supportedLngs&&!o.isSupportedCode(i)||(n=i)}})),!n&&this.options.supportedLngs&&e.forEach((function(e){if(!n){var i=o.getLanguagePartFromCode(e);if(o.isSupportedCode(i))return n=i;n=o.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n):null}},{key:"getFallbackCodes",value:function getFallbackCodes(e,n){if(!e)return[];if("function"==typeof e&&(e=e(n)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!n)return e.default||[];var o=e[n];return o||(o=e[this.getScriptPartFromCode(n)]),o||(o=e[this.formatLanguageCode(n)]),o||(o=e[this.getLanguagePartFromCode(n)]),o||(o=e.default),o||[]}},{key:"toResolveHierarchy",value:function toResolveHierarchy(e,n){var o=this,i=this.getFallbackCodes(n||this.options.fallbackLng||[],e),r=[],a=function addCode(e){e&&(o.isSupportedCode(e)?r.push(e):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&a(o.formatLanguageCode(e))})),r}}]),LanguageUtil}(),h=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],g={1:function _(e){return Number(e>1)},2:function _(e){return Number(1!=e)},3:function _(e){return 0},4:function _(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function _(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function _(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function _(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function _(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function _(e){return Number(e>=2)},10:function _(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function _(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function _(e){return Number(e%10!=1||e%100==11)},13:function _(e){return Number(0!==e)},14:function _(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function _(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function _(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function _(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function _(e){return Number(0==e?0:1==e?1:2)},19:function _(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function _(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function _(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function _(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},f=["v1","v2","v3"],v={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){var e={};return h.forEach((function(n){n.lngs.forEach((function(o){e[o]={numbers:n.nr,plurals:g[n.fc]}}))})),e}var b=function(){function PluralResolver(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,PluralResolver),this.languageUtils=e,this.options=n,this.logger=o.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}return _createClass(PluralResolver,[{key:"addRule",value:function addRule(e,n){this.rules[e]=n}},{key:"getRule",value:function getRule(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:n.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function needsPlural(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.getRule(e,n);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}},{key:"getPluralFormsOfKey",value:function getPluralFormsOfKey(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,o).map((function(e){return"".concat(n).concat(e)}))}},{key:"getSuffixes",value:function getSuffixes(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,o);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(e,n){return v[e]-v[n]})).map((function(e){return"".concat(n.options.prepend).concat(e)})):i.numbers.map((function(i){return n.getSuffix(e,i,o)})):[]}},{key:"getSuffix",value:function getSuffix(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(e,o);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(n)):this.getSuffixRetroCompatible(i,n):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function getSuffixRetroCompatible(e,n){var o=this,i=e.noAbs?e.plurals(n):e.plurals(Math.abs(n)),r=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var a=function returnSuffix(){return o.options.prepend&&r.toString()?o.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function shouldUseIntlApi(){return!f.includes(this.options.compatibilityJSON)}}]),PluralResolver}();function ownKeys$3(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread$3(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$3(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$3(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var y=function(){function Interpolator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Interpolator),this.logger=o.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.init(e)}return _createClass(Interpolator,[{key:"init",value:function init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var n=e.interpolation;this.escape=void 0!==n.escape?n.escape:escape,this.escapeValue=void 0===n.escapeValue||n.escapeValue,this.useRawValueToEscape=void 0!==n.useRawValueToEscape&&n.useRawValueToEscape,this.prefix=n.prefix?regexEscape$1(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?regexEscape$1(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?regexEscape$1(n.nestingPrefix):n.nestingPrefixEscaped||regexEscape$1("$t("),this.nestingSuffix=n.nestingSuffix?regexEscape$1(n.nestingSuffix):n.nestingSuffixEscaped||regexEscape$1(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=void 0!==n.alwaysFormat&&n.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function reset(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function resetRegExp(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function interpolate(e,n,o,i){var r,a,s,l=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function regexSafe(e){return e.replace(/\$/g,"$$$$")}var u=function handleFormat(e){if(e.indexOf(l.formatSeparator)<0){var r=getPathWithDefaults(n,c,e);return l.alwaysFormat?l.format(r,void 0,o,_objectSpread$3(_objectSpread$3(_objectSpread$3({},i),n),{},{interpolationkey:e})):r}var a=e.split(l.formatSeparator),s=a.shift().trim(),u=a.join(l.formatSeparator).trim();return l.format(getPathWithDefaults(n,c,s),u,o,_objectSpread$3(_objectSpread$3(_objectSpread$3({},i),n),{},{interpolationkey:s}))};this.resetRegExp();var d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function safeValue(e){return regexSafe(e)}},{regex:this.regexp,safeValue:function safeValue(e){return l.escapeValue?regexSafe(l.escape(e)):regexSafe(e)}}].forEach((function(n){for(s=0;r=n.regex.exec(e);){var o=r[1].trim();if(void 0===(a=u(o)))if("function"==typeof d){var c=d(e,r,i);a="string"==typeof c?c:""}else if(i&&i.hasOwnProperty(o))a="";else{if(p){a=r[0];continue}l.logger.warn("missed to pass in variable ".concat(o," for interpolating ").concat(e)),a=""}else"string"==typeof a||l.useRawValueToEscape||(a=makeString(a));var h=n.safeValue(a);if(e=e.replace(r[0],h),p?(n.regex.lastIndex+=a.length,n.regex.lastIndex-=r[0].length):n.regex.lastIndex=0,++s>=l.maxReplaces)break}})),e}},{key:"nest",value:function nest(e,n){var o,i,r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=_objectSpread$3({},a);function handleHasOptions(e,n){var o=this.nestingOptionsSeparator;if(e.indexOf(o)<0)return e;var i=e.split(new RegExp("".concat(o,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,s)).replace(/'/g,'"');try{s=JSON.parse(r),n&&(s=_objectSpread$3(_objectSpread$3({},n),s))}catch(n){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),n),"".concat(e).concat(o).concat(r)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;o=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==o[0].indexOf(this.formatSeparator)&&!/{.*}/.test(o[1])){var u=o[1].split(this.formatSeparator).map((function(e){return e.trim()}));o[1]=u.shift(),l=u,c=!0}if((i=n(handleHasOptions.call(this,o[1].trim(),s),s))&&o[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=makeString(i)),i||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(e)),i=""),c&&(i=l.reduce((function(e,n){return r.format(e,n,a.lng,_objectSpread$3(_objectSpread$3({},a),{},{interpolationkey:o[1].trim()}))}),i.trim())),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e}}]),Interpolator}();function ownKeys$4(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread$4(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$4(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$4(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var m=function(){function Formatter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Formatter),this.logger=o.create("formatter"),this.options=e,this.formats={number:function number(e,n,o){return new Intl.NumberFormat(n,o).format(e)},currency:function currency(e,n,o){return new Intl.NumberFormat(n,_objectSpread$4(_objectSpread$4({},o),{},{style:"currency"})).format(e)},datetime:function datetime(e,n,o){return new Intl.DateTimeFormat(n,_objectSpread$4({},o)).format(e)},relativetime:function relativetime(e,n,o){return new Intl.RelativeTimeFormat(n,_objectSpread$4({},o)).format(e,o.range||"day")},list:function list(e,n,o){return new Intl.ListFormat(n,_objectSpread$4({},o)).format(e)}},this.init(e)}return _createClass(Formatter,[{key:"init",value:function init(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},o=n.interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}},{key:"add",value:function add(e,n){this.formats[e.toLowerCase().trim()]=n}},{key:"format",value:function format(e,n,o,i){var r=this;return n.split(this.formatSeparator).reduce((function(e,n){var a=function parseFormatStr(e){var n=e.toLowerCase().trim(),o={};if(e.indexOf("(")>-1){var i=e.split("(");n=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===n&&r.indexOf(":")<0?o.currency||(o.currency=r.trim()):"relativetime"===n&&r.indexOf(":")<0?o.range||(o.range=r.trim()):r.split(";").forEach((function(e){if(e){var n=_toArray(e.split(":")),i=n[0],r=n.slice(1).join(":").trim().replace(/^'+|'+$/g,"");o[i.trim()]||(o[i.trim()]=r),"false"===r&&(o[i.trim()]=!1),"true"===r&&(o[i.trim()]=!0),isNaN(r)||(o[i.trim()]=parseInt(r,10))}}))}return{formatName:n,formatOptions:o}}(n),s=a.formatName,l=a.formatOptions;if(r.formats[s]){var c=e;try{var u=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},d=u.locale||u.lng||i.locale||i.lng||o;c=r.formats[s](e,d,_objectSpread$4(_objectSpread$4(_objectSpread$4({},l),i),u))}catch(e){r.logger.warn(e)}return c}return r.logger.warn("there was no format function for ".concat(s)),e}),e)}}]),Formatter}();function ownKeys$5(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread$5(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$5(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$5(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function _createSuper$2(e){var n=function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(e);if(n){var r=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}var k=function(e){_inherits(Connector,i);var n=_createSuper$2(Connector);function Connector(e,r,s){var l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _classCallCheck(this,Connector),l=n.call(this),a&&i.call(_assertThisInitialized(l)),l.backend=e,l.store=r,l.services=s,l.languageUtils=s.languageUtils,l.options=c,l.logger=o.create("backendConnector"),l.waitingReads=[],l.maxParallelReads=c.maxParallelReads||10,l.readingCalls=0,l.maxRetries=c.maxRetries>=0?c.maxRetries:5,l.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,l.state={},l.queue=[],l.backend&&l.backend.init&&l.backend.init(s,c.backend,c),l}return _createClass(Connector,[{key:"queueLoad",value:function queueLoad(e,n,o,i){var r=this,a={},s={},l={},c={};return e.forEach((function(e){var i=!0;n.forEach((function(n){var l="".concat(e,"|").concat(n);!o.reload&&r.store.hasResourceBundle(e,n)?r.state[l]=2:r.state[l]<0||(1===r.state[l]?void 0===s[l]&&(s[l]=!0):(r.state[l]=1,i=!1,void 0===s[l]&&(s[l]=!0),void 0===a[l]&&(a[l]=!0),void 0===c[n]&&(c[n]=!0)))})),i||(l[e]=!0)})),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function loaded(e,n,o){var i=e.split("|"),r=i[0],a=i[1];n&&this.emit("failedLoading",r,a,n),o&&this.store.addResourceBundle(r,a,o),this.state[e]=n?-1:2;var loaded={};this.queue.forEach((function(o){!function pushPath(e,n,o,i){var r=getLastOfPath(e,n,Object),a=r.obj,s=r.k;a[s]=a[s]||[],i&&(a[s]=a[s].concat(o)),i||a[s].push(o)}(o.loaded,[r],a),function removePending(e,n){void 0!==e.pending[n]&&(delete e.pending[n],e.pendingCount--)}(o,e),n&&o.errors.push(n),0!==o.pendingCount||o.done||(Object.keys(o.loaded).forEach((function(e){loaded[e]||(loaded[e]={});var n=o.loaded[e];n.length&&n.forEach((function(n){void 0===loaded[e][n]&&(loaded[e][n]=!0)}))})),o.done=!0,o.errors.length?o.callback(o.errors):o.callback())})),this.emit("loaded",loaded),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function read(e,n,o){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;return e.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:e,ns:n,fcName:o,tried:r,wait:a,callback:s}):(this.readingCalls++,this.backend[o](e,n,(function(l,c){if(i.readingCalls--,i.waitingReads.length>0){var u=i.waitingReads.shift();i.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}l&&c&&r<i.maxRetries?setTimeout((function(){i.read.call(i,e,n,o,r+1,2*a,s)}),a):s(l,c)}))):s(null,{})}},{key:"prepareLoading",value:function prepareLoading(e,n){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof n&&(n=[n]);var a=this.queueLoad(e,n,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach((function(e){o.loadOne(e)}))}},{key:"load",value:function load(e,n,o){this.prepareLoading(e,n,{},o)}},{key:"reload",value:function reload(e,n,o){this.prepareLoading(e,n,{reload:!0},o)}},{key:"loadOne",value:function loadOne(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(function(i,s){i&&n.logger.warn("".concat(o,"loading namespace ").concat(a," for language ").concat(r," failed"),i),!i&&s&&n.logger.log("".concat(o,"loaded namespace ").concat(a," for language ").concat(r),s),n.loaded(e,i,s)}))}},{key:"saveMissing",value:function saveMissing(e,n,o,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)?this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(n,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=o&&""!==o&&(this.backend&&this.backend.create&&this.backend.create(e,n,o,i,null,_objectSpread$5(_objectSpread$5({},a),{},{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],n,o,i))}}]),Connector}();function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function handle(e){var n={};if("object"===_typeof(e[1])&&(n=e[1]),"string"==typeof e[1]&&(n.defaultValue=e[1]),"string"==typeof e[2]&&(n.tDescription=e[2]),"object"===_typeof(e[2])||"object"===_typeof(e[3])){var o=e[3]||e[2];Object.keys(o).forEach((function(e){n[e]=o[e]}))}return n},interpolation:{escapeValue:!0,format:function format(e,n,o,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function ownKeys$6(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread$6(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$6(Object(o),!0).forEach((function(n){_defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$6(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function _createSuper$3(e){var n=function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(e);if(n){var r=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function noop(){}function bindMemberFunctions(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){"function"==typeof e[n]&&(e[n]=e[n].bind(e))}))}var x=function(e){_inherits(I18n,i);var n=_createSuper$3(I18n);function I18n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(_classCallCheck(this,I18n),e=n.call(this),a&&i.call(_assertThisInitialized(e)),e.options=transformOptions(r),e.services={},e.logger=o,e.modules={external:[]},bindMemberFunctions(_assertThisInitialized(e)),s&&!e.isInitialized&&!r.isClone){if(!e.options.initImmediate)return e.init(r,s),_possibleConstructorReturn(e,_assertThisInitialized(e));setTimeout((function(){e.init(r,s)}),0)}return e}return _createClass(I18n,[{key:"init",value:function init(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;"function"==typeof n&&(i=n,n={}),!n.defaultNS&&n.ns&&("string"==typeof n.ns?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var r=get();function createClassOnDemand(e){return e?"function"==typeof e?new e:e:null}if(this.options=_objectSpread$6(_objectSpread$6(_objectSpread$6({},r),this.options),transformOptions(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=_objectSpread$6(_objectSpread$6({},r.interpolation),this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator),!this.options.isClone){var a;this.modules.logger?o.init(createClassOnDemand(this.modules.logger),this.options):o.init(null,this.options),this.modules.formatter?a=this.modules.formatter:"undefined"!=typeof Intl&&(a=m);var s=new p(this.options);this.store=new l(this.options.resources,this.options);var c=this.services;c.logger=o,c.resourceStore=this.store,c.languageUtils=s,c.pluralResolver=new b(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!a||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(c.formatter=createClassOnDemand(a),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new y(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new k(createClassOnDemand(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];e.emit.apply(e,[n].concat(i))})),this.modules.languageDetector&&(c.languageDetector=createClassOnDemand(this.modules.languageDetector),c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=createClassOnDemand(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new d(this.services,this.options),this.translator.on("*",(function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];e.emit.apply(e,[n].concat(i))})),this.modules.external.forEach((function(n){n.init&&n.init(e)}))}if(this.format=this.options.interpolation.format,i||(i=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&"dev"!==u[0]&&(this.options.lng=u[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var h=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];h.forEach((function(n){e[n]=function(){var o;return(o=e.store)[n].apply(o,arguments)}}));var g=["addResource","addResources","addResourceBundle","removeResourceBundle"];g.forEach((function(n){e[n]=function(){var o;return(o=e.store)[n].apply(o,arguments),e}}));var f=defer(),v=function load(){var n=function finish(n,o){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),f.resolve(o),i(n,o)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return n(null,e.t.bind(e));e.changeLanguage(e.options.lng,n)};return this.options.resources||!this.options.initImmediate?v():setTimeout(v,0),f}},{key:"loadResources",value:function loadResources(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop,i=o,r="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var a=[],s=function append(e){e&&n.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(r)s(r);else{var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(a,this.options.ns,(function(e){e||n.resolvedLanguage||!n.language||n.setResolvedLanguage(n.language),i(e)}))}else i(null)}},{key:"reloadResources",value:function reloadResources(e,n,o){var i=defer();return e||(e=this.languages),n||(n=this.options.ns),o||(o=noop),this.services.backendConnector.reload(e,n,(function(e){i.resolve(),o(e)})),i}},{key:"use",value:function use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&c.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var n=0;n<this.languages.length;n++){var o=this.languages[n];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function changeLanguage(e,n){var o=this;this.isLanguageChangingTo=e;var i=defer();this.emit("languageChanging",e);var r=function setLngProps(e){o.language=e,o.languages=o.services.languageUtils.toResolveHierarchy(e),o.resolvedLanguage=void 0,o.setResolvedLanguage(e)},a=function setLng(a){e||a||!o.services.languageDetector||(a=[]);var s="string"==typeof a?a:o.services.languageUtils.getBestMatchFromCodes(a);s&&(o.language||r(s),o.translator.language||o.translator.changeLanguage(s),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(s)),o.loadResources(s,(function(e){!function done(e,a){a?(r(a),o.translator.changeLanguage(a),o.isLanguageChangingTo=void 0,o.emit("languageChanged",a),o.logger.log("languageChanged",a)):o.isLanguageChangingTo=void 0,i.resolve((function(){return o.t.apply(o,arguments)})),n&&n(e,(function(){return o.t.apply(o,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function getFixedT(e,n,o){var i=this,r=function fixedT(e,n){var r;if("object"!==_typeof(n)){for(var a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];r=i.options.overloadTranslationOptionHandler([e,n].concat(s))}else r=_objectSpread$6({},n);r.lng=r.lng||fixedT.lng,r.lngs=r.lngs||fixedT.lngs,r.ns=r.ns||fixedT.ns,r.keyPrefix=r.keyPrefix||o||fixedT.keyPrefix;var c=i.options.keySeparator||".",u=r.keyPrefix?"".concat(r.keyPrefix).concat(c).concat(e):e;return i.t(u,r)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=o,r}},{key:"t",value:function t(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function exists(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function setDefaultNamespace(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function hasLoadedNamespace(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function loadNotPending(e,o){var i=n.services.backendConnector.state["".concat(e,"|").concat(o)];return-1===i||2===i};if(o.precheck){var l=o.precheck(this,s);if(void 0!==l)return l}return!!this.hasResourceBundle(i,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(i,e)||r&&!s(a,e)))}},{key:"loadNamespaces",value:function loadNamespaces(e,n){var o=this,i=defer();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){o.options.ns.indexOf(e)<0&&o.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),n&&n(e)})),i):(n&&n(),Promise.resolve())}},{key:"loadLanguages",value:function loadLanguages(e,n){var o=defer();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){o.resolve(),n&&n(e)})),o):(n&&n(),Promise.resolve())}},{key:"dir",value:function dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function cloneInstance(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop,i=_objectSpread$6(_objectSpread$6(_objectSpread$6({},this.options),n),{isClone:!0}),r=new I18n(i),a=["store","services","language"];return a.forEach((function(n){r[n]=e[n]})),r.services=_objectSpread$6({},this.services),r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r.translator=new d(r.services,r.options),r.translator.on("*",(function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r.emit.apply(r,[e].concat(o))})),r.init(i,o),r.translator.options=r.options,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}},{key:"toJSON",value:function toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),I18n}();_defineProperty(x,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new x(e,n)}));var w,C=x.createInstance();C.createInstance=x.createInstance,C.createInstance,C.init,C.loadResources,C.reloadResources,C.use,C.changeLanguage,C.getFixedT,C.t,C.exists,C.setDefaultNamespace,C.hasLoadedNamespace,C.loadNamespaces,C.loadLanguages;var S=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e,n){var o;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return e?w=e:navigator.userLanguage?w=navigator.userLanguage:navigator.language&&(w=navigator.language),n.includes(w)||"test"===w||(w="en"),i.next=4,import("./locale/lang.".concat(encodeURIComponent(w),".js"));case 4:return o=i.sent,C.init({lng:w,debug:!1,resources:_defineProperty$1({},w,{translation:o.default})}),i.abrupt("return",{langParam:w,i18next:C});case 7:case"end":return i.stop()}}),_callee)})));return function putLocale(n,o){return e.apply(this,arguments)}}(),P=function t(e){return C.t(e)},$=document.createElement("template");$.innerHTML='\n  <style>\n  :host(:hover) :not(.disabled)\n  {\n    background-color: var(--icon-bg-color-hover);\n  }\n  div\n  {\n    height: 24px;\n    width: 24px;\n    margin: 4px 1px 4px;\n    padding: 3px;\n    background-color: var(--icon-bg-color);\n    cursor: pointer;\n    border-radius: 3px;\n  }\n  .small {\n    width: 14px;\n    height: 14px;\n    padding: 1px;\n    border-radius: 1px;\n  }\n  img {\n    border: none;\n    width: 100%;\n    height: 100%;\n  }\n  .pressed {\n    background-color: var(--icon-bg-color-hover);\n  }\n  .disabled {\n    opacity: 0.3;\n    cursor: default;\n  }\n  </style>\n  <div title="title">\n    <img alt="icon">\n  </div>\n';var E=function(e){_inherits$1(ToolButton,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(ToolButton);function ToolButton(){var e;return _classCallCheck$1(this,ToolButton),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append($.content.cloneNode(!0)),e.$div=e._shadowRoot.querySelector("div"),e.$img=e._shadowRoot.querySelector("img"),e.imgPath=svgEditor.configObj.curConfig.imgPath,e}return _createClass$1(ToolButton,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"title":var i=this.getAttribute("shortcut");this.$div.setAttribute("title","".concat(P(o)," ").concat(i?"[".concat(P(i),"]"):""));break;case"style":this.$div.style=o;break;case"src":-1!==o.indexOf("data:")?this.$img.setAttribute("src",o):this.$img.setAttribute("src",this.imgPath+"/"+o);break;case"pressed":null===o?this.$div.classList.remove("pressed"):this.$div.classList.add("pressed");break;case"size":"small"===o?this.$div.classList.add("small"):this.$div.classList.remove("small");break;case"disabled":o?this.$div.classList.add("disabled"):this.$div.classList.remove("disabled");break;default:console.error("unknown attribute: ".concat(e))}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"pressed",get:function get(){return this.hasAttribute("pressed")},set:function set(e){e?this.setAttribute("pressed","true"):this.removeAttribute("pressed")}},{key:"disabled",get:function get(){return this.hasAttribute("disabled")},set:function set(e){e?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}},{key:"size",get:function get(){return this.getAttribute("size")},set:function set(e){this.setAttribute("size",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this.getAttribute("shortcut");n&&document.addEventListener("keydown",(function(o){if("BODY"===o.target.nodeName){var i="".concat(o.metaKey?"meta+":"").concat(o.ctrlKey?"ctrl+":"").concat(o.key.toUpperCase());n===i&&(e.click(),o.preventDefault())}}))}}],[{key:"observedAttributes",get:function get(){return["title","src","pressed","disabled","size","style"]}}]),ToolButton}();customElements.define("se-button",E);var L=function(e){_inherits$1(FlyingButton,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(FlyingButton);function FlyingButton(){var e;return _classCallCheck$1(this,FlyingButton),(e=n.call(this)).imgPath=svgEditor.configObj.curConfig.imgPath,e.template=e.createTemplate(e.imgPath),e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(e.template.content.cloneNode(!0)),e.$button=e._shadowRoot.querySelector(".menu-button"),e.$handle=e._shadowRoot.querySelector(".handle"),e.$overall=e._shadowRoot.querySelector(".overall"),e.$img=e._shadowRoot.querySelector("img"),e.$menu=e._shadowRoot.querySelector(".menu"),e.$elements=e.$menu.lastElementChild.assignedElements(),e}return _createClass$1(FlyingButton,[{key:"createTemplate",value:function createTemplate(e){var n=document.createElement("template");return n.innerHTML="\n      <style>\n        :host {\n          position:relative;\n        }\n        .overall:hover *\n        {\n          background-color: var(--icon-bg-color-hover);\n        }\n        img {\n          border: none;\n          width: 24px;\n          height: 24px;\n        }\n        .overall.pressed .button-icon,\n        .overall.pressed .handle {\n          background-color: var(--icon-bg-color-hover) !important;\n        }\n        .overall.pressed .menu-button {\n          background-color: var(--icon-bg-color-hover) !important;\n        }\n        .disabled {\n          opacity: 0.3;\n          cursor: default;\n        }\n        .menu-button {\n          height: 24px;\n          width: 24px;\n          margin: 2px 1px 4px;\n          padding: 3px;\n          background-color: var(--icon-bg-color);\n          cursor: pointer;\n          position: relative;\n          border-radius: 3px;\n          overflow: hidden;\n        }\n        .handle {\n          height: 8px;\n          width: 8px;\n          background-image: url(".concat(e,'/handle.svg);\n          position:absolute;\n          bottom: 0px;\n          right: 0px;\n        }\n        .button-icon {\n        }\n        .menu {\n          position: fixed;\n          background: none !important;\n          display:none;\n          margin-left: 34px;\n        }\n        .open {\n          display: flex;\n        }\n        .menu-item {\n          align-content: flex-start;\n          height: 24px;\n          width: 24px;\n          top:0px;\n          left:0px;\n        }\n        .overall {\n          background: none !important;\n        }\n      </style>\n\n      <div class="overall">\n        <div class="menu">\n          <slot></slot>\n        </div>\n        <div class="menu-button">\n          <img class="button-icon" src="logo.svg" alt="icon">\n          <div class="handle"></div>\n        </div>\n      </div>'),n}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"title":var i=this.getAttribute("shortcut");this.$button.setAttribute("title","".concat(P(o)," ").concat(i?"[".concat(P(i),"]"):""));break;case"pressed":o?this.$overall.classList.add("pressed"):this.$overall.classList.remove("pressed");break;case"opened":o?this.$menu.classList.add("open"):this.$menu.classList.remove("open");break;case"disabled":o?this.$overall.classList.add("disabled"):this.$overall.classList.remove("disabled");break;default:console.error("unknown attribute: ".concat(e))}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"pressed",get:function get(){return this.hasAttribute("pressed")},set:function set(e){e?this.setAttribute("pressed","true"):(this.removeAttribute("pressed",""),this.removeAttribute("opened"))}},{key:"opened",get:function get(){return this.hasAttribute("opened")},set:function set(e){e?this.setAttribute("opened","opened"):this.removeAttribute("opened")}},{key:"disabled",get:function get(){return this.hasAttribute("disabled")},set:function set(e){e?this.setAttribute("disabled","true"):this.removeAttribute("disabled","")}},{key:"connectedCallback",value:function connectedCallback(){var e=this;this.activeSlot=this.shadowRoot.querySelector("slot").assignedElements()[0],this.$img.setAttribute("src",this.imgPath+"/"+this.activeSlot.getAttribute("src"));var n=function onClickHandler(n){switch(n.stopPropagation(),n.target.nodeName){case"SE-FLYINGBUTTON":e.pressed?e.setAttribute("opened","opened"):(e.activeSlot.click(),e.setAttribute("pressed","pressed"));break;case"SE-BUTTON":e.$img.setAttribute("src",e.imgPath+"/"+n.target.getAttribute("src")),e.activeSlot=n.target,e.setAttribute("pressed","pressed"),e.$menu.classList.remove("open");break;case"DIV":if(e.opened)e.removeAttribute("opened");else{e.setAttribute("opened","opened");var o=e.getBoundingClientRect();e.$menu.style.top=o.top+"px"}break;default:console.error("unkonw nodeName for:",n.target,n.target.className)}};svgEditor.$click(this,n),svgEditor.$click(this.$handle,n)}}],[{key:"observedAttributes",get:function get(){return["title","pressed","disabled","opened"]}}]),FlyingButton}();customElements.define("se-flyingbutton",L);var O=function(e){_inherits$1(ExplorerButton,_wrapNativeSuper(HTMLElement));var n,o,i=_createSuper$4(ExplorerButton);function ExplorerButton(){var e;return _classCallCheck$1(this,ExplorerButton),(e=i.call(this)).imgPath=svgEditor.configObj.curConfig.imgPath,e.extPreurl=svgEditor.configObj.curConfig.extPreurl,e.template=e.createTemplate(e.imgPath),e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(e.template.content.cloneNode(!0)),e.$button=e._shadowRoot.querySelector(".menu-button"),e.$overall=e._shadowRoot.querySelector(".overall"),e.$img=e._shadowRoot.querySelector(".menu-button img"),e.$menu=e._shadowRoot.querySelector(".menu"),e.$handle=e._shadowRoot.querySelector(".handle"),e.$lib=e._shadowRoot.querySelector(".image-lib"),e.files=[],e.request=new XMLHttpRequest,e.imgPath=svgEditor.configObj.curConfig.imgPath,e}return _createClass$1(ExplorerButton,[{key:"createTemplate",value:function createTemplate(e){var n=document.createElement("template");return n.innerHTML="\n    <style>\n    :host {\n      position:relative;\n    }\n    .menu-button:hover, se-button:hover, .menu-item:hover\n    {\n      background-color: var(--icon-bg-color-hover);\n    }\n    img {\n      border: none;\n      width: 24px;\n      height: 24px;\n    }\n    .overall.pressed .button-icon,\n    .overall.pressed,\n    .menu-item.pressed {\n      background-color: var(--icon-bg-color-hover) !important;\n    }\n    .overall.pressed .menu-button {\n      background-color: var(--icon-bg-color-hover) !important;\n    }\n    .disabled {\n      opacity: 0.3;\n      cursor: default;\n    }\n    .menu-button {\n      height: 24px;\n      width: 24px;\n      margin: 2px 1px 4px;\n      padding: 3px;\n      background-color: var(--icon-bg-color);\n      cursor: pointer;\n      position: relative;\n      border-radius: 3px;\n      overflow: hidden;\n    }\n    .handle {\n      height: 8px;\n      width: 8px;\n      background-image: url(".concat(e,'/handle.svg);\n      position:absolute;\n      bottom: 0px;\n      right: 0px;\n    }\n    .button-icon {\n    }\n    .menu {\n      position: fixed;\n      margin-left: 50%;\n      background: none !important;\n      display:none;\n      top: 35%;\n      left: 171px;\n    }\n    .image-lib {\n      position: fixed;\n      left: 50%;\n      top: 50%;\n      background: #E8E8E8;\n      display: none;\n      flex-wrap: wrap;\n      flex-direction: row;\n      width: 170px;\n    }\n    .menu-item {\n      line-height: 1em;\n      padding: 0.5em;\n      border: 1px solid #5a6162;\n      background: #E8E8E8;\n      margin-bottom: -1px;\n      white-space: nowrap;\n    }\n    .open-lib {\n      display: inline-flex;\n    }\n    .open {\n      display: block;\n    }\n    .overall {\n      background: none !important;\n    }\n    </style>\n  \n    <div class="overall">\n      <div class="menu-button">\n        <img class="button-icon" src="explorer.svg" alt="icon">\n        <div class="handle"></div>\n      </div>\n      <div class="image-lib"">\n        <se-button></se-button>\n     </div>\n      <div class="menu">\n        <div class="menu-item">menu</div>\n     </div>\n    </div>'),n}},{key:"attributeChangedCallback",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e,n,o){var i,r,a,s;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(n!==o){l.next=2;break}return l.abrupt("return");case 2:l.t0=e,l.next="title"===l.t0?5:"pressed"===l.t0?8:"disabled"===l.t0?10:"lib"===l.t0?12:"src"===l.t0?29:31;break;case 5:return i=this.getAttribute("shortcut"),this.$button.setAttribute("title","".concat(o," [").concat(i,"]")),l.abrupt("break",33);case 8:return o?this.$overall.classList.add("pressed"):this.$overall.classList.remove("pressed"),l.abrupt("break",33);case 10:return o?this.$overall.classList.add("disabled"):this.$overall.classList.remove("disabled"),l.abrupt("break",33);case 12:return l.prev=12,l.next=15,fetch("".concat(this.extPreurl).concat(o,"index.json"));case 15:return r=l.sent,l.next=18,r.json();case 18:return a=l.sent,s=a.lib,this.$menu.innerHTML=s.map((function(e,n){return'<div data-menu="'.concat(e,'" class="menu-item ').concat(0===n?"pressed":"",' ">').concat(e,"</div>")})).join(""),l.next=23,this.updateLib(s[0]);case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(12),console.error(l.t1);case 28:return l.abrupt("break",33);case 29:return this.$img.setAttribute("src",this.imgPath+"/"+o),l.abrupt("break",33);case 31:return console.error("unknown attribute: ".concat(e)),l.abrupt("break",33);case 33:case"end":return l.stop()}}),_callee,this,[[12,25]])}))),function attributeChangedCallback(e,n,i){return o.apply(this,arguments)})},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"pressed",get:function get(){return this.hasAttribute("pressed")},set:function set(e){e?this.setAttribute("pressed","true"):this.removeAttribute("pressed","")}},{key:"disabled",get:function get(){return this.hasAttribute("disabled")},set:function set(e){e?this.setAttribute("disabled","true"):this.removeAttribute("disabled","")}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=function onClickHandler(n){switch(n.stopPropagation(),n.target.nodeName){case"SE-EXPLORERBUTTON":e.$menu.classList.add("open"),e.$lib.classList.add("open-lib");break;case"SE-BUTTON":e.currentAction=n.target,e.$img.setAttribute("src",e.currentAction.getAttribute("src")),e.dataset.draw=e.data[e.currentAction.dataset.shape],e._shadowRoot.querySelectorAll(".image-lib [pressed]").forEach((function(e){e.pressed=!1})),e.currentAction.setAttribute("pressed","pressed"),e.$menu.classList.remove("open"),e.$lib.classList.remove("open-lib");break;case"DIV":"handle"===n.target.classList[0]?(e.$menu.classList.toggle("open"),e.$lib.classList.toggle("open-lib")):(e._shadowRoot.querySelectorAll(".menu > .pressed").forEach((function(e){e.classList.remove("pressed")})),n.target.classList.add("pressed"),e.updateLib(n.target.dataset.menu));break;default:console.error("unknown nodeName for:",n.target,n.target.className)}};svgEditor.$click(this,n),svgEditor.$click(this.$menu,n),svgEditor.$click(this.$lib,n),svgEditor.$click(this.$handle,n)}},{key:"updateLib",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(e){var n,o,i,r,a,s,l,c,u,d,p,h=this;return _regeneratorRuntime().wrap((function _callee3$(g){for(;;)switch(g.prev=g.next){case 0:return n=this.getAttribute("lib"),g.prev=1,g.next=4,fetch("".concat(this.extPreurl).concat(n).concat(e,".json"));case 4:return i=g.sent,g.next=7,i.json();case 7:return r=g.sent,a=n,this.data=r.data,s=null!==(o=r.size)&&void 0!==o?o:300,l=r.fill?"#333":"none",u=[-(c=.05*s),-c,s+2*c,s+2*c].join(" "),d=r.fill?0:s/30,g.next=17,Promise.all(Object.entries(this.data).map(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n,o,i,r,s,c,p;return _regeneratorRuntime().wrap((function _callee2$(g){for(;;)switch(g.prev=g.next){case 0:if(n=_slicedToArray(e,2),o=n[0],i=n[1],r="",s=o,!i.endsWith(".svg")){g.next=18;break}return s=i.replace(".svg",""),g.next=7,fetch("".concat(h.extPreurl).concat(a).concat(i));case 7:return c=g.sent,g.next=10,c.text();case 10:p=(p=(p=(p=g.sent).replace(/<\?xml.*\?>/i,"")).replace(/<sodipodi[^>]*/i,"")).replace(/<metadata[^<]*\/metadata>/i,""),p='\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n\t\t\t   '.concat(p,"\n\t\t\t</svg>"),r=btoa(p),g.next=19;break;case 18:r=btoa('\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n\t\t\t  <svg viewBox="'.concat(u,'"><path fill="').concat(l,'" stroke="#f8bb00" stroke-width="').concat(d,'" d="').concat(i,'"></path></svg>\n\t\t\t</svg>'));case 19:return g.next=21,'<se-button data-shape="'.concat(o,'" title="').concat(s,'" src="data:image/svg+xml;base64,').concat(r,'"></se-button>');case 21:return g.abrupt("return",g.sent);case 22:case"end":return g.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}()));case 17:p=g.sent,this.$lib.innerHTML=p.join(""),g.next=24;break;case 21:g.prev=21,g.t0=g.catch(1),console.error("could not read file:".concat(n).concat(e,".json"),g.t0);case 24:case"end":return g.stop()}}),_callee3,this,[[1,21]])}))),function updateLib(e){return n.apply(this,arguments)})}],[{key:"observedAttributes",get:function get(){return["title","pressed","disabled","lib","src"]}}]),ExplorerButton}();customElements.define("se-explorerbutton",O);var A=document.createElement("template");A.innerHTML='\n  <style>\n  input{\n    border:unset;\n    background-color:var(--input-color);\n    min-width:unset;\n    width:40px;\n    height:23px;\n    padding:1px 2px;\n    border:2px;\n    font: inherit;\n    margin: 2px 1px 0px 2px;\n    box-sizing:border-box;\n    text-align: center;\n    border-radius: 3px 0px 0px 3px;\n  }\n  #tool-wrapper{\n    height:20px;\n    display:flex;\n    align-items:center;\n  }\n  #icon{\n    margin-bottom:1px\n  }\n  #spinner{\n    display:flex;\n    flex-direction:column;\n  }\n  #spinner > div {\n    height: 11px;\n    width: 7px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 7px;\n    border-left:solid 1px transparent;\n    border-right:solid 1px transparent;\n    background-color:var(--input-color);\n  }\n  #arrow-up{\n    height:9px;\n    margin-top: 2px;\n    margin-bottom: 1px;\n  }\n  #down{\n    width:18px;\n    height:23px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color:var(--input-color);\n    border-radius: 0px 3px 3px 0px;\n    margin: 2px 5px 0px 1px;\n  }\n  #down > img {\n    margin-top: 2px;\n  }\n  #options-container {\n    position:fixed\n    display:flex;\n    flex-direction:column;\n    background-color:var(--icon-bg-color);\n    border:solid 1px white;\n    box-shadow:0 0px 10px rgb(0 0 0 / 50%);\n  }\n  ::slotted(*) {\n    margin:2px;\n    padding:3px;\n    color:white;\n  }\n  ::slotted(*:hover) {\n    background-color: rgb(43, 60, 69);\n  }\n  </style>\n  <div id="tool-wrapper">\n    <img id="icon" alt="icon" width="18" height="18"/>\n    <input/>\n    <div id="spinner">\n      <div id="arrow-up">▲</div>\n      <div id="arrow-down">▼</div>\n    </div>\n    <div id="down">\n      <img width="16" height="8" src="./images/arrow_down.svg"/>\n    </div>\n  </div>\n  <div id="options-container" style="display:none">\n    <slot></slot>\n  </div>\n';var T=function(e){_inherits$1(SeZoom,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeZoom);function SeZoom(){var e;return _classCallCheck$1(this,SeZoom),(e=n.call(this)).handleMouseDown=e.handleMouseDown.bind(_assertThisInitialized$1(e)),e.handleMouseUp=e.handleMouseUp.bind(_assertThisInitialized$1(e)),e.handleKeyDown=e.handleKeyDown.bind(_assertThisInitialized$1(e)),e.initPopup=e.initPopup.bind(_assertThisInitialized$1(e)),e.handleInput=e.handleInput.bind(_assertThisInitialized$1(e)),e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(A.content.cloneNode(!0)),e.slotElement=e._shadowRoot.querySelector("slot"),e.slotElement.addEventListener("slotchange",e.handleOptionsChange.bind(_assertThisInitialized$1(e))),e.inputElement=e._shadowRoot.querySelector("input"),e.inputElement.addEventListener("click",e.handleClick.bind(_assertThisInitialized$1(e))),e.inputElement.addEventListener("change",e.handleInput),e.inputElement.addEventListener("keydown",e.handleKeyDown),e.clickArea=e._shadowRoot.querySelector("#down"),e.clickArea.addEventListener("click",e.handleClick.bind(_assertThisInitialized$1(e))),e.imageElement=e._shadowRoot.querySelector("img"),e.imageElement.setAttribute("src",e.imgPath=svgEditor.configObj.curConfig.imgPath+"/"+e.getAttribute("src")),e.arrowUp=e._shadowRoot.querySelector("#arrow-up"),e.arrowUp.addEventListener("click",e.increment.bind(_assertThisInitialized$1(e))),e.arrowUp.addEventListener("mousedown",(function(n){return e.handleMouseDown("up",!0)})),e.arrowUp.addEventListener("mouseleave",(function(n){return e.handleMouseUp("up")})),e.arrowUp.addEventListener("mouseup",(function(n){return e.handleMouseUp("up")})),e.arrowDown=e._shadowRoot.querySelector("#arrow-down"),e.arrowDown.addEventListener("click",e.decrement.bind(_assertThisInitialized$1(e))),e.arrowDown.addEventListener("mousedown",(function(n){return e.handleMouseDown("down",!0)})),e.arrowDown.addEventListener("mouseleave",(function(n){return e.handleMouseUp("down")})),e.arrowDown.addEventListener("mouseup",(function(n){return e.handleMouseUp("down")})),e.optionsContainer=e._shadowRoot.querySelector("#options-container"),document.addEventListener("click",(function(n){return e.handleClose(n)})),e.changedTimeout=null,e}return _createClass$1(SeZoom,[{key:"value",get:function get(){return this.getAttribute("value")},set:function set(e){this.setAttribute("value",e)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o){if("value"===e)this.inputElement.value=o,this.dispatchEvent(new CustomEvent("change",{detail:{value:o}}))}else if("value"===e)parseInt(this.inputElement.value)!==o&&(this.inputElement.value=o)}},{key:"handleOptionsChange",value:function handleOptionsChange(){var e=this;this.slotElement.assignedElements().length>0&&(this.options=this.slotElement.assignedElements(),this.selectedValue=this.options[0].textContent,this.initPopup(),this.options.forEach((function(n){n.addEventListener("click",(function(n){return e.handleSelect(n)}))})))}},{key:"handleClick",value:function handleClick(){this.optionsContainer.style.display="flex",this.inputElement.select(),this.initPopup()}},{key:"handleSelect",value:function handleSelect(e){this.value=e.target.getAttribute("value"),this.title=e.target.getAttribute("text")}},{key:"initPopup",value:function initPopup(){var e=this.getBoundingClientRect(),n=this.optionsContainer.getBoundingClientRect(),o=e.top-n.height,i=e.left;this.optionsContainer.style.position="fixed",this.optionsContainer.style.top="".concat(o,"px"),this.optionsContainer.style.left="".concat(i,"px")}},{key:"handleClose",value:function handleClose(e){e.target!==this&&(this.optionsContainer.style.display="none",this.inputElement.blur())}},{key:"handleInput",value:function handleInput(){this.changedTimeout&&clearTimeout(this.changedTimeout),this.changedTimeout=setTimeout(this.triggerInputChanged.bind(this),500)}},{key:"triggerInputChanged",value:function triggerInputChanged(){var e=this.inputElement.value;this.value=e}},{key:"increment",value:function increment(){this.value=parseInt(this.value)+10}},{key:"decrement",value:function decrement(){this.value-10<=0?this.value=10:this.value=parseInt(this.value)-10}},{key:"handleMouseDown",value:function handleMouseDown(e,n){var o=this;"up"===e?(this.incrementHold=!0,!n&&this.increment(),setTimeout((function(){o.incrementHold&&o.handleMouseDown(e,!1)}),n?500:50)):"down"===e&&(this.decrementHold=!0,!n&&this.decrement(),setTimeout((function(){o.decrementHold&&o.handleMouseDown(e,!1)}),n?500:50))}},{key:"handleMouseUp",value:function handleMouseUp(e){"up"===e?this.incrementHold=!1:this.decrementHold=!1}},{key:"handleKeyDown",value:function handleKeyDown(e){"ArrowUp"===e.key?this.increment():"ArrowDown"===e.key&&this.decrement()}}],[{key:"observedAttributes",get:function get(){return["value"]}}]),SeZoom}();customElements.define("se-zoom",T);var j=function html(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return I.html.apply(I,[e].concat(o)).content},I={html:function html(e){for(var n=document.createElement("template"),o=arguments.length,i=new Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];return n.innerHTML=String.raw.apply(String,[e].concat(i)),n}},R=Symbol("defaultState"),M=Symbol("delegatesFocus"),D=Symbol("firstRender"),B=Symbol("focusTarget"),N=Symbol("hasDynamicTemplate"),G=Symbol("ids"),z=Symbol("nativeInternals"),q=Symbol("raiseChangeEvents"),H=Symbol("render"),U=Symbol("renderChanges"),V=Symbol("rendered"),K=Symbol("rendering"),W=Symbol("setState"),Y=Symbol("shadowRoot"),X=Symbol("shadowRootMode"),Z=Symbol("state"),J=Symbol("stateEffects"),Q=Symbol("template"),ee={tabindex:"tabIndex"},te={tabIndex:"tabindex"};function attributesForClass(e){if(e===HTMLElement)return[];var n=Object.getPrototypeOf(e.prototype).constructor,o=n.observedAttributes;o||(o=attributesForClass(n));var i=Object.getOwnPropertyNames(e.prototype).filter((function(n){var o=Object.getOwnPropertyDescriptor(e.prototype,n);return o&&"function"==typeof o.set})).map((function(e){return function propertyNameToAttribute(e){var n=te[e];if(!n){var o=/([A-Z])/g;n=e.replace(o,"-$1").toLowerCase(),te[e]=n}return n}(e)})).filter((function(e){return o.indexOf(e)<0}));return o.concat(i)}function booleanAttributeValue(e,n){return"boolean"==typeof n?n:"string"==typeof n&&(""===n||e.toLowerCase()===n.toLowerCase())}var ne={checked:!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,multiple:!0,noresize:!0,readonly:!0,selected:!0},oe=Symbol("state"),ie=Symbol("raiseChangeEventsInNextRender"),re=Symbol("changedSinceLastRender");function copyStateWithChanges(e,n){for(var o=Object.assign({},e[oe]),i={},r=n;;){var a=fieldsChanged(o,r);if(0===Object.keys(a).length)break;Object.assign(o,r),Object.assign(i,a),r=e[J](o,a)}return{state:o,changed:i}}function fieldsChanged(e,n){var o,i,r={};for(var a in n)o=n[a],i=e[a],(o instanceof Date&&i instanceof Date?o.getTime()===i.getTime():o===i)||(r[a]=!0);return r}var ae=new Map,se=Symbol("shadowIdProxy"),le=Symbol("proxyElement"),ce={get:function get(e,n){var o=e[le][Y];return o&&"string"==typeof n?o.getElementById(n):null}};var ue=function AttributeMarshallingMixin(e){var n=function(e){_inherits$1(AttributeMarshalling,e);var n=_createSuper$4(AttributeMarshalling);function AttributeMarshalling(){return _classCallCheck$1(this,AttributeMarshalling),n.apply(this,arguments)}return _createClass$1(AttributeMarshalling,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(_get(_getPrototypeOf$1(AttributeMarshalling.prototype),"attributeChangedCallback",this)&&_get(_getPrototypeOf$1(AttributeMarshalling.prototype),"attributeChangedCallback",this).call(this,e,n,o),o!==n&&!this[K]){var i=function attributeToPropertyName(e){var n=ee[e];if(!n){var o=/-([a-z])/g;n=e.replace(o,(function(e){return e[1].toUpperCase()})),ee[e]=n}return n}(e);if(i in this){var r=ne[e]?booleanAttributeValue(e,o):o;this[i]=r}}}}],[{key:"observedAttributes",get:function get(){return attributesForClass(this)}}]),AttributeMarshalling}(e);return n}(function ReactiveMixin(e){var n=function(e){_inherits$1(Reactive,e);var n,o=_createSuper$4(Reactive);function Reactive(){var e;return _classCallCheck$1(this,Reactive),(e=o.call(this))[D]=void 0,e[q]=!1,e[re]=null,e[W](e[R]),e}return _createClass$1(Reactive,[{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf$1(Reactive.prototype),"connectedCallback",this)&&_get(_getPrototypeOf$1(Reactive.prototype),"connectedCallback",this).call(this),this[U]()}},{key:R,get:function get(){return _get(_getPrototypeOf$1(Reactive.prototype),R,this)||{}}},{key:H,value:function value(e){_get(_getPrototypeOf$1(Reactive.prototype),H,this)&&_get(_getPrototypeOf$1(Reactive.prototype),H,this).call(this,e)}},{key:U,value:function value(){void 0===this[D]&&(this[D]=!0);var e=this[re];if(this[D]||e){var n=this[q];this[q]=this[ie],this[ie]=!1,this[K]=!0,this[H](e),this[K]=!1,this[re]=null,this[V](e),this[D]=!1,this[q]=n}}},{key:V,value:function value(e){_get(_getPrototypeOf$1(Reactive.prototype),V,this)&&_get(_getPrototypeOf$1(Reactive.prototype),V,this).call(this,e)}},{key:W,value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var n,o,i,r;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(this[K]&&console.warn("".concat(this.constructor.name," called [setState] during rendering, which you should avoid.\nSee https://elix.org/documentation/ReactiveMixin.")),n=copyStateWithChanges(this,e),o=n.state,i=n.changed,!this[oe]||0!==Object.keys(i).length){a.next=4;break}return a.abrupt("return");case 4:if(Object.freeze(o),this[oe]=o,this[q]&&(this[ie]=!0),r=void 0===this[D]||null!==this[re],this[re]=Object.assign(this[re]||{},i),!this.isConnected||r){a.next=14;break}return a.next=13,Promise.resolve();case 13:this[U]();case 14:case"end":return a.stop()}}),_callee,this)}))),function value(e){return n.apply(this,arguments)})},{key:Z,get:function get(){return this[oe]}},{key:J,value:function value(e,n){return _get(_getPrototypeOf$1(Reactive.prototype),J,this)?_get(_getPrototypeOf$1(Reactive.prototype),J,this).call(this,e,n):{}}}]),Reactive}(e);return"true"===new URLSearchParams(location.search).get("elixdebug")&&Object.defineProperty(n.prototype,"state",{get:function get(){return this[Z]}}),n}(function ShadowTemplateMixin(e){var n=function(e){_inherits$1(ShadowTemplate,e);var n=_createSuper$4(ShadowTemplate);function ShadowTemplate(){return _classCallCheck$1(this,ShadowTemplate),n.apply(this,arguments)}return _createClass$1(ShadowTemplate,[{key:G,get:function get(){if(!this[se]){var e=_defineProperty$1({},le,this);this[se]=new Proxy(e,ce)}return this[se]}},{key:H,value:function value(e){if(_get(_getPrototypeOf$1(ShadowTemplate.prototype),H,this)&&_get(_getPrototypeOf$1(ShadowTemplate.prototype),H,this).call(this,e),void 0===this[Y]){var n=function getTemplate(e){var n=e[N]?void 0:ae.get(e.constructor);if(void 0===n){if((n=e[Q])&&!(n instanceof HTMLTemplateElement))throw"Warning: the [template] property for ".concat(e.constructor.name," must return an HTMLTemplateElement.");e[N]||ae.set(e.constructor,n||null)}return n}(this);if(n){var o=this.attachShadow({delegatesFocus:this[M],mode:this[X]}),i=document.importNode(n.content,!0);o.append(i),this[Y]=o}else this[Y]=null}}},{key:X,get:function get(){return"open"}}]),ShadowTemplate}(e);return n}(HTMLElement))),de=Symbol("checkSize"),pe=Symbol("closestAvailableItemIndex"),he=Symbol("contentSlot"),ge=R,fe=Symbol("defaultTabIndex"),ve=M,be=Symbol("effectEndTarget"),ye=D,me=B,_e=Symbol("getItemText"),ke=Symbol("goDown"),xe=Symbol("goEnd"),we=Symbol("goFirst"),Ce=Symbol("goLast"),Se=Symbol("goLeft"),Pe=Symbol("goNext"),$e=Symbol("goPrevious"),Ee=Symbol("goRight"),Le=Symbol("goStart"),Oe=Symbol("goToItemWithPrefix"),Ae=Symbol("goUp"),Te=N,je=G,Ie=Symbol("inputDelegate"),Re=Symbol("itemsDelegate"),Me=Symbol("keydown"),De=Symbol("mouseenter"),Be=Symbol("mouseleave"),Ne=z,Fe=q,Ge=H,ze=U,qe=Symbol("renderDataToElement"),He=V,Ue=K,Ve=Symbol("scrollTarget"),Ke=W,We=Y,Ye=X,Xe=Symbol("startEffect"),Ze=Z,Je=J,Qe=Symbol("swipeDown"),et=Symbol("swipeDownComplete"),tt=Symbol("swipeLeft"),nt=Symbol("swipeLeftTransitionEnd"),ot=Symbol("swipeRight"),it=Symbol("swipeRightTransitionEnd"),rt=Symbol("swipeUp"),at=Symbol("swipeUpComplete"),st=Symbol("swipeStart"),lt=Symbol("swipeTarget"),ct=Symbol("tap"),ut=Q,dt=Symbol("toggleSelectedFlag");function DelegateInputLabelMixin(e){var n=function(e){_inherits$1(DelegateInputLabel,e);var n=_createSuper$4(DelegateInputLabel);function DelegateInputLabel(){return _classCallCheck$1(this,DelegateInputLabel),n.apply(this,arguments)}return _createClass$1(DelegateInputLabel,[{key:"ariaLabel",get:function get(){return this[Ze].ariaLabel},set:function set(e){this[Ze].removingAriaAttribute||this[Ke]({ariaLabel:String(e)})}},{key:"ariaLabelledby",get:function get(){return this[Ze].ariaLabelledby},set:function set(e){this[Ze].removingAriaAttribute||this[Ke]({ariaLabelledby:String(e)})}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(DelegateInputLabel.prototype),ge,this)||{},{ariaLabel:null,ariaLabelledby:null,inputLabel:null,removingAriaAttribute:!1})}},{key:Ge,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(DelegateInputLabel.prototype),Ge,this)&&_get(_getPrototypeOf$1(DelegateInputLabel.prototype),Ge,this).call(this,e),this[ye]&&this.addEventListener("focus",(function(){n[Fe]=!0;var e=refreshInputLabel(n,n[Ze]);n[Ke]({inputLabel:e}),n[Fe]=!1})),e.inputLabel){var o=this[Ze].inputLabel;o?this[Ie].setAttribute("aria-label",o):this[Ie].removeAttribute("aria-label")}}},{key:He,value:function value(e){var n=this;(_get(_getPrototypeOf$1(DelegateInputLabel.prototype),He,this)&&_get(_getPrototypeOf$1(DelegateInputLabel.prototype),He,this).call(this,e),this[ye])&&(window.requestIdleCallback||setTimeout)((function(){var e=refreshInputLabel(n,n[Ze]);n[Ke]({inputLabel:e})}));var o=this[Ze],i=o.ariaLabel,r=o.ariaLabelledby;e.ariaLabel&&!this[Ze].removingAriaAttribute&&this.getAttribute("aria-label")&&(this.setAttribute("delegated-label",i),this[Ke]({removingAriaAttribute:!0}),this.removeAttribute("aria-label")),e.ariaLabelledby&&!this[Ze].removingAriaAttribute&&this.getAttribute("aria-labelledby")&&(this.setAttribute("delegated-labelledby",r),this[Ke]({removingAriaAttribute:!0}),this.removeAttribute("aria-labelledby")),e.removingAriaAttribute&&this[Ze].removingAriaAttribute&&this[Ke]({removingAriaAttribute:!1})}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(DelegateInputLabel.prototype),Je,this)?_get(_getPrototypeOf$1(DelegateInputLabel.prototype),Je,this).call(this,e,n):{};if(n.ariaLabel&&e.ariaLabel||n.selectedText&&e.ariaLabelledby&&this.matches(":focus-within")){var i=refreshInputLabel(this,e);Object.assign(o,{inputLabel:i})}return o}}]),DelegateInputLabel}(e);return n}function getLabelFromElement(e){if("selectedText"in e)return e.selectedText;if("value"in e&&"options"in e){var n=e.value,o=e.options.find((function(e){return e.value===n}));return o?o.innerText:""}return"value"in e?e.value:e.innerText}function refreshInputLabel(e,n){var o=n.ariaLabel,i=n.ariaLabelledby,r=e.isConnected?e.getRootNode():null,a=null;if(i&&r){var s=i.split(" ").map((function(o){var i=r.getElementById(o);return i?i===e&&null!==n.value?n.selectedText:getLabelFromElement(i):""}));a=s.join(" ")}else if(o)a=o;else if(r){var l=e.id;if(l){var c=r.querySelector('[for="'.concat(l,'"]'));c instanceof HTMLElement&&(a=getLabelFromElement(c))}if(null===a){var u=e.closest("label");u&&(a=getLabelFromElement(u))}}return a&&(a=a.trim()),a}"true"===new URLSearchParams(location.search).get("elixdebug")&&(window.elix={internal:{checkSize:de,closestAvailableItemIndex:pe,contentSlot:he,defaultState:ge,defaultTabIndex:fe,delegatesFocus:ve,effectEndTarget:be,firstRender:ye,focusTarget:me,getItemText:_e,goDown:ke,goEnd:xe,goFirst:we,goLast:Ce,goLeft:Se,goNext:Pe,goPrevious:$e,goRight:Ee,goStart:Le,goToItemWithPrefix:Oe,goUp:Ae,hasDynamicTemplate:Te,ids:je,inputDelegate:Ie,itemsDelegate:Re,keydown:Me,mouseenter:De,mouseleave:Be,nativeInternals:Ne,event:event,raiseChangeEvents:Fe,render:Ge,renderChanges:ze,renderDataToElement:qe,rendered:He,rendering:Ue,scrollTarget:Ve,setState:Ke,shadowRoot:We,shadowRootMode:Ye,startEffect:Xe,state:Ze,stateEffects:Je,swipeDown:Qe,swipeDownComplete:et,swipeLeft:tt,swipeLeftTransitionEnd:nt,swipeRight:ot,swipeRightTransitionEnd:it,swipeUp:rt,swipeUpComplete:at,swipeStart:st,swipeTarget:lt,tap:ct,template:ut,toggleSelectedFlag:dt}});var pt,ht,gt=_regeneratorRuntime().mark(composedAncestors),ft=_regeneratorRuntime().mark(selfAndComposedAncestors),vt=_regeneratorRuntime().mark(walkComposedTree),bt=Symbol("mousedownListener");function closestFocusableNode(e){var n,o=_createForOfIteratorHelper(selfAndComposedAncestors(e));try{for(o.s();!(n=o.n()).done;){var i=n.value,r=i[B]||i,a=r;if(r instanceof HTMLElement&&r.tabIndex>=0&&!a.disabled&&!(r instanceof HTMLSlotElement))return r}}catch(e){o.e(e)}finally{o.f()}return null}function composedAncestors(e){var n;return _regeneratorRuntime().wrap((function composedAncestors$(o){for(;;)switch(o.prev=o.next){case 0:n=e;case 1:if(!(n=n instanceof HTMLElement&&n.assignedSlot?n.assignedSlot:n instanceof ShadowRoot?n.host:n.parentNode)){o.next=8;break}return o.next=6,n;case 6:o.next=9;break;case 8:return o.abrupt("break",11);case 9:o.next=1;break;case 11:case"end":return o.stop()}}),gt)}function deepContains(e,n){for(var o=n;o;){var i=o.assignedSlot||o.parentNode||o.host;if(i===e)return!0;o=i}return!1}function firstFocusableElement(e){var n=walkComposedTree(e,(function(e){return e instanceof HTMLElement&&e.matches('a[href],area[href],button:not([disabled]),details,iframe,input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable="true"],[tabindex]')&&e.tabIndex>=0})).next().value;return n instanceof HTMLElement?n:null}function forwardFocus(e,n){e[bt]&&e.removeEventListener("mousedown",e[bt]),n&&(e[bt]=function(e){if(0===e.button){var o=closestFocusableNode(n[B]||n);o&&(o.focus(),e.preventDefault())}},e.addEventListener("mousedown",e[bt]))}function indexOfItemContainingTarget(e,n){return Array.prototype.findIndex.call(e,(function(e){return e===n||deepContains(e,n)}))}function ownEvent(e,n){var o=n.composedPath()[0];return e===o||deepContains(e,o)}function selfAndComposedAncestors(e){return _regeneratorRuntime().wrap((function selfAndComposedAncestors$(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,e;case 3:return n.delegateYield(composedAncestors(e),"t0",4);case 4:case"end":return n.stop()}}),ft)}function setInternalState(e,n,o){if(e.toggleAttribute(n,o),e[z]&&e[z].states){var i=e[z].states,r="--".concat(n);o?i.add(r):i.delete(r)}}function walkComposedTree(e,n){var o,i,r;return _regeneratorRuntime().wrap((function walkComposedTree$(a){for(;;)switch(a.prev=a.next){case 0:if(!n(e)){a.next=3;break}return a.next=3,e;case 3:if(e instanceof HTMLElement&&e.shadowRoot?o=e.shadowRoot.children:(i=e instanceof HTMLSlotElement?e.assignedNodes({flatten:!0}):[],o=i.length>0?i:e.childNodes),!o){a.next=11;break}r=0;case 6:if(!(r<o.length)){a.next=11;break}return a.delegateYield(walkComposedTree(o[r],n),"t0",8);case 8:r++,a.next=6;break;case 11:case"end":return a.stop()}}),vt)}var yt,mt=!1,_t=Symbol("focusVisibleChangedListener");function FocusVisibleMixin(e){return function(e){_inherits$1(FocusVisible,e);var n=_createSuper$4(FocusVisible);function FocusVisible(){var e;return _classCallCheck$1(this,FocusVisible),(e=n.call(this)).addEventListener("focusout",(function(n){Promise.resolve().then((function(){var o=n.relatedTarget||document.activeElement,i=_assertThisInitialized$1(e)===o,r=deepContains(_assertThisInitialized$1(e),o);!i&&!r&&(e[Ke]({focusVisible:!1}),document.removeEventListener("focusvisiblechange",e[_t]),e[_t]=null)}))})),e.addEventListener("focusin",(function(){Promise.resolve().then((function(){e[Ze].focusVisible!==mt&&e[Ke]({focusVisible:mt}),e[_t]||(e[_t]=function(){return function refreshFocus(e){e[Ke]({focusVisible:mt})}(_assertThisInitialized$1(e))},document.addEventListener("focusvisiblechange",e[_t]))}))})),e}return _createClass$1(FocusVisible,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(FocusVisible.prototype),ge,this)||{},{focusVisible:!1})}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(FocusVisible.prototype),Ge,this)&&_get(_getPrototypeOf$1(FocusVisible.prototype),Ge,this).call(this,e),e.focusVisible){var n=this[Ze].focusVisible;this.toggleAttribute("focus-visible",n)}}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(FocusVisible.prototype),ut,this)||I.html(pt||(pt=_taggedTemplateLiteral([""])));return e.content.append(j(ht||(ht=_taggedTemplateLiteral(["\n        <style>\n          :host {\n            outline: none;\n          }\n\n          :host([focus-visible]:focus-within) {\n            outline-color: Highlight; /* Firefox */\n            outline-color: -webkit-focus-ring-color; /* All other browsers */\n            outline-style: auto;\n          }\n        </style>\n      "])))),e}}]),FocusVisible}(e)}function updateKeyboardActive(e){if(mt!==e){mt=e;var n=new CustomEvent("focusvisiblechange",{detail:{focusVisible:mt}});document.dispatchEvent(n)}}function FormElementMixin(e){return function(n){_inherits$1(FormElement,n);var o=_createSuper$4(FormElement);function FormElement(){var e;_classCallCheck$1(this,FormElement);var n=_assertThisInitialized$1(e=o.call(this));return!e[Ne]&&n.attachInternals&&(e[Ne]=n.attachInternals()),e}return _createClass$1(FormElement,[{key:"checkValidity",value:function checkValidity(){return this[Ne].checkValidity()}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(FormElement.prototype),ge,this)||{},{name:"",validationMessage:"",valid:!0})}},{key:"internals",get:function get(){return this[Ne]}},{key:"form",get:function get(){return this[Ne].form}},{key:"name",get:function get(){return this[Ze]?this[Ze].name:""}},{key:"name",set:function set(n){var o=String(n);"name"in e.prototype&&_set(_getPrototypeOf$1(FormElement.prototype),"name",o,this,!0),this[Ke]({name:o})}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(FormElement.prototype),Ge,this)&&_get(_getPrototypeOf$1(FormElement.prototype),Ge,this).call(this,e),e.name){var n=this[Ze].name;n?this.setAttribute("name",n):this.removeAttribute("name")}if(this[Ne]&&this[Ne].setValidity&&(e.valid||e.validationMessage)){var o=this[Ze],i=o.valid,r=o.validationMessage;i?this[Ne].setValidity({}):this[Ne].setValidity({customError:!0},r)}}},{key:He,value:function value(e){_get(_getPrototypeOf$1(FormElement.prototype),He,this)&&_get(_getPrototypeOf$1(FormElement.prototype),He,this).call(this,e),e.value&&this[Ne]&&this[Ne].setFormValue&&this[Ne].setFormValue(this[Ze].value,this[Ze])}},{key:"reportValidity",value:function reportValidity(){return this[Ne].reportValidity()}},{key:"type",get:function get(){return _get(_getPrototypeOf$1(FormElement.prototype),"type",this)||this.localName}},{key:"validationMessage",get:function get(){return this[Ze].validationMessage}},{key:"validity",get:function get(){return this[Ne].validity}},{key:"willValidate",get:function get(){return this[Ne].willValidate}}],[{key:"formAssociated",get:function get(){return!0}}]),FormElement}(e)}function refreshSelectionState(e){var n=e.inner,o=n.selectionEnd,i=n.selectionStart;e[Ke]({selectionEnd:o,selectionStart:i})}function DelegateFocusMixin(e){var n=function(e){_inherits$1(DelegateFocus,e);var n=_createSuper$4(DelegateFocus);function DelegateFocus(){return _classCallCheck$1(this,DelegateFocus),n.apply(this,arguments)}return _createClass$1(DelegateFocus,[{key:ve,get:function get(){return!0}},{key:"focus",value:function focus(e){var n=this[me];n&&n.focus(e)}},{key:me,get:function get(){return firstFocusableElement(this[We])}}]),DelegateFocus}(e);return n}window.addEventListener("keydown",(function(){updateKeyboardActive(!0)}),{capture:!0}),window.addEventListener("mousedown",(function(){updateKeyboardActive(!1)}),{capture:!0});var kt,xt=Symbol("extends"),wt=Symbol("delegatedPropertySetters"),Ct={a:!0,area:!0,button:!0,details:!0,iframe:!0,input:!0,select:!0,textarea:!0},St={address:["scroll"],blockquote:["scroll"],caption:["scroll"],center:["scroll"],dd:["scroll"],dir:["scroll"],div:["scroll"],dl:["scroll"],dt:["scroll"],fieldset:["scroll"],form:["reset","scroll"],frame:["load"],h1:["scroll"],h2:["scroll"],h3:["scroll"],h4:["scroll"],h5:["scroll"],h6:["scroll"],iframe:["load"],img:["abort","error","load"],input:["abort","change","error","select","load"],li:["scroll"],link:["load"],menu:["scroll"],object:["error","scroll"],ol:["scroll"],p:["scroll"],script:["error","load"],select:["change","scroll"],tbody:["scroll"],tfoot:["scroll"],thead:["scroll"],textarea:["change","select","scroll"]},Pt=["click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel"],$t={abort:!0,change:!0,reset:!0},Et=["address","article","aside","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],Lt=["accept-charset","autoplay","buffered","challenge","codebase","colspan","contenteditable","controls","crossorigin","datetime","dirname","for","formaction","http-equiv","icon","ismap","itemprop","keytype","language","loop","manifest","maxlength","minlength","muted","novalidate","preload","radiogroup","readonly","referrerpolicy","rowspan","scoped","usemap"],Ot=DelegateFocusMixin(ue),At=function(e){_inherits$1(WrappedStandardElement,Ot);var n=_createSuper$4(WrappedStandardElement);function WrappedStandardElement(){var e;_classCallCheck$1(this,WrappedStandardElement);var o=_assertThisInitialized$1(e=n.call(this));return!e[Ne]&&o.attachInternals&&(e[Ne]=o.attachInternals()),e}return _createClass$1(WrappedStandardElement,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(Lt.indexOf(e)>=0){var i=Object.assign({},this[Ze].innerAttributes,_defineProperty$1({},e,o));this[Ke]({innerAttributes:i})}else _get(_getPrototypeOf$1(WrappedStandardElement.prototype),"attributeChangedCallback",this).call(this,e,n,o)}},{key:"blur",value:function blur(){this.inner.blur()}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(WrappedStandardElement.prototype),ge,this),{innerAttributes:{}})}},{key:fe,get:function get(){return Ct[this.extends]?0:-1}},{key:"extends",get:function get(){return this.constructor[xt]}},{key:"inner",get:function get(){var e=this[je]&&this[je].inner;return e||console.warn("Attempted to get an inner standard element before it was instantiated."),e}},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(WrappedStandardElement.prototype),Ge,this).call(this,e);var o=this.inner;this[ye]&&((St[this.extends]||[]).forEach((function(e){o.addEventListener(e,(function(){var o=new Event(e,{bubbles:$t[e]||!1});n.dispatchEvent(o)}))})),"disabled"in o&&Pt.forEach((function(e){n.addEventListener(e,(function(e){o.disabled&&e.stopImmediatePropagation()}))})));if(e.tabIndex&&(o.tabIndex=this[Ze].tabIndex),e.innerAttributes){var i=this[Ze].innerAttributes;for(var r in i)applyAttribute(o,r,i[r])}this.constructor[wt].forEach((function(i){if(e[i]){var r=n[Ze][i];("selectionEnd"===i||"selectionStart"===i)&&null===r||(o[i]=r)}}))}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(WrappedStandardElement.prototype),He,this).call(this,e),e.disabled){var n=this[Ze].disabled;void 0!==n&&setInternalState(this,"disabled",n)}}},{key:ut,get:function get(){var e=Et.includes(this.extends)?"block":"inline-block",n=this.extends;return I.html(yt||(yt=_taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: ",'\n        }\n        \n        [part~="inner"] {\n          box-sizing: border-box;\n          height: 100%;\n          width: 100%;\n        }\n      </style>\n      <',' id="inner" part="inner ','">\n        <slot></slot>\n      </',">\n    "])),e,n,n,n)}}],[{key:"observedAttributes",get:function get(){return[].concat(_toConsumableArray(_get(_getPrototypeOf$1(WrappedStandardElement),"observedAttributes",this)),Lt)}},{key:"wrap",value:function wrap(e){var n=function(e){_inherits$1(Wrapped,e);var n=_createSuper$4(Wrapped);function Wrapped(){return _classCallCheck$1(this,Wrapped),n.apply(this,arguments)}return _createClass$1(Wrapped)}(WrappedStandardElement);n[xt]=e;var o=document.createElement(e);return function defineDelegates(e,n){var o=Object.getOwnPropertyNames(n);e[wt]=[],o.forEach((function(o){var i=Object.getOwnPropertyDescriptor(n,o);if(i){var r=function createDelegate(e,n){if("function"==typeof n.value){if("constructor"!==e)return function createMethodDelegate(e,n){var o=function value(){var n;(n=this.inner)[e].apply(n,arguments)};return{configurable:n.configurable,enumerable:n.enumerable,value:o,writable:n.writable}}(e,n)}else if("function"==typeof n.get||"function"==typeof n.set)return function createPropertyDelegate(e,n){var o={configurable:n.configurable,enumerable:n.enumerable};n.get&&(o.get=function(){return function getInnerProperty(e,n){return e[Ze][n]||e[We]&&e.inner[n]}(this,e)});n.set&&(o.set=function(n){!function setInnerProperty(e,n,o){e[Ze][n]!==o&&e[Ke](_defineProperty$1({},n,o))}(this,e,n)});n.writable&&(o.writable=n.writable);return o}(e,n);return null}(o,i);r&&(Object.defineProperty(e.prototype,o,r),r.set&&e[wt].push(o))}}))}(n,Object.getPrototypeOf(o)),n}}]),WrappedStandardElement}();function applyAttribute(e,n,o){ne[n]?"string"==typeof o?e.setAttribute(n,""):null===o&&e.removeAttribute(n):null!=o?e.setAttribute(n,o.toString()):e.removeAttribute(n)}var Tt,jt=DelegateInputLabelMixin(FocusVisibleMixin(FormElementMixin(function TrackTextSelectionMixin(e){var n=function(e){_inherits$1(TrackTextSelection,e);var n=_createSuper$4(TrackTextSelection);function TrackTextSelection(){return _classCallCheck$1(this,TrackTextSelection),n.apply(this,arguments)}return _createClass$1(TrackTextSelection,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(TrackTextSelection.prototype),ge,this)||{},{selectionEnd:0,selectionStart:0})}},{key:Ge,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(TrackTextSelection.prototype),Ge,this)&&_get(_getPrototypeOf$1(TrackTextSelection.prototype),Ge,this).call(this,e),this[ye]){var o=function(){setTimeout((function(){n[Fe]=!0,refreshSelectionState(n),n[Fe]=!1}),10)}.bind(this);this.addEventListener("keydown",o),this.addEventListener("mousedown",o),this.addEventListener("touchend",o)}}},{key:He,value:function value(e){_get(_getPrototypeOf$1(TrackTextSelection.prototype),He,this).call(this,e),e.value&&refreshSelectionState(this)}}]),TrackTextSelection}(e);return n}(At.wrap("input"))))),It=function(e){_inherits$1(Input,jt);var n=_createSuper$4(Input);function Input(){return _classCallCheck$1(this,Input),n.apply(this,arguments)}return _createClass$1(Input,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Input.prototype),ge,this),{value:""})}},{key:Ie,get:function get(){return this.inner}},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(Input.prototype),Ge,this).call(this,e),this[ye]&&this[je].inner.addEventListener("input",(function(){n[Fe]=!0;var e=n[je].inner;n[Ke]({value:e.value}),n[Fe]=!1}))}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(Input.prototype),ut,this);return e.content.append(j(kt||(kt=_taggedTemplateLiteral(['\n      <style>\n        [part~="input"] {\n          font: inherit;\n          outline: none;\n          text-align: inherit;\n        }\n      </style>\n    '])))),e}},{key:"value",get:function get(){return this[Ze].value}},{key:"value",set:function set(e){this[Ke]({value:String(e)})}}]),Input}();function PlainInputMixin(e){return function(e){_inherits$1(PlainInput,e);var n=_createSuper$4(PlainInput);function PlainInput(){return _classCallCheck$1(this,PlainInput),n.apply(this,arguments)}return _createClass$1(PlainInput,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainInput.prototype),ut,this);return e.content.append(j(Tt||(Tt=_taggedTemplateLiteral(['\n        <style>\n          :host {\n            background: white;\n            border: 1px solid gray;\n            box-sizing: border-box;\n          }\n\n          [part~="input"] {\n            background: transparent;\n            border-color: transparent;\n          }\n        </style>\n      '])))),e}}]),PlainInput}(e)}var Rt=function(e){_inherits$1(PlainInput,PlainInputMixin(It));var n=_createSuper$4(PlainInput);function PlainInput(){return _classCallCheck$1(this,PlainInput),n.apply(this,arguments)}return _createClass$1(PlainInput)}(),Mt=function(e){_inherits$1(ElixInput,Rt);var n=_createSuper$4(ElixInput);function ElixInput(){return _classCallCheck$1(this,ElixInput),n.apply(this,arguments)}return _createClass$1(ElixInput)}();customElements.define("elix-input",Mt);var Dt=document.createElement("template");Dt.innerHTML='\n  <style>\n  div {\n    height: 24px;\n    margin: 5px 1px;\n    padding: 3px;\n  }\n  img {\n    top: 2px;\n    left: 4px;\n    position: relative;\n  }\n  span {\n    bottom: 1px;\n    right: -4px;\n    position: relative;\n    margin-right: 4px;\n    color: #fff;\n  }\n  elix-input {\n    background-color: var(--input-color);\n    border-radius: 3px;\n    height: 24px;\n  }\n  </style>\n  <div>\n  <img alt="icon" width="12" height="12" />\n  <span id="label">label</span>\n  <elix-input></elix-input>\n  </div>\n';var Bt=function(e){_inherits$1(SEInput,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SEInput);function SEInput(){var e;return _classCallCheck$1(this,SEInput),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Dt.content.cloneNode(!0)),e.$div=e._shadowRoot.querySelector("div"),e.$img=e._shadowRoot.querySelector("img"),e.$label=e.shadowRoot.getElementById("label"),e.$event=new CustomEvent("change"),e.$input=e._shadowRoot.querySelector("elix-input"),e}return _createClass$1(SEInput,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"title":this.$div.setAttribute("title","".concat(P(o)));break;case"src":this.$img.setAttribute("src",o),this.$label.remove();break;case"size":this.$input.setAttribute("size",o);break;case"label":this.$label.textContent=P(o),this.$img.remove();break;case"value":this.$input.value=o;break;default:console.error("unknown attribute: ".concat(e))}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"label",get:function get(){return this.getAttribute("label")},set:function set(e){this.setAttribute("label",e)}},{key:"value",get:function get(){return this.$input.value},set:function set(e){this.$input.value=e}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}},{key:"size",get:function get(){return this.getAttribute("size")},set:function set(e){this.setAttribute("size",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this;this.$input.addEventListener("change",(function(n){n.preventDefault(),e.value=n.target.value,e.dispatchEvent(e.$event)})),this.$input.addEventListener("keyup",(function(n){n.preventDefault(),e.value=n.target.value,e.dispatchEvent(e.$event)}))}}],[{key:"observedAttributes",get:function get(){return["value","label","src","size","title"]}}]),SEInput}();customElements.define("se-input",Bt);var Nt=document.createElement("div");Nt.attachShadow({mode:"open",delegatesFocus:!0});var Ft,Gt=Nt.shadowRoot.delegatesFocus;var zt=function ComposedFocusMixin(e){var n=function(e){_inherits$1(ComposedFocus,e);var n=_createSuper$4(ComposedFocus);function ComposedFocus(){return _classCallCheck$1(this,ComposedFocus),n.apply(this,arguments)}return _createClass$1(ComposedFocus,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(ComposedFocus.prototype),ge,this)||{},{composeFocus:!Gt})}},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(ComposedFocus.prototype),Ge,this)&&_get(_getPrototypeOf$1(ComposedFocus.prototype),Ge,this).call(this,e),this[ye]&&this.addEventListener("mousedown",(function(e){if(n[Ze].composeFocus&&0===e.button&&e.target instanceof Element){var o=closestFocusableNode(e.target);o&&(o.focus(),e.preventDefault())}}))}}]),ComposedFocus}(e);return n}(DelegateInputLabelMixin(FocusVisibleMixin(At.wrap("button")))),qt=function(e){_inherits$1(Button,zt);var n=_createSuper$4(Button);function Button(){return _classCallCheck$1(this,Button),n.apply(this,arguments)}return _createClass$1(Button,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Button.prototype),ge,this),{role:"button"})}},{key:Ie,get:function get(){return this[je].inner}},{key:ct,value:function value(){var e=new MouseEvent("click",{bubbles:!0,cancelable:!0});this.dispatchEvent(e)}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(Button.prototype),ut,this);return e.content.append(j(Ft||(Ft=_taggedTemplateLiteral(['\n        <style>\n          :host {\n            display: inline-flex;\n            outline: none;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n          }\n\n          [part~="button"] {\n            align-items: center;\n            background: none;\n            border: none;\n            color: inherit;\n            flex: 1;\n            font: inherit;\n            outline: none;\n            padding: 0;\n          }\n        </style>\n      '])))),e}}]),Button}(),Ht=function(e){_inherits$1(SyntheticMouseEvent,_wrapNativeSuper(MouseEvent));var n=_createSuper$4(SyntheticMouseEvent);function SyntheticMouseEvent(){return _classCallCheck$1(this,SyntheticMouseEvent),n.apply(this,arguments)}return _createClass$1(SyntheticMouseEvent)}();function RepeatMousedownMixin(e){return function(e){_inherits$1(RepeatMousedown,e);var n=_createSuper$4(RepeatMousedown);function RepeatMousedown(){return _classCallCheck$1(this,RepeatMousedown),n.apply(this,arguments)}return _createClass$1(RepeatMousedown,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(RepeatMousedown.prototype),ge,this)||{},{repeatDelayDuration:500,repeatInterval:null,repeatIntervalDuration:50,repeatTimeout:null})}},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(RepeatMousedown.prototype),Ge,this)&&_get(_getPrototypeOf$1(RepeatMousedown.prototype),Ge,this).call(this,e),this[ye]&&(this.addEventListener("mousedown",(function(e){e instanceof Ht||0!==e.button||(n[Fe]=!0,repeatStart(n),n[Fe]=!1)})),this.addEventListener("mouseup",(function(e){0===e.button&&(n[Fe]=!0,repeatStop(n),n[Fe]=!1)})),this.addEventListener("mouseleave",(function(e){0===e.button&&(n[Fe]=!0,repeatStop(n),n[Fe]=!1)})),this.addEventListener("touchstart",(function(){n[Fe]=!0,repeatStart(n),n[Fe]=!1})),this.addEventListener("touchend",(function(){n[Fe]=!0,repeatStop(n),n[Fe]=!1})))}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(RepeatMousedown.prototype),Je,this)?_get(_getPrototypeOf$1(RepeatMousedown.prototype),Je,this).call(this,e,n):{};return n.disabled&&e.disabled&&(clearRepeat(this),Object.assign(o,{repeatInterval:null,repeatTimeout:null})),o}}]),RepeatMousedown}(e)}function clearRepeat(e){e[Ze].repeatTimeout&&clearTimeout(e[Ze].repeatTimeout),e[Ze].repeatInterval&&clearInterval(e[Ze].repeatInterval)}function repeatStart(e){var n=e[Ze],o=n.repeatIntervalDuration,i=n.repeatDelayDuration,r=setTimeout((function(){var n=setInterval((function(){!function raiseMousedown(e){var n=new Ht("mousedown",{bubbles:!0,button:0,cancelable:!0,clientX:0,clientY:0});e.dispatchEvent(n)}(e)}),o);e[Ke]({repeatInterval:n})}),i-o);e[Ke]({repeatTimeout:r})}function repeatStop(e){clearRepeat(e),e[Ke]({repeatTimeout:null,repeatInterval:null})}var Ut,Vt=function(e){_inherits$1(RepeatButton,RepeatMousedownMixin(qt));var n=_createSuper$4(RepeatButton);function RepeatButton(){return _classCallCheck$1(this,RepeatButton),n.apply(this,arguments)}return _createClass$1(RepeatButton)}();function PlainButtonMixin(e){return function(e){_inherits$1(PlainButton,e);var n=_createSuper$4(PlainButton);function PlainButton(){return _classCallCheck$1(this,PlainButton),n.apply(this,arguments)}return _createClass$1(PlainButton,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainButton.prototype),ut,this);return e.content.append(j(Ut||(Ut=_taggedTemplateLiteral(['\n        <style>\n          :host([disabled]) ::slotted(*) {\n            opacity: 0.5;\n          }\n\n          [part~="button"] {\n            display: inline-flex;\n            justify-content: center;\n            margin: 0;\n            position: relative;\n          }\n        </style>\n      '])))),e}}]),PlainButton}(e)}var Kt,Wt=function(e){_inherits$1(PlainRepeatButton,PlainButtonMixin(Vt));var n=_createSuper$4(PlainRepeatButton);function PlainRepeatButton(){return _classCallCheck$1(this,PlainRepeatButton),n.apply(this,arguments)}return _createClass$1(PlainRepeatButton)}();function PlainSpinBoxMixin(e){return function(e){_inherits$1(PlainSpinBox,e);var n=_createSuper$4(PlainSpinBox);function PlainSpinBox(){return _classCallCheck$1(this,PlainSpinBox),n.apply(this,arguments)}return _createClass$1(PlainSpinBox,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PlainSpinBox.prototype),ge,this)||{},{buttonPartType:Wt,inputPartType:Rt})}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainSpinBox.prototype),ut,this);return e.content.getElementById("upButton").textContent="▲",e.content.getElementById("downButton").textContent="▼",e.content.append(j(Kt||(Kt=_taggedTemplateLiteral(['\n        <style>\n          :host {\n            background: white;\n            border: 1px solid gray;\n            box-sizing: border-box;\n          }\n\n          [part~="input"] {\n            background: transparent;\n            border: none;\n            width: 4em;\n          }\n\n          [part~="spin-button"] {\n            background: transparent;\n            border: 1px solid gray;\n            box-sizing: border-box;\n            font-size: 0.6em;\n            padding: 2px;\n          }\n\n          [part~="up-button"] {\n            border-right: none;\n            border-top: none;\n          }\n\n          [part~="down-button"] {\n            border-bottom: none;\n            border-right: none;\n            border-top: none;\n          }\n        </style>\n      '])))),e}}]),PlainSpinBox}(e)}var Yt,Xt=new Map;function createElement(e){if("function"==typeof e){var n;try{n=new e}catch(o){if("TypeError"!==o.name)throw o;!function registerCustomElement(e){var n,o=/^[A-Za-z][A-Za-z0-9_$]*$/,i=e.name&&e.name.match(o);if(i){var r=/([A-Z])/g;n=i[0].replace(r,(function(e,n,o){return o>0?"-".concat(n):n})).toLowerCase()}else n="custom-element";for(var a,s=Xt.get(n)||0;a="".concat(n,"-").concat(s),customElements.get(a);s++);customElements.define(a,e),Xt.set(n,s+1)}(e),n=new e}return n}return document.createElement(e)}function replace(e,n){var o=e.parentNode;if(!o)throw"An element must have a parent before it can be substituted.";return(e instanceof HTMLElement||e instanceof SVGElement)&&(n instanceof HTMLElement||n instanceof SVGElement)&&(Array.prototype.forEach.call(e.attributes,(function(e){n.getAttribute(e.name)||"class"===e.name||"style"===e.name||n.setAttribute(e.name,e.value)})),Array.prototype.forEach.call(e.classList,(function(e){n.classList.add(e)})),Array.prototype.forEach.call(e.style,(function(o){n.style[o]||(n.style[o]=e.style[o])}))),n.append.apply(n,_toConsumableArray(e.childNodes)),o.replaceChild(n,e),n}function transmute(e,n){if("function"==typeof n&&e.constructor===n||"string"==typeof n&&e instanceof Element&&e.localName===n)return e;var o=createElement(n);return replace(e,o),o}function DisabledMixin(e){var n=function(e){_inherits$1(Disabled,e);var n=_createSuper$4(Disabled);function Disabled(){return _classCallCheck$1(this,Disabled),n.apply(this,arguments)}return _createClass$1(Disabled,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Disabled.prototype),ge,this)||{},{disabled:!1})}},{key:"disabled",get:function get(){return this[Ze].disabled}},{key:"disabled",set:function set(e){this[Ke]({disabled:e})}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(Disabled.prototype),He,this)&&_get(_getPrototypeOf$1(Disabled.prototype),He,this).call(this,e),e.disabled&&(this.toggleAttribute("disabled",this.disabled),this[Fe])){var n=new CustomEvent("disabledchange",{bubbles:!0});this.dispatchEvent(n)}}}]),Disabled}(e);return n}function KeyboardDirectionMixin(e){var n=function(e){_inherits$1(KeyboardDirection,e);var n=_createSuper$4(KeyboardDirection);function KeyboardDirection(){return _classCallCheck$1(this,KeyboardDirection),n.apply(this,arguments)}return _createClass$1(KeyboardDirection,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(KeyboardDirection.prototype),ge,this),{handleBubblingDirectionKeys:!1})}},{key:ke,value:function value(){if(_get(_getPrototypeOf$1(KeyboardDirection.prototype),ke,this))return _get(_getPrototypeOf$1(KeyboardDirection.prototype),ke,this).call(this)}},{key:xe,value:function value(){if(_get(_getPrototypeOf$1(KeyboardDirection.prototype),xe,this))return _get(_getPrototypeOf$1(KeyboardDirection.prototype),xe,this).call(this)}},{key:Se,value:function value(){if(_get(_getPrototypeOf$1(KeyboardDirection.prototype),Se,this))return _get(_getPrototypeOf$1(KeyboardDirection.prototype),Se,this).call(this)}},{key:Ee,value:function value(){if(_get(_getPrototypeOf$1(KeyboardDirection.prototype),Ee,this))return _get(_getPrototypeOf$1(KeyboardDirection.prototype),Ee,this).call(this)}},{key:Le,value:function value(){if(_get(_getPrototypeOf$1(KeyboardDirection.prototype),Le,this))return _get(_getPrototypeOf$1(KeyboardDirection.prototype),Le,this).call(this)}},{key:Ae,value:function value(){if(_get(_getPrototypeOf$1(KeyboardDirection.prototype),Ae,this))return _get(_getPrototypeOf$1(KeyboardDirection.prototype),Ae,this).call(this)}},{key:Me,value:function value(e){var n=!1;if(this[Ze].handleBubblingDirectionKeys||e.target===this){var o=this[Ze].orientation||"both",i="horizontal"===o||"both"===o,r="vertical"===o||"both"===o;switch(e.key){case"ArrowDown":r&&(n=e.altKey?this[xe]():this[ke]());break;case"ArrowLeft":!i||e.metaKey||e.altKey||(n=this[Se]());break;case"ArrowRight":!i||e.metaKey||e.altKey||(n=this[Ee]());break;case"ArrowUp":r&&(n=e.altKey?this[Le]():this[Ae]());break;case"End":n=this[xe]();break;case"Home":n=this[Le]()}}return n||_get(_getPrototypeOf$1(KeyboardDirection.prototype),Me,this)&&_get(_getPrototypeOf$1(KeyboardDirection.prototype),Me,this).call(this,e)||!1}}]),KeyboardDirection}(e);return n}function KeyboardMixin(e){var n=function(e){_inherits$1(Keyboard,e);var n=_createSuper$4(Keyboard);function Keyboard(){var e;return _classCallCheck$1(this,Keyboard),(e=n.call(this)).addEventListener("keydown",function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(n){return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return e[Fe]=!0,e[Ze].focusVisible||e[Ke]({focusVisible:!0}),e[Me](n)&&(n.preventDefault(),n.stopImmediatePropagation()),o.next=6,Promise.resolve();case 6:e[Fe]=!1;case 7:case"end":return o.stop()}}),_callee)})));return function(e){return n.apply(this,arguments)}}()),e}return _createClass$1(Keyboard,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){var i;"tabindex"===e?(null===o?i=-1:(i=Number(o),isNaN(i)&&(i=this[fe]?this[fe]:0)),this.tabIndex=i):_get(_getPrototypeOf$1(Keyboard.prototype),"attributeChangedCallback",this).call(this,e,n,o)}},{key:ge,get:function get(){var e=this[ve]?-1:0;return Object.assign(_get(_getPrototypeOf$1(Keyboard.prototype),ge,this)||{},{tabIndex:e})}},{key:Me,value:function value(e){return!!_get(_getPrototypeOf$1(Keyboard.prototype),Me,this)&&_get(_getPrototypeOf$1(Keyboard.prototype),Me,this).call(this,e)}},{key:Ge,value:function value(e){_get(_getPrototypeOf$1(Keyboard.prototype),Ge,this)&&_get(_getPrototypeOf$1(Keyboard.prototype),Ge,this).call(this,e),e.tabIndex&&(this.tabIndex=this[Ze].tabIndex)}},{key:"tabIndex",get:function get(){return _get(_getPrototypeOf$1(Keyboard.prototype),"tabIndex",this)}},{key:"tabIndex",set:function set(e){_get(_getPrototypeOf$1(Keyboard.prototype),"tabIndex",this)!==e&&_set(_getPrototypeOf$1(Keyboard.prototype),"tabIndex",e,this,!0),this[Ue]||this[Ke]({tabIndex:e})}}]),Keyboard}(e);return n}var Zt=DelegateFocusMixin(DelegateInputLabelMixin(function DelegateInputSelectionMixin(e){var n=function(e){_inherits$1(DelegateInputSelection,e);var n=_createSuper$4(DelegateInputSelection);function DelegateInputSelection(){return _classCallCheck$1(this,DelegateInputSelection),n.apply(this,arguments)}return _createClass$1(DelegateInputSelection,[{key:"select",value:function select(){this[Ie].select()}},{key:"selectionEnd",get:function get(){return this[Ie].selectionEnd},set:function set(e){this[Ie].selectionEnd=e}},{key:"selectionStart",get:function get(){return this[Ie].selectionStart},set:function set(e){this[Ie].selectionStart=e}},{key:"setRangeText",value:function setRangeText(){var e;(e=this[Ie]).setRangeText.apply(e,arguments)}},{key:"setSelectionRange",value:function setSelectionRange(){var e;(e=this[Ie]).setSelectionRange.apply(e,arguments);var n=document.createElement("input");n.select}}]),DelegateInputSelection}(e);return n}(DisabledMixin(FocusVisibleMixin(FormElementMixin(KeyboardDirectionMixin(KeyboardMixin(ue)))))))),Jt=function(e){_inherits$1(SpinBox,Zt);var n=_createSuper$4(SpinBox);function SpinBox(){return _classCallCheck$1(this,SpinBox),n.apply(this,arguments)}return _createClass$1(SpinBox,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(SpinBox.prototype),ge,this),{buttonPartType:"button",canGoDown:!0,canGoUp:!0,inputPartType:"input",orientation:"vertical",step:1,stepSelect:!1,value:""})}},{key:ke,value:function value(){return _get(_getPrototypeOf$1(SpinBox.prototype),ke,this)&&_get(_getPrototypeOf$1(SpinBox.prototype),ke,this).call(this),this.stepDown(),!0}},{key:Ae,value:function value(){return _get(_getPrototypeOf$1(SpinBox.prototype),Ae,this)&&_get(_getPrototypeOf$1(SpinBox.prototype),Ae,this).call(this),this.stepUp(),!0}},{key:Ie,get:function get(){return this[je].input}},{key:Ge,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(SpinBox.prototype),Ge,this).call(this,e),function renderParts$4(e,n,o){if(!o||o.inputPartType){var i=n.buttonPartType;e.querySelectorAll('[part~="spin-button"]').forEach((function(e){transmute(e,i)}))}if(!o||o.inputPartType){var r=n.inputPartType,a=e.getElementById("input");a&&transmute(a,r)}}(this[We],this[Ze],e),e.buttonPartType&&(this[je].downButton.addEventListener("mousedown",(function(){n[Fe]=!0,n.stepDown(),n[Fe]=!1})),this[je].upButton.addEventListener("mousedown",(function(){n[Fe]=!0,n.stepUp(),n[Fe]=!1}))),e.inputPartType&&this[je].input.addEventListener("input",(function(){n[Fe]=!0,n.value=n[je].input.value,n[Fe]=!1})),e.buttonPartType||e.inputPartType){var o=this[je].input,i=this[je].downButton;i instanceof HTMLElement&&o instanceof HTMLElement&&forwardFocus(i,o);var r=this[je].upButton;r instanceof HTMLElement&&o instanceof HTMLElement&&forwardFocus(r,o)}var a=this[Ze],s=a.disabled,value=a.value;if(e.canGoUp||e.canGoDown||e.disabled){var l=this[Ze],c=l.canGoUp,u=l.canGoDown;if("disabled"in this[je].input&&(this[je].input.disabled=s),"disabled"in this[je].downButton){var d=s||!c;this[je].upButton.disabled=d}if("disabled"in this[je].upButton){var p=s||!u;this[je].downButton.disabled=p}}e.value&&(this[je].input.value=value)}},{key:He,value:function value(e){_get(_getPrototypeOf$1(SpinBox.prototype),He,this).call(this,e);var n=this[Ze],o=n.stepSelect,value=n.value;if(e.value&&o){var i=this[je].input,r=value.length;i.selectionStart=r,i.selectionEnd=r,this[Ke]({stepSelect:!1})}if(e.value&&this[Fe]){var a=new CustomEvent("change",{bubbles:!0,detail:{value:value}});this.dispatchEvent(a)}}},{key:"stepDown",value:function stepDown(){this[Ke]({stepSelect:!0})}},{key:"stepUp",value:function stepUp(){this[Ke]({stepSelect:!0})}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(SpinBox.prototype),ut,this);return e.content.append(j(Yt||(Yt=_taggedTemplateLiteral(['\n      <style>\n        :host {\n          display: inline-grid;\n        }\n\n        [part~="input"] {\n          grid-row-end: 3;\n          grid-row-start: 1;\n          outline: none;\n          text-align: right;\n        }\n\n        [part~="spin-button"] {\n          grid-column: 2;\n          user-select: none;\n        }\n      </style>\n      <div id="input" part="input"></div>\n      <div id="upButton" part="spin-button up-button" tabindex="-1"></div>\n      <div id="downButton" part="spin-button down-button" tabindex="-1"></div>\n    '])))),e}},{key:"value",get:function get(){return this[Ze].value}},{key:"value",set:function set(e){this[Ke]({value:String(e)})}}]),SpinBox}();var Qt=function(e){_inherits$1(NumberSpinBox,Jt);var n=_createSuper$4(NumberSpinBox);function NumberSpinBox(){return _classCallCheck$1(this,NumberSpinBox),n.apply(this,arguments)}return _createClass$1(NumberSpinBox,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){"max"===e?this.max=parseFloat(o):"min"===e?this.min=parseFloat(o):"step"===e?this.step=parseFloat(o):_get(_getPrototypeOf$1(NumberSpinBox.prototype),"attributeChangedCallback",this).call(this,e,n,o)}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(NumberSpinBox.prototype),ge,this),{max:null,min:null,step:1})}},{key:"formatValue",value:function formatValue(e,n){return Number(e).toFixed(n)}},{key:"max",get:function get(){return this[Ze].max}},{key:"max",set:function set(e){this[Ke]({max:e})}},{key:"min",get:function get(){return this[Ze].min}},{key:"min",set:function set(e){this[Ke]({min:e})}},{key:"parseValue",value:function parseValue(e,n){var o=0===n?parseInt(e):parseFloat(e);return isNaN(o)?0:o}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(NumberSpinBox.prototype),Je,this);if(n.step){var i=e.step,r=/\.(\d)+$/.exec(String(i)),a=r&&r[1]?r[1].length:0;Object.assign(o,{precision:a})}if(n.max||n.min||n.value){var s=e.max,l=e.min,c=e.precision,value=e.value,u=parseInt(value,c);""!==value&&isNaN(u)?Object.assign(o,{valid:!1,validationMessage:"Value must be a number"}):null===s||u<=s?null===l||u>=l?Object.assign(o,{valid:!0,validationMessage:""}):Object.assign(o,{valid:!1,validationMessage:"Value must be greater than or equal to ".concat(l,".")}):Object.assign(o,{valid:!1,validationMessage:"Value must be less than or equal to ".concat(s,".")}),Object.assign(o,{canGoUp:isNaN(u)||null===e.max||u<=e.max}),Object.assign(o,{canGoDown:isNaN(u)||null===e.min||u>=e.min})}return o}},{key:"step",get:function get(){return this[Ze].step}},{key:"step",set:function set(e){isNaN(e)||this[Ke]({step:e})}},{key:"stepDown",value:function stepDown(){_get(_getPrototypeOf$1(NumberSpinBox.prototype),"stepDown",this).call(this);var e=this[Ze],n=e.max,o=e.precision,i=e.value,r=this.parseValue(i,o)-this.step;null!==n&&(r=Math.min(r,n));var a=this[Ze].min;(null===a||r>=a)&&(this.value=this.formatValue(r,o))}},{key:"stepUp",value:function stepUp(){_get(_getPrototypeOf$1(NumberSpinBox.prototype),"stepUp",this).call(this);var e=this[Ze],n=e.min,o=e.precision,i=e.value,r=this.parseValue(i,o)+this.step;null!==n&&(r=Math.max(r,n));var a=this[Ze].max;(null===a||r<=a)&&(this.value=this.formatValue(r,o))}}]),NumberSpinBox}(),en=function(e){_inherits$1(PlainNumberSpinBox,PlainSpinBoxMixin(Qt));var n=_createSuper$4(PlainNumberSpinBox);function PlainNumberSpinBox(){return _classCallCheck$1(this,PlainNumberSpinBox),n.apply(this,arguments)}return _createClass$1(PlainNumberSpinBox)}(),tn=function(e){_inherits$1(ElixNumberSpinBox,en);var n=_createSuper$4(ElixNumberSpinBox);function ElixNumberSpinBox(){return _classCallCheck$1(this,ElixNumberSpinBox),n.apply(this,arguments)}return _createClass$1(ElixNumberSpinBox)}();customElements.define("elix-number-spin-box",tn);var nn=document.createElement("template");nn.innerHTML='\n  <style>\n  div {\n    height: 24px;\n    margin: 5px 1px;\n    padding: 3px;\n  }\n  div.imginside {\n    width: var(--global-se-spin-input-width);\n  }\n  img {\n    position: relative;\n    right: -4px;\n    top: 2px;\n  }\n  span {\n    bottom: -0.5em;\n    right: -4px;\n    position: relative;\n    margin-left: -4px;\n    margin-right: 1px;\n    color: #fff;\n  }\n  elix-number-spin-box {\n    background-color: var(--input-color);\n    border-radius: 3px;\n    height: 20px;\n    margin-top: 1px;\n    vertical-align: top;\n  }\n  elix-number-spin-box::part(spin-button) {\n    padding: 0px;\n  }\n  elix-number-spin-box::part(input) {\n    width: 3em;\n  }\n  elix-number-spin-box{\n    width: 54px;\n    height: 24px;\n  }\n  </style>\n  <div>\n  <img alt="icon" width="24" height="24" aria-labelledby="label" />\n  <span id="label">label</span>\n  <elix-number-spin-box min="1" step="1"></elix-number-spin-box>\n  </div>\n';var rn=function(e){_inherits$1(SESpinInput,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SESpinInput);function SESpinInput(){var e;return _classCallCheck$1(this,SESpinInput),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(nn.content.cloneNode(!0)),e.$div=e._shadowRoot.querySelector("div"),e.$img=e._shadowRoot.querySelector("img"),e.$label=e.shadowRoot.getElementById("label"),e.$event=new CustomEvent("change"),e.$input=e._shadowRoot.querySelector("elix-number-spin-box"),e.imgPath=svgEditor.configObj.curConfig.imgPath,e}return _createClass$1(SESpinInput,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"title":var i=this.getAttribute("shortcut");this.$div.setAttribute("title","".concat(P(o)," ").concat(i?"[".concat(P(i),"]"):""));break;case"src":this.$img.setAttribute("src",this.imgPath+"/"+o),this.$label.remove(),this.$div.classList.add("imginside");break;case"size":this.$input.shadowRoot.getElementById("input").size=o,this.$input.shadowRoot.getElementById("input").style.width="unset";break;case"step":this.$input.setAttribute("step",o);break;case"min":this.$input.setAttribute("min",o);break;case"max":this.$input.setAttribute("max",o);break;case"label":this.$label.textContent=P(o),this.$img.remove();break;case"value":this.$input.value=o;break;default:console.error("unknown attribute: ".concat(e))}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"label",get:function get(){return this.getAttribute("label")},set:function set(e){this.setAttribute("label",e)}},{key:"value",get:function get(){return this.$input.value},set:function set(e){this.$input.value=e}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}},{key:"size",get:function get(){return this.getAttribute("size")},set:function set(e){this.setAttribute("size",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this.$input.shadowRoot;Array.from(n.childNodes).forEach((function(n){"input"===(null==n?void 0:n.id)&&n.addEventListener("keyup",(function(n){n.preventDefault(),isNaN(n.target.value)||(e.value=n.target.value,e.dispatchEvent(e.$event))}))})),this.$input.addEventListener("change",(function(n){n.preventDefault(),e.value=n.target.value,e.dispatchEvent(e.$event)})),svgEditor.$click(this.$input,(function(n){n.preventDefault(),e.value=n.target.value,e.dispatchEvent(e.$event)}))}}],[{key:"observedAttributes",get:function get(){return["value","label","src","size","min","max","step","title"]}}]),SESpinInput}();customElements.define("se-spin-input",rn);var an=["none","#000000","#3f3f3f","#7f7f7f","#bfbfbf","#ffffff","#ff0000","#ff7f00","#ffff00","#7fff00","#00ff00","#00ff7f","#00ffff","#007fff","#0000ff","#7f00ff","#ff00ff","#ff007f","#7f0000","#7f3f00","#7f7f00","#3f7f00","#007f00","#007f3f","#007f7f","#003f7f","#00007f","#3f007f","#7f007f","#7f003f","#ffaaaa","#ffd4aa","#ffffaa","#d4ffaa","#aaffaa","#aaffd4","#aaffff","#aad4ff","#aaaaff","#d4aaff","#ffaaff","#ffaad4"],sn=document.createElement("template");sn.innerHTML='\n  <style>\n  .square {\n    height: 15px;\n    width: 15px;\n    float: left;\n  }\n  #palette_holder {\n    overflow: hidden;\n    padding: 4px;\n    background: #f0f0f0;\n    border-radius: 3px;\n    z-index: 2;\n  }\n  \n  #js-se-palette {\n    float: left;\n    width: 632px;\n    height: 16px;\n  }\n  \n  div.palette_item {\n    height: 15px;\n    width: 15px;\n    float: left;\n  }\n  \n  div.palette_item:first-child {\n    background: white;\n  }\n  \n  </style>\n  <div id="palette_holder" title="">\n    <div id="js-se-palette">\n    </div>\n  </div>\n';var ln=function(e){_inherits$1(SEPalette,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SEPalette);function SEPalette(){var e;return _classCallCheck$1(this,SEPalette),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(sn.content.cloneNode(!0)),e.$strip=e._shadowRoot.querySelector("#js-se-palette"),an.forEach((function(n){var o=document.createElement("div");if(o.classList.add("square"),"none"===n){var i=document.createElement("img");i.src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgY2xhc3M9InN2Z19pY29uIj48c3ZnIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNkNDAwMDAiIGlkPSJzdmdfOTAiIHkyPSIyNCIgeDI9IjI0IiB5MT0iMCIgeDE9IjAiLz4KICAgIDxsaW5lIGlkPSJzdmdfOTIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2Q0MDAwMCIgeTI9IjI0IiB4Mj0iMCIgeTE9IjAiIHgxPSIyNCIvPgogIDwvc3ZnPjwvc3ZnPg==",i.style.width="15px",i.style.height="15px",o.append(i)}else o.style.backgroundColor=n;o.dataset.rgb=n,svgEditor.$click(o,(function(n){n.preventDefault();var i=n.shiftKey||2===n.button?"stroke":"fill",r=o.dataset.rgb;"none"!==r&&"transparent"!==r&&"initial"!==r||(r="none");var a=new CustomEvent("change",{detail:{picker:i,color:r},bubbles:!1});e.dispatchEvent(a)})),e.$strip.append(o)})),e}return _createClass$1(SEPalette,[{key:"init",value:function init(e){this.setAttribute("ui-palette_info",e.t("ui.palette_info"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){"ui-palette_info"===e&&this._shadowRoot.querySelector("#palette_holder").setAttribute("title",o)}},{key:"connectedCallback",value:function connectedCallback(){}}],[{key:"observedAttributes",get:function get(){return["ui-palette_info"]}}]),SEPalette}();function CurrentMixin(e){return function(e){_inherits$1(Current,e);var n=_createSuper$4(Current);function Current(){var e;_classCallCheck$1(this,Current);var o=_assertThisInitialized$1(e=n.call(this));return!e[Ne]&&o.attachInternals&&(e[Ne]=o.attachInternals()),e}return _createClass$1(Current,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if("current"===e){var i=booleanAttributeValue(e,o);this.current!==i&&(this.current=i)}else _get(_getPrototypeOf$1(Current.prototype),"attributeChangedCallback",this).call(this,e,n,o)}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Current.prototype),ge,this)||{},{current:!1})}},{key:Ge,value:function value(e){(_get(_getPrototypeOf$1(Current.prototype),Ge,this).call(this,e),e.current)&&setInternalState(this,"current",this[Ze].current)}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(Current.prototype),He,this)&&_get(_getPrototypeOf$1(Current.prototype),He,this).call(this,e),e.current){var n=this[Ze].current,o=new CustomEvent("currentchange",{bubbles:!0,detail:{current:n}});this.dispatchEvent(o)}}},{key:"current",get:function get(){return this[Ze].current}},{key:"current",set:function set(e){this[Ke]({current:e})}}]),Current}(e)}function SelectableMixin(e){return function(e){_inherits$1(Selectable,e);var n=_createSuper$4(Selectable);function Selectable(){var e;_classCallCheck$1(this,Selectable);var o=_assertThisInitialized$1(e=n.call(this));return!e[Ne]&&o.attachInternals&&(e[Ne]=o.attachInternals()),e}return _createClass$1(Selectable,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Selectable.prototype),ge,this)||{},{selected:!1})}},{key:Ge,value:function value(e){(_get(_getPrototypeOf$1(Selectable.prototype),Ge,this).call(this,e),e.selected)&&setInternalState(this,"selected",this[Ze].selected)}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(Selectable.prototype),He,this)&&_get(_getPrototypeOf$1(Selectable.prototype),He,this).call(this,e),e.selected){var n=this[Ze].selected,o=new CustomEvent("selectedchange",{bubbles:!0,detail:{selected:n}});this.dispatchEvent(o)}}},{key:"selected",get:function get(){return this[Ze].selected}},{key:"selected",set:function set(e){this[Ke]({selected:e})}}]),Selectable}(e)}customElements.define("se-palette",ln);var cn,un=function(e){_inherits$1(MenuItem,CurrentMixin(DisabledMixin(SelectableMixin(ue))));var n=_createSuper$4(MenuItem);function MenuItem(){return _classCallCheck$1(this,MenuItem),n.apply(this,arguments)}return _createClass$1(MenuItem)}(),dn=function(e){_inherits$1(PlainMenuItem,un);var n=_createSuper$4(PlainMenuItem);function PlainMenuItem(){return _classCallCheck$1(this,PlainMenuItem),n.apply(this,arguments)}return _createClass$1(PlainMenuItem,[{key:ut,get:function get(){return I.html(cn||(cn=_taggedTemplateLiteral(['\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif;\n          font-size: 10pt;\n          white-space: nowrap;\n        }\n\n        :host([disabled]) {\n          opacity: 0.5;\n        }\n\n        #checkmark {\n          height: 1em;\n          visibility: hidden;\n          width: 1em;\n        }\n\n        :host([selected]) #checkmark {\n          visibility: visible;\n        }\n      </style>\n      <svg id="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="4 6 18 12">\n        <path d="M0 0h24v24H0V0z" fill="none"/>\n        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>\n      </svg>\n      <slot></slot>\n    '])))}}]),PlainMenuItem}(),pn=function(e){_inherits$1(ElixMenuItem,dn);var n=_createSuper$4(ElixMenuItem);function ElixMenuItem(){return _classCallCheck$1(this,ElixMenuItem),n.apply(this,arguments)}return _createClass$1(ElixMenuItem)}();customElements.define("elix-menu-item",pn);var hn={a:"link",article:"region",button:"button",h1:"sectionhead",h2:"sectionhead",h3:"sectionhead",h4:"sectionhead",h5:"sectionhead",h6:"sectionhead",hr:"sectionhead",iframe:"region",link:"link",menu:"menu",ol:"list",option:"option",output:"liveregion",progress:"progressbar",select:"select",table:"table",td:"td",textarea:"textbox",th:"th",ul:"list"};function defaultScrollTarget(e){var n=e[We],o=n&&n.querySelector("slot:not([name])");return o&&o.parentNode instanceof Element&&function getScrollableElement(e){var n,o=_createForOfIteratorHelper(selfAndComposedAncestors(e));try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i instanceof HTMLElement&&isElementScrollable(i))return i}}catch(e){o.e(e)}finally{o.f()}return null}(o.parentNode)||e}function isElementScrollable(e){var n=getComputedStyle(e),o=n.overflowX,i=n.overflowY;return"scroll"===o||"auto"===o||"scroll"===i||"auto"===i}function moveToIndex(e,n,o){var i=e[pe](e[Ze],{direction:o,index:n});if(i<0)return!1;var r=e[Ze].currentIndex!==i;return r&&e[Ke]({currentIndex:i}),r}var gn=["applet","basefont","embed","font","frame","frameset","isindex","keygen","link","multicol","nextid","noscript","object","param","script","style","template","noembed"];function getIndexOfItemAtY(e,n,o){var i,r,a=e[Ze].items,s=o?0:a.length-1,l=o?a.length:0,c=o?1:-1,u=null,d=e[Ze].availableItemFlags;for(i=s;i!==l;i+=c){if((!d||d[i])&&(r=a[i].getBoundingClientRect()).top<=n&&n<=r.bottom){u=a[i];break}}if(!u||!r)return null;var p=getComputedStyle(u),h=p.paddingTop?parseFloat(p.paddingTop):0,g=p.paddingBottom?parseFloat(p.paddingBottom):0,f=r.top+h,v=f+u.clientHeight-h-g;return o&&f<=n||!o&&v>=n?i:i-c}function scrollOnePage(e,n){var o,i=e[Ze].items,r=e[Ze].currentIndex,a=e[Ve].getBoundingClientRect(),s=getIndexOfItemAtY(e,n?a.bottom:a.top,n);if(s&&r===s){var l=i[r].getBoundingClientRect(),c=e[Ve].clientHeight;o=getIndexOfItemAtY(e,n?l.bottom+c:l.top-c,n)}else o=s;if(!o){var u=n?i.length-1:0;o=e[pe]?e[pe](e[Ze],{direction:n?-1:1,index:u}):u}var d=o!==r;if(d){var p=e[Fe];e[Fe]=!0,e[Ke]({currentIndex:o}),e[Fe]=p}return d}var vn,bn=Symbol("typedPrefix"),yn=Symbol("prefixTimeout");function resetPrefixTimeout(e){var n=e;n[yn]&&(clearTimeout(n[yn]),n[yn]=!1)}function resetTypedPrefix(e){e[bn]="",resetPrefixTimeout(e)}function setPrefixTimeout(e){resetPrefixTimeout(e),e[yn]=setTimeout((function(){resetTypedPrefix(e)}),1e3)}function LanguageDirectionMixin(e){return function(e){_inherits$1(LanguageDirection,e);var n=_createSuper$4(LanguageDirection);function LanguageDirection(){return _classCallCheck$1(this,LanguageDirection),n.apply(this,arguments)}return _createClass$1(LanguageDirection,[{key:"connectedCallback",value:function connectedCallback(){var e="rtl"===getComputedStyle(this).direction;this[Ke]({rightToLeft:e}),_get(_getPrototypeOf$1(LanguageDirection.prototype),"connectedCallback",this).call(this)}}]),LanguageDirection}(e)}function ContentItemsMixin(e){return function(e){_inherits$1(ContentItems,e);var n=_createSuper$4(ContentItems);function ContentItems(){return _classCallCheck$1(this,ContentItems),n.apply(this,arguments)}return _createClass$1(ContentItems,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(ContentItems.prototype),ge,this)||{},{items:null})}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(ContentItems.prototype),Je,this)?_get(_getPrototypeOf$1(ContentItems.prototype),Je,this).call(this,e,n):{};if(n.content){var i=e.content,r=i?Array.prototype.filter.call(i,(function(e){return function isSubstantiveElement(e){return e instanceof Element&&(!e.localName||gn.indexOf(e.localName)<0)}(e)})):null;r&&Object.freeze(r),Object.assign(o,{items:r})}return o}}]),ContentItems}(e)}function SlotContentMixin(e){var n=function(e){_inherits$1(SlotContent,e);var n=_createSuper$4(SlotContent);function SlotContent(){return _classCallCheck$1(this,SlotContent),n.apply(this,arguments)}return _createClass$1(SlotContent,[{key:he,get:function get(){var e=this[We]&&this[We].querySelector("slot:not([name])");return this[We]&&e||console.warn("SlotContentMixin expects ".concat(this.constructor.name," to define a shadow tree that includes a default (unnamed) slot.\nSee https://elix.org/documentation/SlotContentMixin.")),e}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(SlotContent.prototype),ge,this)||{},{content:null})}},{key:He,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(SlotContent.prototype),He,this)&&_get(_getPrototypeOf$1(SlotContent.prototype),He,this).call(this,e),this[ye]){var o=this[he];o&&o.addEventListener("slotchange",_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var e;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return n[Fe]=!0,e=o.assignedNodes({flatten:!0}),Object.freeze(e),n[Ke]({content:e}),i.next=6,Promise.resolve();case 6:n[Fe]=!1;case 7:case"end":return i.stop()}}),_callee)}))))}}}]),SlotContent}(e);return n}var mn=function AriaMenuMixin(e){var n=function(e){_inherits$1(AriaMenu,e);var n=_createSuper$4(AriaMenu);function AriaMenu(){return _classCallCheck$1(this,AriaMenu),n.apply(this,arguments)}return _createClass$1(AriaMenu,[{key:ge,get:function get(){var e=_get(_getPrototypeOf$1(AriaMenu.prototype),ge,this);return Object.assign(e,{itemRole:e.itemRole||"menuitem",role:e.role||"menu"})}},{key:"itemRole",get:function get(){return this[Ze].itemRole}},{key:"itemRole",set:function set(e){this[Ke]({itemRole:e})}},{key:Ge,value:function value(e){_get(_getPrototypeOf$1(AriaMenu.prototype),Ge,this)&&_get(_getPrototypeOf$1(AriaMenu.prototype),Ge,this).call(this,e);var n=this[Ze].items;if((e.items||e.itemRole)&&n){var o=this[Ze].itemRole;n.forEach((function(e){o===hn[e.localName]?e.removeAttribute("role"):e.setAttribute("role",o)}))}if(e.role){var i=this[Ze].role;this.setAttribute("role",i)}}},{key:"role",get:function get(){return _get(_getPrototypeOf$1(AriaMenu.prototype),"role",this)}},{key:"role",set:function set(e){_set(_getPrototypeOf$1(AriaMenu.prototype),"role",e,this,!0),this[Ue]||this[Ke]({role:e})}}]),AriaMenu}(e);return n}(function CursorAPIMixin(e){var n=function(e){_inherits$1(CursorAPI,e);var n=_createSuper$4(CursorAPI);function CursorAPI(){return _classCallCheck$1(this,CursorAPI),n.apply(this,arguments)}return _createClass$1(CursorAPI,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if("current-index"===e)this.currentIndex=Number(o);else if("current-item-required"===e){var i=booleanAttributeValue(e,o);this.currentItemRequired!==i&&(this.currentItemRequired=i)}else if("cursor-operations-wrap"===e){var r=booleanAttributeValue(e,o);this.cursorOperationsWrap!==r&&(this.cursorOperationsWrap=r)}else _get(_getPrototypeOf$1(CursorAPI.prototype),"attributeChangedCallback",this).call(this,e,n,o)}},{key:"currentIndex",get:function get(){var e=this[Ze],n=e.items,o=e.currentIndex;return n&&n.length>0?o:-1},set:function set(e){isNaN(e)||this[Ke]({currentIndex:e})}},{key:"currentItem",get:function get(){var e=this[Ze],n=e.items,o=e.currentIndex;return n&&n[o]},set:function set(e){var n=this[Ze].items;if(n){var o=n.indexOf(e);this[Ke]({currentIndex:o})}}},{key:"currentItemRequired",get:function get(){return this[Ze].currentItemRequired},set:function set(e){this[Ke]({currentItemRequired:e})}},{key:"cursorOperationsWrap",get:function get(){return this[Ze].cursorOperationsWrap},set:function set(e){this[Ke]({cursorOperationsWrap:e})}},{key:"goFirst",value:function goFirst$1(){return _get(_getPrototypeOf$1(CursorAPI.prototype),"goFirst",this)&&_get(_getPrototypeOf$1(CursorAPI.prototype),"goFirst",this).call(this),this[we]()}},{key:"goLast",value:function goLast$1(){return _get(_getPrototypeOf$1(CursorAPI.prototype),"goLast",this)&&_get(_getPrototypeOf$1(CursorAPI.prototype),"goLast",this).call(this),this[Ce]()}},{key:"goNext",value:function goNext$1(){return _get(_getPrototypeOf$1(CursorAPI.prototype),"goNext",this)&&_get(_getPrototypeOf$1(CursorAPI.prototype),"goNext",this).call(this),this[Pe]()}},{key:"goPrevious",value:function goPrevious$1(){return _get(_getPrototypeOf$1(CursorAPI.prototype),"goPrevious",this)&&_get(_getPrototypeOf$1(CursorAPI.prototype),"goPrevious",this).call(this),this[$e]()}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(CursorAPI.prototype),He,this)&&_get(_getPrototypeOf$1(CursorAPI.prototype),He,this).call(this,e),e.currentIndex&&this[Fe]){var n=this[Ze].currentIndex,o=new CustomEvent("currentindexchange",{bubbles:!0,detail:{currentIndex:n}});this.dispatchEvent(o)}}}]),CursorAPI}(e);return n}(function CursorInViewMixin(e){var n=function(e){_inherits$1(CursorInView,e);var n=_createSuper$4(CursorInView);function CursorInView(){return _classCallCheck$1(this,CursorInView),n.apply(this,arguments)}return _createClass$1(CursorInView,[{key:He,value:function value(e){_get(_getPrototypeOf$1(CursorInView.prototype),He,this)&&_get(_getPrototypeOf$1(CursorInView.prototype),He,this).call(this,e),e.currentItem&&this.scrollCurrentItemIntoView()}},{key:"scrollCurrentItemIntoView",value:function scrollCurrentItemIntoView(){_get(_getPrototypeOf$1(CursorInView.prototype),"scrollCurrentItemIntoView",this)&&_get(_getPrototypeOf$1(CursorInView.prototype),"scrollCurrentItemIntoView",this).call(this);var e=this[Ze],n=e.currentItem,o=e.items;if(n&&o){var i=this[Ve].getBoundingClientRect(),r=n.getBoundingClientRect(),a=r.bottom-i.bottom,s=r.left-i.left,l=r.right-i.right,c=r.top-i.top,u=this[Ze].orientation||"both";"horizontal"!==u&&"both"!==u||(l>0?this[Ve].scrollLeft+=l:s<0&&(this[Ve].scrollLeft+=Math.ceil(s))),"vertical"!==u&&"both"!==u||(a>0?this[Ve].scrollTop+=a:c<0&&(this[Ve].scrollTop+=Math.ceil(c)))}}},{key:Ve,get:function get(){return _get(_getPrototypeOf$1(CursorInView.prototype),Ve,this)||defaultScrollTarget(this)}}]),CursorInView}(e);return n}(DelegateFocusMixin(function DirectionCursorMixin(e){var n=function(e){_inherits$1(DirectionCursor,e);var n=_createSuper$4(DirectionCursor);function DirectionCursor(){return _classCallCheck$1(this,DirectionCursor),n.apply(this,arguments)}return _createClass$1(DirectionCursor,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(DirectionCursor.prototype),ge,this)||{},{canGoDown:null,canGoLeft:null,canGoRight:null,canGoUp:null})}},{key:ke,value:function value(){return _get(_getPrototypeOf$1(DirectionCursor.prototype),ke,this)&&_get(_getPrototypeOf$1(DirectionCursor.prototype),ke,this).call(this),this[Pe]()}},{key:xe,value:function value(){return _get(_getPrototypeOf$1(DirectionCursor.prototype),xe,this)&&_get(_getPrototypeOf$1(DirectionCursor.prototype),xe,this).call(this),this[Ce]()}},{key:Se,value:function value(){return _get(_getPrototypeOf$1(DirectionCursor.prototype),Se,this)&&_get(_getPrototypeOf$1(DirectionCursor.prototype),Se,this).call(this),this[Ze]&&this[Ze].rightToLeft?this[Pe]():this[$e]()}},{key:Ee,value:function value(){return _get(_getPrototypeOf$1(DirectionCursor.prototype),Ee,this)&&_get(_getPrototypeOf$1(DirectionCursor.prototype),Ee,this).call(this),this[Ze]&&this[Ze].rightToLeft?this[$e]():this[Pe]()}},{key:Le,value:function value(){return _get(_getPrototypeOf$1(DirectionCursor.prototype),Le,this)&&_get(_getPrototypeOf$1(DirectionCursor.prototype),Le,this).call(this),this[we]()}},{key:Ae,value:function value(){return _get(_getPrototypeOf$1(DirectionCursor.prototype),Ae,this)&&_get(_getPrototypeOf$1(DirectionCursor.prototype),Ae,this).call(this),this[$e]()}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(DirectionCursor.prototype),Je,this)?_get(_getPrototypeOf$1(DirectionCursor.prototype),Je,this).call(this,e,n):{};if(n.canGoNext||n.canGoPrevious||n.languageDirection||n.orientation||n.rightToLeft){var i=e.canGoNext,r=e.canGoPrevious,a=e.orientation,s=e.rightToLeft,l="horizontal"===a||"both"===a,c="vertical"===a||"both"===a,u=c&&i,d=!!l&&(s?i:r),p=!!l&&(s?r:i),h=c&&r;Object.assign(o,{canGoDown:u,canGoLeft:d,canGoRight:p,canGoUp:h})}return o}}]),DirectionCursor}(e);return n}(function ItemsAPIMixin(e){var n=function(e){_inherits$1(ItemsAPI,e);var n=_createSuper$4(ItemsAPI);function ItemsAPI(){return _classCallCheck$1(this,ItemsAPI),n.apply(this,arguments)}return _createClass$1(ItemsAPI,[{key:"items",get:function get(){return this[Ze]?this[Ze].items:null}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(ItemsAPI.prototype),He,this)&&_get(_getPrototypeOf$1(ItemsAPI.prototype),He,this).call(this,e),!this[ye]&&e.items&&this[Fe]){var n=new CustomEvent("itemschange",{bubbles:!0});this.dispatchEvent(n)}}}]),ItemsAPI}(e);return n}(function ItemsCursorMixin(e){var n=function(e){_inherits$1(ItemsCursor,e);var n=_createSuper$4(ItemsCursor);function ItemsCursor(){return _classCallCheck$1(this,ItemsCursor),n.apply(this,arguments)}return _createClass$1(ItemsCursor,[{key:pe,value:function value(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0!==n.direction?n.direction:1,i=void 0!==n.index?n.index:e.currentIndex,r=void 0!==n.wrap?n.wrap:e.cursorOperationsWrap,a=e.items,s=a?a.length:0;if(0===s)return-1;if(r)for(var l=(i%s+s)%s,c=((l-o)%s+s)%s;l!==c;){var u=!e.availableItemFlags||e.availableItemFlags[l];if(u)return l;l=((l+o)%s+s)%s}else for(var d=i;d>=0&&d<s;d+=o){var p=!e.availableItemFlags||e.availableItemFlags[d];if(p)return d}return-1}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(ItemsCursor.prototype),ge,this)||{},{currentIndex:-1,desiredCurrentIndex:null,currentItem:null,currentItemRequired:!1,cursorOperationsWrap:!1})}},{key:we,value:function value(){return _get(_getPrototypeOf$1(ItemsCursor.prototype),we,this)&&_get(_getPrototypeOf$1(ItemsCursor.prototype),we,this).call(this),moveToIndex(this,0,1)}},{key:Ce,value:function value(){return _get(_getPrototypeOf$1(ItemsCursor.prototype),Ce,this)&&_get(_getPrototypeOf$1(ItemsCursor.prototype),Ce,this).call(this),moveToIndex(this,this[Ze].items.length-1,-1)}},{key:Pe,value:function value(){_get(_getPrototypeOf$1(ItemsCursor.prototype),Pe,this)&&_get(_getPrototypeOf$1(ItemsCursor.prototype),Pe,this).call(this);var e=this[Ze],n=e.currentIndex,o=e.items;return moveToIndex(this,n<0&&o?0:n+1,1)}},{key:$e,value:function value(){_get(_getPrototypeOf$1(ItemsCursor.prototype),$e,this)&&_get(_getPrototypeOf$1(ItemsCursor.prototype),$e,this).call(this);var e=this[Ze],n=e.currentIndex,o=e.items;return moveToIndex(this,n<0&&o?o.length-1:n-1,-1)}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(ItemsCursor.prototype),Je,this)?_get(_getPrototypeOf$1(ItemsCursor.prototype),Je,this).call(this,e,n):{};if(n.availableItemFlags||n.items||n.currentIndex||n.currentItemRequired){var i,r=e.currentIndex,a=e.desiredCurrentIndex,s=e.currentItem,l=e.currentItemRequired,c=e.items,u=c?c.length:0,d=a;if(n.items&&!n.currentIndex&&s&&u>0&&c[r]!==s){var p=c.indexOf(s);p>=0&&(d=p)}else n.currentIndex&&(r<0&&null!==s||r>=0&&(0===u||c[r]!==s)||null===a)&&(d=r);l&&d<0&&(d=0),d<0?(d=-1,i=-1):0===u?i=-1:(i=Math.max(Math.min(u-1,d),0),(i=this[pe](e,{direction:1,index:i,wrap:!1}))<0&&(i=this[pe](e,{direction:-1,index:i-1,wrap:!1})));var h=c&&c[i]||null;Object.assign(o,{currentIndex:i,desiredCurrentIndex:d,currentItem:h})}return o}}]),ItemsCursor}(e);return n}(function ItemsTextMixin(e){var n=function(e){_inherits$1(ItemsText,e);var n=_createSuper$4(ItemsText);function ItemsText(){return _classCallCheck$1(this,ItemsText),n.apply(this,arguments)}return _createClass$1(ItemsText,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(ItemsText.prototype),ge,this)||{},{texts:null})}},{key:_e,value:function value(e){return _get(_getPrototypeOf$1(ItemsText.prototype),_e,this)?_get(_getPrototypeOf$1(ItemsText.prototype),_e,this).call(this,e):function getDefaultText(e){return e.getAttribute("aria-label")||e.getAttribute("alt")||e.innerText||e.textContent||""}(e)}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(ItemsText.prototype),Je,this)?_get(_getPrototypeOf$1(ItemsText.prototype),Je,this).call(this,e,n):{};if(n.items){var i=function getTextsFromItems(e,n){return e?Array.from(e,(function(e){return n(e)})):null}(e.items,this[_e]);i&&(Object.freeze(i),Object.assign(o,{texts:i}))}return o}}]),ItemsText}(e);return n}(KeyboardDirectionMixin(KeyboardMixin(function KeyboardPagedCursorMixin(e){var n=function(e){_inherits$1(KeyboardPagedCursor,e);var n=_createSuper$4(KeyboardPagedCursor);function KeyboardPagedCursor(){return _classCallCheck$1(this,KeyboardPagedCursor),n.apply(this,arguments)}return _createClass$1(KeyboardPagedCursor,[{key:Me,value:function value(e){var n=!1;if("horizontal"!==this.orientation)switch(e.key){case"PageDown":n=this.pageDown();break;case"PageUp":n=this.pageUp()}return n||_get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),Me,this)&&_get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),Me,this).call(this,e)}},{key:"orientation",get:function get(){return _get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),"orientation",this)||this[Ze]&&this[Ze].orientation||"both"}},{key:"pageDown",value:function pageDown(){return _get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),"pageDown",this)&&_get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),"pageDown",this).call(this),scrollOnePage(this,!0)}},{key:"pageUp",value:function pageUp(){return _get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),"pageUp",this)&&_get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),"pageUp",this).call(this),scrollOnePage(this,!1)}},{key:Ve,get:function get(){return _get(_getPrototypeOf$1(KeyboardPagedCursor.prototype),Ve,this)||defaultScrollTarget(this)}}]),KeyboardPagedCursor}(e);return n}(function KeyboardPrefixCursorMixin(e){var n=function(e){_inherits$1(KeyboardPrefixCursor,e);var n=_createSuper$4(KeyboardPrefixCursor);function KeyboardPrefixCursor(){var e;return _classCallCheck$1(this,KeyboardPrefixCursor),resetTypedPrefix(_assertThisInitialized$1(e=n.call(this))),e}return _createClass$1(KeyboardPrefixCursor,[{key:Oe,value:function value(e){if(_get(_getPrototypeOf$1(KeyboardPrefixCursor.prototype),Oe,this)&&_get(_getPrototypeOf$1(KeyboardPrefixCursor.prototype),Oe,this).call(this,e),null==e||0===e.length)return!1;var n=e.toLowerCase(),o=this[Ze].texts.findIndex((function(o){return o.substr(0,e.length).toLowerCase()===n}));if(o>=0){var i=this[Ze].currentIndex;return this[Ke]({currentIndex:o}),this[Ze].currentIndex!==i}return!1}},{key:Me,value:function value(e){var n;switch(e.key){case"Backspace":!function handleBackspace(e){var n=e,o=n[bn]?n[bn].length:0;o>0&&(n[bn]=n[bn].substr(0,o-1));e[Oe](n[bn]),setPrefixTimeout(e)}(this),n=!0;break;case"Escape":resetTypedPrefix(this);break;default:e.ctrlKey||e.metaKey||e.altKey||1!==e.key.length||function handlePlainCharacter(e,n){var o=e,i=o[bn]||"";o[bn]=i+n,e[Oe](o[bn]),setPrefixTimeout(e)}(this,e.key)}return n||_get(_getPrototypeOf$1(KeyboardPrefixCursor.prototype),Me,this)&&_get(_getPrototypeOf$1(KeyboardPrefixCursor.prototype),Me,this).call(this,e)}}]),KeyboardPrefixCursor}(e);return n}(LanguageDirectionMixin(function SlotItemsMixin(e){return ContentItemsMixin(SlotContentMixin(e))}(function TapCursorMixin(e){return function(e){_inherits$1(TapCursor,e);var n=_createSuper$4(TapCursor);function TapCursor(){var e;return _classCallCheck$1(this,TapCursor),(e=n.call(this)).addEventListener("mousedown",(function(n){0===n.button&&(e[Fe]=!0,e[ct](n),e[Fe]=!1)})),e}return _createClass$1(TapCursor,[{key:Ge,value:function value(e){_get(_getPrototypeOf$1(TapCursor.prototype),Ge,this)&&_get(_getPrototypeOf$1(TapCursor.prototype),Ge,this).call(this,e),this[ye]&&Object.assign(this.style,{touchAction:"manipulation",mozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none",userSelect:"none"})}},{key:ct,value:function value(e){var n=e.composedPath?e.composedPath()[0]:e.target,o=this[Ze],i=o.items,r=o.currentItemRequired;if(i&&n instanceof Node){var a=indexOfItemContainingTarget(i,n),s=a>=0?i[a]:null;(s&&!s.disabled||!s&&!r)&&(this[Ke]({currentIndex:a}),e.stopPropagation())}}}]),TapCursor}(e)}(ue))))))))))))))),_n=function(e){_inherits$1(Menu,mn);var n,o=_createSuper$4(Menu);function Menu(){return _classCallCheck$1(this,Menu),o.apply(this,arguments)}return _createClass$1(Menu,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Menu.prototype),ge,this),{availableItemFlags:null,handleBubblingDirectionKeys:!0,highlightCurrentItem:!0,orientation:"vertical",currentItemFocused:!1})}},{key:"flashCurrentItem",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var e,n,o;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(e=this[Ze].focusVisible,n=matchMedia("(pointer: fine)").matches,!e&&!n){i.next=10;break}return o=75,this[Ke]({highlightCurrentItem:!1}),i.next=7,new Promise((function(e){return setTimeout(e,o)}));case 7:return this[Ke]({highlightCurrentItem:!0}),i.next=10,new Promise((function(e){return setTimeout(e,o)}));case 10:case"end":return i.stop()}}),_callee,this)}))),function flashCurrentItem(){return n.apply(this,arguments)})},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(Menu.prototype),Ge,this).call(this,e),this[ye]&&(this.addEventListener("disabledchange",(function(e){n[Fe]=!0;var o=e.target,i=n[Ze].items,r=null===i?-1:i.indexOf(o);if(r>=0){var a=n[Ze].availableItemFlags.slice();a[r]=!o.disabled,n[Ke]({availableItemFlags:a})}n[Fe]=!1})),"PointerEvent"in window?this.addEventListener("pointerdown",(function(e){return n[ct](e)})):this.addEventListener("touchstart",(function(e){return n[ct](e)})),this.removeAttribute("tabindex"));var o=this[Ze],i=o.currentIndex,r=o.items;if((e.items||e.currentIndex||e.highlightCurrentItem)&&r){var a=this[Ze].highlightCurrentItem;r.forEach((function(e,n){e.toggleAttribute("current",a&&n===i)}))}(e.items||e.currentIndex||e.currentItemFocused||e.focusVisible)&&r&&r.forEach((function(e,o){var r=o===i,a=i<0&&0===o;n[Ze].currentItemFocused?r||a||e.removeAttribute("tabindex"):(r||a)&&(e.tabIndex=0)}))}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(Menu.prototype),He,this).call(this,e),!this[ye]&&e.currentIndex&&!this[Ze].currentItemFocused){var n=this[Ze].currentItem;(n instanceof HTMLElement?n:this).focus(),this[Ke]({currentItemFocused:!0})}}},{key:Ve,get:function get(){return this[je].content}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(Menu.prototype),Je,this).call(this,e,n);if(n.currentIndex&&Object.assign(o,{currentItemFocused:!1}),n.items){var i=e.items,r=null===i?null:i.map((function(e){return!e.disabled}));Object.assign(o,{availableItemFlags:r})}return o}},{key:ut,get:function get(){return I.html(vn||(vn=_taggedTemplateLiteral(['\n      <style>\n        :host {\n          box-sizing: border-box;\n          cursor: default;\n          display: inline-flex;\n          -webkit-tap-highlight-color: transparent;\n          touch-action: manipulation;\n        }\n\n        #content {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          max-height: 100%;\n          overflow-x: hidden;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch; /* for momentum scrolling */\n        }\n        \n        ::slotted(*) {\n          flex-shrink: 0;\n          outline: none;\n          touch-action: manipulation;\n        }\n\n        ::slotted(option) {\n          font: inherit;\n          min-height: inherit;\n        }\n      </style>\n      <div id="content" role="none">\n        <slot></slot>\n      </div>\n    '])))}}]),Menu}(),kn=Symbol("documentMouseupListener");function handleMouseup(e){return _handleMouseup.apply(this,arguments)}function _handleMouseup(){return(_handleMouseup=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var n,o,i,r,a,s;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(o=(n=this)[We].elementsFromPoint(e.clientX,e.clientY),!n.opened){l.next=16;break}if(i=o.indexOf(n[je].source)>=0,r=n[je].popup,a=o.indexOf(r)>=0,s=r.frame&&o.indexOf(r.frame)>=0,!i){l.next=11;break}n[Ze].dragSelect&&(n[Fe]=!0,n[Ke]({dragSelect:!1}),n[Fe]=!1),l.next=16;break;case 11:if(a||s){l.next=16;break}return n[Fe]=!0,l.next=15,n.close();case 15:n[Fe]=!1;case 16:case"end":return l.stop()}}),_callee,this)})))).apply(this,arguments)}function listenIfOpenAndConnected$1(e){e[Ze].opened&&e.isConnected?e[kn]||(e[kn]=handleMouseup.bind(e),document.addEventListener("mouseup",e[kn])):e[kn]&&(document.removeEventListener("mouseup",e[kn]),e[kn]=null)}function availableSpace(e,n,o,i){var r=getSourceOrigin(e,o,i),a=0,s=0,l="above"===o||"below"===o;switch(o){case"above":a=r.y-n.top;break;case"below":a=n.bottom-r.y;break;case"left":s=r.x-n.left;break;case"right":s=n.right-r.x}switch(i){case"bottom":a=r.y-n.top;break;case"center":l?s=n.width:a=n.height;break;case"stretch":l?s=e.width:a=e.height;break;case"left":s=n.right-r.x;break;case"right":s=r.x-n.left;break;case"top":a=n.bottom-r.y}return{height:a=Math.max(0,a),width:s=Math.max(0,s)}}function getSourceOrigin(e,n,o){var i=0,r=0,a="above"===n||"below"===n;switch(n){case"above":r=e.top;break;case"below":r=e.bottom;break;case"left":case"right":i=e[n]}switch(o){case"bottom":case"top":r=e[o];break;case"left":case"right":i=e[o];break;case"center":a?i=e.left+e.width/2:r=e.top+e.height/2;break;case"stretch":a?i=e.left:r=e.top}return{x:i,y:r}}function layoutPopup(e,n,o,i){var r=function normalizeOptions(e){var n=e.align,o=e.direction,i=e.rightToLeft,r="below",a={above:"above",below:"below",column:"below","column-reverse":"above",left:"left",right:"right",row:i?"left":"right","row-reverse":i?"right":"left"}[o]||r,s={above:"horizontal",below:"horizontal",left:"vertical",right:"vertical"}[a],l={horizontal:"left",vertical:"top"}[s];return{align:{horizontal:{center:"center",end:i?"left":"right",left:"left",right:"right",start:i?"right":"left",stretch:"stretch"},vertical:{bottom:"bottom",center:"center",end:"bottom",start:"top",stretch:"stretch",top:"top"}}[s][n]||l,direction:a,rightToLeft:i}}(i),a=function prioritizedLayouts(e,n){var o={above:"below",below:"above",left:"right",right:"left"},i={top:"bottom",bottom:"top",left:"right",right:"left"},r=[{align:n,direction:e}];"center"===n||"stretch"===n?r.push({align:n,direction:o[e]}):(r.push({align:i[n],direction:e}),r.push({align:n,direction:o[e]}),r.push({align:i[n],direction:o[e]}));return r}(r.direction,r.align);a.sort((function(i,r){return function compareLayouts(e,n,o,i,r){var a=availableSpace(o,r,e.direction,e.align),s=availableSpace(o,r,n.direction,n.align),l=i.width<=a.width,c=i.height<=a.height,u=l||c,d=l&&c,p=i.width<=s.width,h=i.height<=s.height,g=p||h,f=p&&h,v=a.width*a.height,b=s.width*s.height;return d&&f?0:d?-1:f?1:u&&!g?-1:g&&!u?1:u&&v>b?-1:g&&b>v?1:v>b?-1:b>v?1:0}(i,r,e,n,o)}));var s=a[0];return s.rect=function getPositionedRect(e,n,o,i,r){var a=getSourceOrigin(e,i,r),s=o.x,l=o.y,c=o.bottom,u=o.right,d=0,p=0,h=n.height,g=n.width,f="above"===i||"below"===i;switch(i){case"above":p=a.y-n.height,c=a.y;break;case"below":p=a.y,l=a.y;break;case"left":d=a.x-n.width,u=a.x;break;case"right":d=a.x,s=a.x}switch(r){case"bottom":p=a.y-n.height,c=a.y;break;case"left":d=a.x,s=a.x;break;case"center":f?d=a.x-n.width/2:p=a.y-n.height/2;break;case"right":d=a.x-n.width,u=a.x;break;case"stretch":f?(d=a.x,g=e.width):(p=a.y,h=e.height);break;case"top":p=a.y,l=a.y}return d=Math.max(d,s),p=Math.max(p,l),g=Math.min(g,u-d),h=Math.min(h,c-p),new DOMRect(d,p,g,h)}(e,n,o,s.direction,s.align),s}var xn,wn=Symbol("closePromise"),Cn=Symbol("closeResolve");function OpenCloseMixin(e){var n=function(e){_inherits$1(OpenClose,e);var n,o,i,r=_createSuper$4(OpenClose);function OpenClose(){return _classCallCheck$1(this,OpenClose),r.apply(this,arguments)}return _createClass$1(OpenClose,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if("opened"===e){var i=booleanAttributeValue(e,o);this.opened!==i&&(this.opened=i)}else _get(_getPrototypeOf$1(OpenClose.prototype),"attributeChangedCallback",this).call(this,e,n,o)}},{key:"close",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){return _regeneratorRuntime().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!_get(_getPrototypeOf$1(OpenClose.prototype),"close",this)){n.next=3;break}return n.next=3,_get(_getPrototypeOf$1(OpenClose.prototype),"close",this).call(this);case 3:return this[Ke]({closeResult:e}),n.next=6,this.toggle(!1);case 6:case"end":return n.stop()}}),_callee,this)}))),function close(e){return i.apply(this,arguments)})},{key:"closed",get:function get(){return this[Ze]&&!this[Ze].opened}},{key:"closeFinished",get:function get(){return this[Ze].closeFinished}},{key:"closeResult",get:function get(){return this[Ze].closeResult}},{key:ge,get:function get(){var e={closeResult:void 0,opened:!1};return this[Xe]&&Object.assign(e,{closeFinished:!0,effect:"close",effectPhase:"after",openCloseEffects:!0}),Object.assign(_get(_getPrototypeOf$1(OpenClose.prototype),ge,this)||{},e)}},{key:"open",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(!_get(_getPrototypeOf$1(OpenClose.prototype),"open",this)){e.next=3;break}return e.next=3,_get(_getPrototypeOf$1(OpenClose.prototype),"open",this).call(this);case 3:return e.next=5,this.toggle(!0);case 5:case"end":return e.stop()}}),_callee2,this)}))),function open(){return o.apply(this,arguments)})},{key:"opened",get:function get(){return this[Ze]&&this[Ze].opened}},{key:"opened",set:function set(e){this[Ke]({closeResult:void 0}),this.toggle(e)}},{key:Ge,value:function value(e){(_get(_getPrototypeOf$1(OpenClose.prototype),Ge,this).call(this,e),e.opened)&&setInternalState(this,"opened",this[Ze].opened);e.closeFinished&&setInternalState(this,"closed",this[Ze].closeFinished)}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(OpenClose.prototype),He,this)&&_get(_getPrototypeOf$1(OpenClose.prototype),He,this).call(this,e),e.opened&&this[Fe]){var n=new CustomEvent("openedchange",{bubbles:!0,detail:{closeResult:this[Ze].closeResult,opened:this[Ze].opened}});if(this.dispatchEvent(n),this[Ze].opened){var o=new CustomEvent("opened",{bubbles:!0});this.dispatchEvent(o);var i=new CustomEvent("open",{bubbles:!0});this.dispatchEvent(i)}else{var r=new CustomEvent("closed",{bubbles:!0,detail:{closeResult:this[Ze].closeResult}});this.dispatchEvent(r);var a=new CustomEvent("close",{bubbles:!0,detail:{closeResult:this[Ze].closeResult}});this.dispatchEvent(a)}}var s=this[Cn];this.closeFinished&&s&&(this[Cn]=null,this[wn]=null,s(this[Ze].closeResult))}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(OpenClose.prototype),Je,this)?_get(_getPrototypeOf$1(OpenClose.prototype),Je,this).call(this,e,n):{};if(n.opened&&e.opened&&Object.assign(o,{closeResult:void 0}),n.openCloseEffects||n.effect||n.effectPhase||n.opened){var i=e.effect,r=e.effectPhase,a=e.openCloseEffects,s=e.opened,l=a?"close"===i&&"after"===r:!s;Object.assign(o,{closeFinished:l})}return o}},{key:"toggle",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var e,n,o=arguments;return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:!this.opened,!_get(_getPrototypeOf$1(OpenClose.prototype),"toggle",this)){i.next=4;break}return i.next=4,_get(_getPrototypeOf$1(OpenClose.prototype),"toggle",this).call(this,e);case 4:if(e===this[Ze].opened){i.next=10;break}return n={opened:e},this[Ze].openCloseEffects&&(n.effect=e?"open":"close","after"===this[Ze].effectPhase&&(n.effectPhase="before")),i.next=10,this[Ke](n);case 10:case"end":return i.stop()}}),_callee3,this)}))),function toggle(){return n.apply(this,arguments)})},{key:"whenClosed",value:function whenClosed(){var e=this;return this[wn]||(this[wn]=new Promise((function(n){e[Cn]=n}))),this[wn]}}]),OpenClose}(e);return n}var Sn,Pn,$n,En,Ln=function AriaRoleMixin(e){var n=function(e){_inherits$1(AriaRole,e);var n=_createSuper$4(AriaRole);function AriaRole(){return _classCallCheck$1(this,AriaRole),n.apply(this,arguments)}return _createClass$1(AriaRole,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(AriaRole.prototype),ge,this)||{},{role:null})}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(AriaRole.prototype),Ge,this)&&_get(_getPrototypeOf$1(AriaRole.prototype),Ge,this).call(this,e),e.role){var n=this[Ze].role;n?this.setAttribute("role",n):this.removeAttribute("role")}}},{key:"role",get:function get(){return _get(_getPrototypeOf$1(AriaRole.prototype),"role",this)}},{key:"role",set:function set(e){var n=String(e);_set(_getPrototypeOf$1(AriaRole.prototype),"role",n,this,!0),this[Ue]||this[Ke]({s:n})}}]),AriaRole}(e);return n}(ue),On=function(e){_inherits$1(Backdrop,Ln);var n=_createSuper$4(Backdrop);function Backdrop(){return _classCallCheck$1(this,Backdrop),n.apply(this,arguments)}return _createClass$1(Backdrop,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Backdrop.prototype),ge,this),{role:"none"})}},{key:ut,get:function get(){return I.html(xn||(xn=_taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: inline-block;\n          height: 100%;\n          left: 0;\n          position: fixed;\n          top: 0;\n          touch-action: manipulation;\n          width: 100%;\n        }\n      </style>\n      <slot></slot>\n    "])))}}]),Backdrop}(),An=function(e){_inherits$1(OverlayFrame,ue);var n=_createSuper$4(OverlayFrame);function OverlayFrame(){return _classCallCheck$1(this,OverlayFrame),n.apply(this,arguments)}return _createClass$1(OverlayFrame,[{key:ut,get:function get(){return I.html(Sn||(Sn=_taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n      </style>\n      <slot></slot>\n    "])))}}]),OverlayFrame}(),Tn=Symbol("appendedToDocument"),jn=Symbol("assignedZIndex"),In=Symbol("restoreFocusToElement");function bringToFront(e){var n=function maxZIndexInUse(){var e=document.body.querySelectorAll("*"),n=Array.from(e,(function(e){var n=getComputedStyle(e),o=0;if("static"!==n.position&&"auto"!==n.zIndex){var i=n.zIndex?parseInt(n.zIndex):0;o=isNaN(i)?0:i}return o}));return Math.max.apply(Math,n)}()+1;e[jn]=n,e.style.zIndex=n.toString()}function hasZIndex(e){var n=getComputedStyle(e).zIndex,o=e.style.zIndex,i=!isNaN(parseInt(o));if("auto"===n)return i;if("0"===n&&!i){var r=e.assignedSlot||(e instanceof ShadowRoot?e.host:e.parentNode);if(!(r instanceof HTMLElement))return!0;if(!hasZIndex(r))return!1}return!0}var Rn=OpenCloseMixin(function OverlayMixin(e){var n=function(e){_inherits$1(Overlay,e);var n,o=_createSuper$4(Overlay);function Overlay(){return _classCallCheck$1(this,Overlay),o.apply(this,arguments)}return _createClass$1(Overlay,[{key:"autoFocus",get:function get(){return this[Ze].autoFocus},set:function set(e){this[Ke]({autoFocus:e})}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Overlay.prototype),ge,this)||{},{autoFocus:!0,persistent:!1})}},{key:"open",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(this[Ze].persistent||this.isConnected||(this[Tn]=!0,document.body.append(this)),!_get(_getPrototypeOf$1(Overlay.prototype),"open",this)){e.next=4;break}return e.next=4,_get(_getPrototypeOf$1(Overlay.prototype),"open",this).call(this);case 4:case"end":return e.stop()}}),_callee,this)}))),function open(){return n.apply(this,arguments)})},{key:Ge,value:function value(e){var n=this;(_get(_getPrototypeOf$1(Overlay.prototype),Ge,this)&&_get(_getPrototypeOf$1(Overlay.prototype),Ge,this).call(this,e),this[ye]&&this.addEventListener("blur",(function(e){var o=e.relatedTarget||document.activeElement;o instanceof HTMLElement&&(deepContains(n,o)||(n.opened?n[In]=o:(o.focus(),n[In]=null)))})),e.effectPhase||e.opened||e.persistent)&&(this[Ze].persistent||((void 0===this.closeFinished?this.closed:this.closeFinished)?this[jn]&&(this.style.zIndex="",this[jn]=null):this[jn]?this.style.zIndex=this[jn]:hasZIndex(this)||bringToFront(this)))}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(Overlay.prototype),He,this)&&_get(_getPrototypeOf$1(Overlay.prototype),He,this).call(this,e),this[ye]&&this[Ze].persistent&&!hasZIndex(this)&&bringToFront(this),e.opened&&this[Ze].autoFocus)if(this[Ze].opened){this[In]||document.activeElement===document.body||(this[In]=document.activeElement);var n=firstFocusableElement(this);n&&n.focus()}else this[In]&&(this[In].focus(),this[In]=null);!this[ye]&&!this[Ze].persistent&&this.closeFinished&&this[Tn]&&(this[Tn]=!1,this.parentNode&&this.parentNode.removeChild(this))}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(Overlay.prototype),ut,this)||I.html(Pn||(Pn=_taggedTemplateLiteral([""])));return e.content.append(j($n||($n=_taggedTemplateLiteral(["\n        <style>\n          :host([closed]) {\n            display: none;\n          }\n        </style>\n      "])))),e}}]),Overlay}(e);return n}(SlotContentMixin(ue))),Mn=function(e){_inherits$1(Overlay,Rn);var n=_createSuper$4(Overlay);function Overlay(){return _classCallCheck$1(this,Overlay),n.apply(this,arguments)}return _createClass$1(Overlay,[{key:"backdrop",get:function get(){return this[je]&&this[je].backdrop}},{key:"backdropPartType",get:function get(){return this[Ze].backdropPartType},set:function set(e){this[Ke]({backdropPartType:e})}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Overlay.prototype),ge,this),{backdropPartType:On,framePartType:An})}},{key:"frame",get:function get(){return this[je].frame}},{key:"framePartType",get:function get(){return this[Ze].framePartType}},{key:"framePartType",set:function set(e){this[Ke]({framePartType:e})}},{key:Ge,value:function value(e){_get(_getPrototypeOf$1(Overlay.prototype),Ge,this).call(this,e),renderParts$3(this[We],this[Ze],e)}},{key:He,value:function value(e){_get(_getPrototypeOf$1(Overlay.prototype),He,this).call(this,e),e.opened&&this[Ze].content&&this[Ze].content.forEach((function(e){e[de]&&e[de]()}))}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(Overlay.prototype),ut,this);return e.content.append(j(En||(En=_taggedTemplateLiteral(['\n      <style>\n        :host {\n          max-height: 100vh;\n          max-width: 100vw;\n          outline: none;\n          position: fixed;\n          -webkit-tap-highlight-color: transparent;\n        }\n\n        [part~="frame"] {\n          box-sizing: border-box;\n          display: grid;\n          overflow: hidden;\n          overscroll-behavior: contain;\n          pointer-events: initial;\n          position: relative;\n        }\n      </style>\n      <div id="backdrop" part="backdrop" tabindex="-1"></div>\n      <div id="frame" part="frame" role="none">\n        <slot></slot>\n      </div>\n    '])))),renderParts$3(e.content,this[Ze]),e}}]),Overlay}();function renderParts$3(e,n,o){if(!o||o.backdropPartType){var i=n.backdropPartType,r=e.getElementById("backdrop");r&&transmute(r,i)}if(!o||o.framePartType){var a=n.framePartType,s=e.getElementById("frame");s&&transmute(s,a)}}var Dn,Bn=Symbol("implicitCloseListener"),Nn="true"===new URLSearchParams(location.search).get("elixdebugpopup");function blurHandler$1(e){return _blurHandler$1.apply(this,arguments)}function _blurHandler$1(){return(_blurHandler$1=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var n,o;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(n=this,!((o=e.relatedTarget||document.activeElement)instanceof Element)||deepContains(n,o)){i.next=7;break}return n[Fe]=!0,i.next=6,n.close({canceled:"window blur"});case 6:n[Fe]=!1;case 7:case"end":return i.stop()}}),_callee,this)})))).apply(this,arguments)}function closeHandler(e){return _closeHandler.apply(this,arguments)}function _closeHandler(){return(_closeHandler=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n,o;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(n=this,o="resize"!==e.type||n[Ze].closeOnWindowResize,ownEvent(n,e)||!o){i.next=7;break}return n[Fe]=!0,i.next=6,n.close({canceled:"window ".concat(e.type)});case 6:n[Fe]=!1;case 7:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}var Fn,Gn=KeyboardMixin(function PopupModalityMixin(e){var n=function(e){_inherits$1(PopupModality,e);var n=_createSuper$4(PopupModality);function PopupModality(){return _classCallCheck$1(this,PopupModality),n.apply(this,arguments)}return _createClass$1(PopupModality,[{key:"closeOnWindowResize",get:function get(){return this[Ze].closeOnWindowResize},set:function set(e){this[Ke]({closeOnWindowResize:e})}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PopupModality.prototype),ge,this)||{},{closeOnWindowResize:!0,role:"alert"})}},{key:Me,value:function value(e){var n=!1;if("Escape"===e.key)this.close({canceled:"Escape"}),n=!0;return n||_get(_getPrototypeOf$1(PopupModality.prototype),"keydown",this)&&_get(_getPrototypeOf$1(PopupModality.prototype),"keydown",this).call(this,e)||!1}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(PopupModality.prototype),Ge,this)&&_get(_getPrototypeOf$1(PopupModality.prototype),Ge,this).call(this,e),this[ye]&&(Nn||this.addEventListener("blur",blurHandler$1.bind(this))),e.role){var n=this[Ze].role;this.setAttribute("role",n)}}},{key:He,value:function value(e){var n=this;(_get(_getPrototypeOf$1(PopupModality.prototype),He,this)&&_get(_getPrototypeOf$1(PopupModality.prototype),He,this).call(this,e),e.opened)&&(this.opened?("requestIdleCallback"in window?window.requestIdleCallback:setTimeout)((function(){n.opened&&function addEventListeners$1(e){e[Bn]=closeHandler.bind(e),Nn||window.addEventListener("blur",e[Bn]);window.addEventListener("resize",e[Bn]),window.addEventListener("scroll",e[Bn])}(n)})):function removeEventListeners$1(e){e[Bn]&&(Nn||window.removeEventListener("blur",e[Bn]),window.removeEventListener("resize",e[Bn]),window.removeEventListener("scroll",e[Bn]),e[Bn]=null)}(this))}},{key:"role",get:function get(){return _get(_getPrototypeOf$1(PopupModality.prototype),"role",this)}},{key:"role",set:function set(e){_set(_getPrototypeOf$1(PopupModality.prototype),"role",e,this,!0),this[Ue]||this[Ke]({role:e})}}]),PopupModality}(e);return n}(Mn)),zn=function(e){_inherits$1(Popup,Gn);var n=_createSuper$4(Popup);function Popup(){return _classCallCheck$1(this,Popup),n.apply(this,arguments)}return _createClass$1(Popup,[{key:Ge,value:function value(e){_get(_getPrototypeOf$1(Popup.prototype),Ge,this).call(this,e),e.backdropPartType&&(this[je].backdrop.addEventListener("mousedown",mousedownHandler.bind(this)),"PointerEvent"in window||this[je].backdrop.addEventListener("touchend",mousedownHandler))}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(Popup.prototype),ut,this);return e.content.append(j(Dn||(Dn=_taggedTemplateLiteral(["\n        <style>\n          :host {\n            display: grid;\n            grid-template: minmax(0, max-content) / minmax(0, max-content);\n          }\n        </style>\n      "])))),e}}]),Popup}();function mousedownHandler(e){return _mousedownHandler.apply(this,arguments)}function _mousedownHandler(){return(_mousedownHandler=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var n;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return(n=this)[Fe]=!0,o.next=4,n.close({canceled:"mousedown outside"});case 4:n[Fe]=!1,e.preventDefault(),e.stopPropagation();case 7:case"end":return o.stop()}}),_callee,this)})))).apply(this,arguments)}var qn,Hn=Symbol("resizeListener"),Un=DisabledMixin(FocusVisibleMixin(LanguageDirectionMixin(OpenCloseMixin(ue)))),Vn=function(e){_inherits$1(PopupSource,Un);var n=_createSuper$4(PopupSource);function PopupSource(){return _classCallCheck$1(this,PopupSource),n.apply(this,arguments)}return _createClass$1(PopupSource,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PopupSource.prototype),ge,this),{ariaHasPopup:"true",popupAlign:"start",popupDirection:"column",popupLayout:null,popupPartType:zn,sourcePartType:"div"})}},{key:Ie,get:function get(){return this[je].source}},{key:"frame",get:function get(){return this[je].popup.frame}},{key:"popupAlign",get:function get(){return this[Ze].popupAlign}},{key:"popupAlign",set:function set(e){this[Ke]({popupAlign:e})}},{key:"popupDirection",get:function get(){return this[Ze].popupDirection}},{key:"popupDirection",set:function set(e){this[Ke]({popupDirection:e})}},{key:"popupPartType",get:function get(){return this[Ze].popupPartType}},{key:"popupPartType",set:function set(e){this[Ke]({popupPartType:e})}},{key:Ge,value:function value(e){var n=this;(_get(_getPrototypeOf$1(PopupSource.prototype),Ge,this).call(this,e),renderParts$2(this[We],this[Ze],e),this[ye]||e.ariaHasPopup)&&(null===this[Ze].ariaHasPopup?this[Ie].removeAttribute("aria-haspopup"):this[Ie].setAttribute("aria-haspopup",this[Ze].ariaHasPopup));if(e.popupPartType&&(this[je].popup.addEventListener("open",(function(){n.opened||(n[Fe]=!0,n.open(),n[Fe]=!1)})),this[je].popup.addEventListener("close",(function(e){if(!n.closed){n[Fe]=!0;var o=e.detail.closeResult;n.close(o),n[Fe]=!1}}))),e.opened||e.popupLayout){var o=this[Ze],i=o.opened,r=o.popupLayout,a={height:"",left:"",opacity:"",top:"",width:""};if(i)if(r){var s=r.align,l=r.direction,c=r.rect,u="stretch"===s,d="above"===l||"below"===l,p=!d&&u?"minmax(0, 1fr)":"",h=d&&u?"minmax(0, 1fr)":"";Object.assign(a,{gridTemplateColumns:h,gridTemplateRows:p,height:"".concat(c.height,"px"),left:"".concat(c.left,"px"),top:"".concat(c.top,"px"),width:"".concat(c.width,"px")})}else a.opacity=0;else;Object.assign(this[je].popup.style,a)}if(e.opened){var g=this[Ze].opened;this[je].popup.opened=g}if(e.disabled&&"disabled"in this[je].source){var f=this[Ze].disabled;this[je].source.disabled=f}if(e.popupLayout){var v=this[Ze].popupLayout;if(v){var b=v.align,y=v.direction,m=this[je].popup;"position"in m&&(m.position=y),"align"in m&&(m.align=b)}}}},{key:He,value:function value(e){_get(_getPrototypeOf$1(PopupSource.prototype),He,this).call(this,e);var n=this[Ze].opened;e.opened?n?function waitThenRenderOpened(e){setTimeout((function(){e[Ze].opened&&(choosePopupLayout(e),function addEventListeners(e){var n=e;n[Hn]=function(){choosePopupLayout(e)},(window.visualViewport||window).addEventListener("resize",n[Hn])}(e))}))}(this):function removeEventListeners(e){var n=e;if(n[Hn]){(window.visualViewport||window).removeEventListener("resize",n[Hn]),n[Hn]=null}}(this):e.popupLayout&&this[Ze].opened&&!this[Ze].popupLayout&&choosePopupLayout(this)}},{key:"sourcePartType",get:function get(){return this[Ze].sourcePartType}},{key:"sourcePartType",set:function set(e){this[Ke]({sourcePartType:e})}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(PopupSource.prototype),Je,this).call(this,e,n);return(n.opened&&!e.opened||e.opened&&(n.popupAlign||n.popupDirection||n.rightToLeft))&&Object.assign(o,{popupLayout:null}),o}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PopupSource.prototype),ut,this);return e.content.append(j(Fn||(Fn=_taggedTemplateLiteral(['\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n\n        [part~="source"] {\n          height: 100%;\n          -webkit-tap-highlight-color: transparent;\n          touch-action: manipulation;\n          width: 100%;\n        }\n\n        [part~="popup"] {\n          outline: none;\n          position: fixed;\n        }\n      </style>\n      <div id="source" part="source">\n        <slot name="source"></slot>\n      </div>\n      <div id="popup" part="popup" exportparts="backdrop, frame" role="none">\n        <slot></slot>\n      </div>\n    '])))),renderParts$2(e.content,this[Ze]),e}}]),PopupSource}();function choosePopupLayout(e){var n=e[Ze],o=n.popupAlign,i=n.popupDirection,r=n.rightToLeft,a=e[je].source.getBoundingClientRect(),s=e[je].popup.getBoundingClientRect();e[je].popup.frame&&(s.height=e[je].popup[je].frame.scrollHeight,s.width=e[je].popup[je].frame.scrollWidth);var l=layoutPopup(a,s,function viewportBounds(){var e=window.visualViewport;return e?new DOMRect(e.offsetLeft,e.offsetTop,e.width,e.height):new DOMRect(0,0,window.innerWidth,window.innerHeight)}(),{align:o,direction:i,rightToLeft:r});e[Ke]({popupLayout:l})}function renderParts$2(e,n,o){if(!o||o.popupPartType){var i=n.popupPartType,r=e.getElementById("popup");r&&transmute(r,i)}if(!o||o.sourcePartType){var a=n.sourcePartType,s=e.getElementById("source");s&&transmute(s,a)}}var Kn="true"===new URLSearchParams(location.search).get("elixdebugpopup"),Wn=DelegateFocusMixin(KeyboardMixin(function PopupDragSelectMixin(e){var n=function(e){_inherits$1(PopupDragSelect,e);var n=_createSuper$4(PopupDragSelect);function PopupDragSelect(){return _classCallCheck$1(this,PopupDragSelect),n.apply(this,arguments)}return _createClass$1(PopupDragSelect,[{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf$1(PopupDragSelect.prototype),"connectedCallback",this).call(this),listenIfOpenAndConnected$1(this)}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PopupDragSelect.prototype),ge,this)||{},{dragSelect:!0})}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf$1(PopupDragSelect.prototype),"disconnectedCallback",this)&&_get(_getPrototypeOf$1(PopupDragSelect.prototype),"disconnectedCallback",this).call(this),listenIfOpenAndConnected$1(this)}},{key:He,value:function value(e){_get(_getPrototypeOf$1(PopupDragSelect.prototype),He,this).call(this,e),e.opened&&listenIfOpenAndConnected$1(this)}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(PopupDragSelect.prototype),Je,this).call(this,e,n);return n.opened&&e.opened&&Object.assign(o,{dragSelect:!0}),o}}]),PopupDragSelect}(e);return n}(Vn))),Yn=function(e){_inherits$1(PopupButton,Wn);var n=_createSuper$4(PopupButton);function PopupButton(){return _classCallCheck$1(this,PopupButton),n.apply(this,arguments)}return _createClass$1(PopupButton,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PopupButton.prototype),ge,this),{sourcePartType:"button"})}},{key:Me,value:function value(e){var n;switch(e.key){case" ":case"ArrowDown":case"ArrowUp":this.closed&&(this.open(),n=!0);break;case"Enter":this.opened||(this.open(),n=!0);break;case"Escape":this.opened&&(this.close({canceled:"Escape"}),n=!0)}if(!(n=_get(_getPrototypeOf$1(PopupButton.prototype),Me,this)&&_get(_getPrototypeOf$1(PopupButton.prototype),Me,this).call(this,e))&&this.opened&&!e.metaKey&&!e.altKey)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":case"PageDown":case"PageUp":case" ":n=!0}return n}},{key:Ge,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(PopupButton.prototype),Ge,this).call(this,e),this[ye]&&(Kn||this.addEventListener("blur",blurHandler.bind(this)),this[je].source.addEventListener("focus",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var o,i;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(o=ownEvent(n[je].popup,e),i=null!==n[Ze].popupHeight,o||!n.opened||!i){r.next=7;break}return n[Fe]=!0,r.next=6,n.close();case 6:n[Fe]=!1;case 7:case"end":return r.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}())),e.opened){var o=this[Ze].opened;this.toggleAttribute("opened",o)}e.sourcePartType&&this[je].source.addEventListener("mousedown",(function(e){if(n.disabled)e.preventDefault();else{var o=e;o.button&&0!==o.button||(setTimeout((function(){n.opened||(n[Fe]=!0,n.open(),n[Fe]=!1)})),e.stopPropagation())}}));e.popupPartType&&this[je].popup.removeAttribute("tabindex")}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PopupButton.prototype),ut,this);return e.content.append(j(qn||(qn=_taggedTemplateLiteral(['\n        <style>\n          [part~="source"] {\n            cursor: default;\n            outline: none;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            -webkit-user-select: none;\n            user-select: none;\n          }\n\n          :host([opened][focus-visible]) {\n            outline: none;\n          }\n        </style>\n      '])))),e}}]),PopupButton}();function blurHandler(e){return _blurHandler.apply(this,arguments)}function _blurHandler(){return(_blurHandler=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n,o;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(n=this,!((o=e.relatedTarget||document.activeElement)instanceof Element)||deepContains(n,o)){i.next=7;break}return n[Fe]=!0,i.next=6,n.close({canceled:"blur"});case 6:n[Fe]=!1;case 7:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}var Xn,Zn,Jn=Symbol("documentMousemoveListener");function handleMousemove(e){var n=this,o=n[Ze],i=o.hasHoveredOverItemSinceOpened;if(o.opened){var r=e.composedPath?e.composedPath()[0]:e.target,a=n.items;if(r&&r instanceof Node&&a){var s=indexOfItemContainingTarget(a,r),l=a[s],c=l&&!l.disabled?s:-1;(i||c>=0)&&c!==n[Ze].currentIndex&&(n[Fe]=!0,n[Ke]({currentIndex:c}),c>=0&&!i&&n[Ke]({hasHoveredOverItemSinceOpened:!0}),n[Fe]=!1)}}}function listenIfOpenAndConnected(e){e[Ze].opened&&e.isConnected?e[Jn]||(e[Jn]=handleMousemove.bind(e),document.addEventListener("mousemove",e[Jn])):e[Jn]&&(document.removeEventListener("mousemove",e[Jn]),e[Jn]=null)}function selectCurrentItemAndClose(e){return _selectCurrentItemAndClose.apply(this,arguments)}function _selectCurrentItemAndClose(){return(_selectCurrentItemAndClose=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n,o,i,r,a,s;return _regeneratorRuntime().wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:if(n=e[Fe],o=e[Ze].currentIndex>=0,!(i=e.items)){l.next=14;break}if(r=o?i[e[Ze].currentIndex]:void 0,a=e[Ze].popupList,!o||!("flashCurrentItem"in a)){l.next=9;break}return l.next=9,a.flashCurrentItem();case 9:return s=e[Fe],e[Fe]=n,l.next=13,e.close(r);case 13:e[Fe]=s;case 14:case"end":return l.stop()}}),_callee2)})))).apply(this,arguments)}var Qn,eo=function PopupListMixin(e){var n=function(e){_inherits$1(PopupList,e);var n=_createSuper$4(PopupList);function PopupList(){return _classCallCheck$1(this,PopupList),n.apply(this,arguments)}return _createClass$1(PopupList,[{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf$1(PopupList.prototype),"connectedCallback",this).call(this),listenIfOpenAndConnected(this)}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PopupList.prototype),ge,this)||{},{currentIndex:-1,hasHoveredOverItemSinceOpened:!1,popupList:null})}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf$1(PopupList.prototype),"disconnectedCallback",this)&&_get(_getPrototypeOf$1(PopupList.prototype),"disconnectedCallback",this).call(this),listenIfOpenAndConnected(this)}},{key:Me,value:function value(e){var n=!1;if("Enter"===e.key)this.opened&&(selectCurrentItemAndClose(this),n=!0);return n||_get(_getPrototypeOf$1(PopupList.prototype),Me,this)&&_get(_getPrototypeOf$1(PopupList.prototype),Me,this).call(this,e)||!1}},{key:Ge,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(PopupList.prototype),Ge,this)&&_get(_getPrototypeOf$1(PopupList.prototype),Ge,this).call(this,e),e.popupList){var o=this[Ze].popupList;o&&(o.addEventListener("mouseup",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var o;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(o=n[Ze].currentIndex,!(n[Ze].dragSelect||o>=0)){i.next=9;break}return e.stopPropagation(),n[Fe]=!0,i.next=6,selectCurrentItemAndClose(n);case 6:n[Fe]=!1,i.next=10;break;case 9:e.stopPropagation();case 10:case"end":return i.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}()),o.addEventListener("currentindexchange",(function(e){n[Fe]=!0;var o=e;n[Ke]({currentIndex:o.detail.currentIndex}),n[Fe]=!1})))}if(e.currentIndex||e.popupList){var i=this[Ze],r=i.currentIndex,a=i.popupList;a&&"currentIndex"in a&&(a.currentIndex=r)}}},{key:He,value:function value(e){if(_get(_getPrototypeOf$1(PopupList.prototype),He,this)&&_get(_getPrototypeOf$1(PopupList.prototype),He,this).call(this,e),e.opened){if(this[Ze].opened){var n=this[Ze].popupList;n.scrollCurrentItemIntoView&&setTimeout((function(){n.scrollCurrentItemIntoView()}))}listenIfOpenAndConnected(this)}}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(PopupList.prototype),Je,this)?_get(_getPrototypeOf$1(PopupList.prototype),Je,this).call(this,e,n):{};return n.opened&&e.opened&&Object.assign(o,{hasHoveredOverItemSinceOpened:!1}),o}}]),PopupList}(e);return n}(Yn),to=function(e){_inherits$1(MenuButton,eo);var n=_createSuper$4(MenuButton);function MenuButton(){return _classCallCheck$1(this,MenuButton),n.apply(this,arguments)}return _createClass$1(MenuButton,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(MenuButton.prototype),ge,this),{menuPartType:_n})}},{key:"items",get:function get(){var e=this[je]&&this[je].menu;return e?e.items:null}},{key:"menuPartType",get:function get(){return this[Ze].menuPartType}},{key:"menuPartType",set:function set(e){this[Ke]({menuPartType:e})}},{key:Ge,value:function value(e){var n=this;if(_get(_getPrototypeOf$1(MenuButton.prototype),Ge,this).call(this,e),renderParts$1(this[We],this[Ze],e),e.menuPartType&&(this[je].menu.addEventListener("blur",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var o;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(o=e.relatedTarget||document.activeElement,!n.opened||deepContains(n[je].menu,o)){i.next=7;break}return n[Fe]=!0,i.next=6,n.close();case 6:n[Fe]=!1;case 7:case"end":return i.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}()),this[je].menu.addEventListener("mousedown",(function(e){0===e.button&&n.opened&&(e.stopPropagation(),e.preventDefault())}))),e.opened){var o=this[Ze].opened;this[je].source.setAttribute("aria-expanded",o.toString())}}},{key:He,value:function value(e){_get(_getPrototypeOf$1(MenuButton.prototype),He,this).call(this,e),e.menuPartType&&this[Ke]({popupList:this[je].menu})}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(MenuButton.prototype),Je,this).call(this,e,n);return n.opened&&!e.opened&&Object.assign(o,{currentIndex:-1}),o}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(MenuButton.prototype),ut,this),n=e.content.querySelector("slot:not([name])");return n&&n.replaceWith(j(Xn||(Xn=_taggedTemplateLiteral(['\n        <div id="menu" part="menu">\n          <slot></slot>\n        </div>\n      '])))),renderParts$1(e.content,this[Ze]),e.content.append(j(Zn||(Zn=_taggedTemplateLiteral(['\n      <style>\n        [part~="menu"] {\n          max-height: 100%;\n        }\n      </style>\n    '])))),e}}]),MenuButton}();function renderParts$1(e,n,o){if(!o||o.menuPartType){var i=n.menuPartType,r=e.getElementById("menu");r&&transmute(r,i)}}var no,oo,io=DisabledMixin(ue),ro=function(e){_inherits$1(UpDownToggle,io);var n=_createSuper$4(UpDownToggle);function UpDownToggle(){return _classCallCheck$1(this,UpDownToggle),n.apply(this,arguments)}return _createClass$1(UpDownToggle,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(UpDownToggle.prototype),ge,this),{direction:"down"})}},{key:"direction",get:function get(){return this[Ze].direction}},{key:"direction",set:function set(e){this[Ke]({direction:e})}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(UpDownToggle.prototype),Ge,this).call(this,e),e.direction){var n=this[Ze].direction;this[je].downIcon.style.display="down"===n?"block":"none",this[je].upIcon.style.display="up"===n?"block":"none"}}},{key:ut,get:function get(){return I.html(Qn||(Qn=_taggedTemplateLiteral(['\n      <style>\n        :host {\n          display: inline-block;\n        }\n      </style>\n      <div id="downIcon" part="toggle-icon down-icon">\n        <slot name="down-icon"></slot>\n      </div>\n      <div id="upIcon" part="toggle-icon up-icon">\n        <slot name="up-icon"></slot>\n      </div>\n    '])))}}]),UpDownToggle}();function PopupToggleMixin(e){var n=function(e){_inherits$1(PopupToggle,e);var n=_createSuper$4(PopupToggle);function PopupToggle(){return _classCallCheck$1(this,PopupToggle),n.apply(this,arguments)}return _createClass$1(PopupToggle,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PopupToggle.prototype),ge,this)||{},{popupTogglePartType:ro})}},{key:"popupTogglePartType",get:function get(){return this[Ze].popupTogglePartType}},{key:"popupTogglePartType",set:function set(e){this[Ke]({popupTogglePartType:e})}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(PopupToggle.prototype),Ge,this).call(this,e),renderParts(this[We],this[Ze],e),e.popupDirection||e.popupTogglePartType){var n=this[Ze].popupDirection,o="above"===n||"column-reverse"===n?"up":"down",i=this[je].popupToggle;"direction"in i&&(i.direction=o)}if(e.disabled){var r=this[Ze].disabled;this[je].popupToggle.disabled=r}}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PopupToggle.prototype),ut,this),n=e.content.querySelector('[part~="source"]');return n&&n.append(j(no||(no=_taggedTemplateLiteral(['\n          <div\n            id="popupToggle"\n            part="popup-toggle"\n            exportparts="toggle-icon, down-icon, up-icon"\n            tabindex="-1"\n          ></div>\n      '])))),renderParts(e.content,this[Ze]),e.content.append(j(oo||(oo=_taggedTemplateLiteral(['\n      <style>\n        [part~="popup-toggle"] {\n          outline: none;\n        }\n\n        [part~="source"] {\n          align-items: center;\n          display: flex;\n        }\n      </style>\n    '])))),e}}]),PopupToggle}(e);return n}function renderParts(e,n,o){if(!o||o.popupTogglePartType){var i=n.popupTogglePartType,r=e.getElementById("popupToggle");r&&transmute(r,i)}}var ao,so,lo,co,uo,po,ho,go,fo=function(e){_inherits$1(PlainButton,PlainButtonMixin(qt));var n=_createSuper$4(PlainButton);function PlainButton(){return _classCallCheck$1(this,PlainButton),n.apply(this,arguments)}return _createClass$1(PlainButton)}(),vo=function(e){_inherits$1(PlainBorderButton,fo);var n=_createSuper$4(PlainBorderButton);function PlainBorderButton(){return _classCallCheck$1(this,PlainBorderButton),n.apply(this,arguments)}return _createClass$1(PlainBorderButton,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainBorderButton.prototype),ut,this);return e.content.append(j(ao||(ao=_taggedTemplateLiteral(['\n        <style>\n          [part~="button"] {\n            background: #eee;\n            border: 1px solid #ccc;\n            padding: 0.25em 0.5em;\n          }\n        </style>\n      '])))),e}}]),PlainBorderButton}(),bo=function(e){_inherits$1(PlainMenu,_n);var n=_createSuper$4(PlainMenu);function PlainMenu(){return _classCallCheck$1(this,PlainMenu),n.apply(this,arguments)}return _createClass$1(PlainMenu,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainMenu.prototype),ut,this);return e.content.append(j(so||(so=_taggedTemplateLiteral(["\n        <style>\n          :host ::slotted(*) {\n            padding: 0.25em 1em;\n          }\n          \n          :host ::slotted([current]) {\n            background: highlight;\n            color: highlighttext;\n          }\n\n          @media (pointer: coarse) {\n            ::slotted(*) {\n              padding: 1em;\n            }\n          }\n        </style>\n      "])))),e}}]),PlainMenu}(),yo=function(e){_inherits$1(PlainOpenCloseToggle,ro);var n=_createSuper$4(PlainOpenCloseToggle);function PlainOpenCloseToggle(){return _classCallCheck$1(this,PlainOpenCloseToggle),n.apply(this,arguments)}return _createClass$1(PlainOpenCloseToggle,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainOpenCloseToggle.prototype),ut,this),n=e.content.getElementById("downIcon"),o=j(lo||(lo=_taggedTemplateLiteral(['\n      <svg\n        id="downIcon"\n        part="toggle-icon down-icon"\n        xmlns="http://www.w3.org/2000/svg"\n        viewBox="0 0 10 5"\n      >\n        <path d="M 0 0 l5 5 5 -5 z" />\n      </svg>\n    ']))).firstElementChild;n&&o&&replace(n,o);var i=e.content.getElementById("upIcon"),r=j(co||(co=_taggedTemplateLiteral(['\n      <svg\n        id="upIcon"\n        part="toggle-icon up-icon"\n        xmlns="http://www.w3.org/2000/svg"\n        viewBox="0 0 10 5"\n      >\n        <path d="M 0 5 l5 -5 5 5 z" />\n      </svg>\n    ']))).firstElementChild;return i&&r&&replace(i,r),e.content.append(j(uo||(uo=_taggedTemplateLiteral(['\n        <style>\n          :host {\n            align-items: center;\n            display: inline-flex;\n            padding: 2px;\n          }\n\n          :host(:not([disabled])):hover {\n            background: #eee;\n          }\n\n          [part~="toggle-icon"] {\n            fill: currentColor;\n            height: 10px;\n            margin: 0.25em;\n            width: 10px;\n          }\n        </style>\n      '])))),e}}]),PlainOpenCloseToggle}(),mo=function(e){_inherits$1(PlainBackdrop,On);var n=_createSuper$4(PlainBackdrop);function PlainBackdrop(){return _classCallCheck$1(this,PlainBackdrop),n.apply(this,arguments)}return _createClass$1(PlainBackdrop)}(),_o=function(e){_inherits$1(PlainOverlayFrame,An);var n=_createSuper$4(PlainOverlayFrame);function PlainOverlayFrame(){return _classCallCheck$1(this,PlainOverlayFrame),n.apply(this,arguments)}return _createClass$1(PlainOverlayFrame,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainOverlayFrame.prototype),ut,this);return e.content.append(j(po||(po=_taggedTemplateLiteral(["\n        <style>\n          :host {\n            background: white;\n            border: 1px solid rgba(0, 0, 0, 0.2);\n            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);\n            box-sizing: border-box;\n          }\n        </style>\n      "])))),e}}]),PlainOverlayFrame}(),ko=function(e){_inherits$1(PlainPopup,zn);var n=_createSuper$4(PlainPopup);function PlainPopup(){return _classCallCheck$1(this,PlainPopup),n.apply(this,arguments)}return _createClass$1(PlainPopup,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PlainPopup.prototype),ge,this),{backdropPartType:mo,framePartType:_o})}}]),PlainPopup}(),xo=function(e){_inherits$1(PlainMenuButton,PopupToggleMixin(to));var n=_createSuper$4(PlainMenuButton);function PlainMenuButton(){return _classCallCheck$1(this,PlainMenuButton),n.apply(this,arguments)}return _createClass$1(PlainMenuButton,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PlainMenuButton.prototype),ge,this),{menuPartType:bo,popupPartType:ko,popupTogglePartType:yo,sourcePartType:vo})}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainMenuButton.prototype),ut,this);return e.content.append(j(ho||(ho=_taggedTemplateLiteral(['\n        <style>\n          [part~="menu"] {\n            background: window;\n            border: none;\n            padding: 0.5em 0;\n          }\n        </style>\n      '])))),e}}]),PlainMenuButton}(),wo=function(e){_inherits$1(SePlainBorderButton,fo);var n=_createSuper$4(SePlainBorderButton);function SePlainBorderButton(){return _classCallCheck$1(this,SePlainBorderButton),n.apply(this,arguments)}return _createClass$1(SePlainBorderButton,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(SePlainBorderButton.prototype),ut,this);return e.content.append(j(go||(go=_taggedTemplateLiteral(['\n        <style>\n          [part~="button"] {\n            background: var(--main-bg-color);\n            border: 1px solid #ccc;\n          }\n        </style>\n      '])))),e}}]),SePlainBorderButton}(),Co=function(e){_inherits$1(ElixMenuButton,xo);var n=_createSuper$4(ElixMenuButton);function ElixMenuButton(){return _classCallCheck$1(this,ElixMenuButton),n.apply(this,arguments)}return _createClass$1(ElixMenuButton,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(ElixMenuButton.prototype),ge,this),{sourcePartType:wo})}}]),ElixMenuButton}();customElements.define("elix-menu-button",Co);var So=document.createElement("template");So.innerHTML='\n  <style>\n  :host {\n    padding: 0px;\n  }\n  elix-menu-button::part(menu) {\n    background-color: var(--icon-bg-color) !important;\n    color: #fff;\n  }\n  elix-menu-button::part(popup-toggle) {\n    padding: 0.25em 0.30em !important\n  }\n  :host ::slotted([current]){\n    background-color: var(--icon-bg-color-hover) !important;\n    color: #fff;\n  }\n  :host ::slotted(*){\n    padding: 0.25em 1.25em 0.25em 0.25em !important;\n    margin: 2px;\n  }\n  </style>\n\n  <elix-menu-button id="MenuButton" aria-label="Main Menu">\n    <slot></slot>\n  </elix-menu-button>\n\n';var Po=function(e){_inherits$1(SeMenu,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeMenu);function SeMenu(){var e;return _classCallCheck$1(this,SeMenu),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(So.content.cloneNode(!0)),e.$menu=e._shadowRoot.querySelector("elix-menu-button"),e.$label=e.$menu.shadowRoot.querySelector("#popupToggle").shadowRoot,e.imgPath=svgEditor.configObj.curConfig.imgPath,e}return _createClass$1(SeMenu,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){var i=new Image;if(n!==o)switch(e){case"src":i.src=this.imgPath+"/"+o,i.width=24,i.height=24,this.$label.prepend(i);break;case"label":this.$label.prepend(o);break;default:console.error("unknown attribute: ".concat(e))}}},{key:"label",get:function get(){return this.getAttribute("label")},set:function set(e){this.setAttribute("label",e)}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}}],[{key:"observedAttributes",get:function get(){return["label","src"]}}]),SeMenu}();customElements.define("se-menu",Po);var $o=function(e){_inherits$1(ElixMenu,bo);var n=_createSuper$4(ElixMenu);function ElixMenu(){return _classCallCheck$1(this,ElixMenu),n.apply(this,arguments)}return _createClass$1(ElixMenu)}();customElements.define("elix-menu",$o);var Eo=document.createElement("template");Eo.innerHTML='\n  <style>\n  </style>\n  <elix-menu-item>\n    <div style="display:flex; align-items: center;">\n      <img src="logo.svg" alt="icon" style="display:none;" width="24"/>\n      <span style="margin-left: 7px;"></span>\n    </div>\n  </elix-menu-item>\n';var Lo=function(e){_inherits$1(SeMenuItem,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeMenuItem);function SeMenuItem(){var e;return _classCallCheck$1(this,SeMenuItem),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Eo.content.cloneNode(!0)),e.$img=e._shadowRoot.querySelector("img"),e.$label=e._shadowRoot.querySelector("span"),e.$menuitem=e._shadowRoot.querySelector("elix-menu-item"),e.$svg=e.$menuitem.shadowRoot.querySelector("#checkmark"),e.$svg.setAttribute("style","display: none;"),e.imgPath=svgEditor.configObj.curConfig.imgPath,e}return _createClass$1(SeMenuItem,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){var i="";if(n!==o)switch(e){case"src":this.$img.style.display="inline-block",this.$img.setAttribute("src",this.imgPath+"/"+o);break;case"label":i=this.getAttribute("shortcut"),this.$label.textContent="".concat(P(o)," ").concat(i?"(".concat(i,")"):"");break;default:console.error("unknown attribute: ".concat(e))}}},{key:"label",get:function get(){return this.getAttribute("label")},set:function set(e){this.setAttribute("label",e)}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this.getAttribute("shortcut");n&&document.addEventListener("keydown",(function(o){if("BODY"===o.target.nodeName){var i="".concat(o.metaKey?"meta+":"").concat(o.ctrlKey?"ctrl+":"").concat(o.key.toUpperCase());n===i&&(e.id&&document.getElementById(e.id).click(),o.preventDefault())}}))}}],[{key:"observedAttributes",get:function get(){return["label","src"]}}]),SeMenuItem}();customElements.define("se-menu-item",Lo);var Oo=document.createElement("template");Oo.innerHTML='\n<style>\n#select-container {\n  margin-top: 10px;\n  display: inline-block;\n}\n\n#select-container:hover {\n  background-color: var(--icon-bg-color-hover);\n}\n\n#select-container::part(value) {\n  background-color: var(--main-bg-color);\n}\n\n#select-container::part(popup-toggle) {\n  display: none;\n}\n::slotted(*) {\n  padding:0;\n  width:100%;\n}\n\n.closed {\n  display: none;\n}\n\n#options-container {\n  position: fixed;\n}\n\n</style>\n  <label>Label</label>\n  <div id="select-container" tabindex="0">\n    <div id="selected-value"></div>\n    <div id="options-container">\n      <slot></slot>\n    </div>\n  </div>\n\n';var Ao=function(e){_inherits$1(SeList,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeList);function SeList(){var e;return _classCallCheck$1(this,SeList),_defineProperty$1(_assertThisInitialized$1(e=n.call(this)),"toggleList",(function(n){e.isDropdownOpen?e.closeDropdown():(e.openDropdown(),e.setDropdownListPosition())})),_defineProperty$1(_assertThisInitialized$1(e),"updateSelectedValue",(function(n){Array.from(e.items).forEach((function(o){if(o.getAttribute("value")===n)if(o.setAttribute("selected",!0),o.hasAttribute("src")){for(;e.$selection.firstChild;)e.$selection.removeChild(e.$selection.firstChild);var i=document.createElement("img");i.src=e.imgPath+"/"+o.getAttribute("src"),i.style.height=o.getAttribute("img-height"),i.setAttribute("title",P(o.getAttribute("title"))),e.$selection.append(i)}else e.$selection.textContent=P(o.getAttribute("option"));else o.setAttribute("selected",!1)}))})),_defineProperty$1(_assertThisInitialized$1(e),"openDropdown",(function(){e.isDropdownOpen=!0,e.$optionsContainer.classList.remove("closed")})),_defineProperty$1(_assertThisInitialized$1(e),"closeDropdown",(function(){e.isDropdownOpen=!1,e.$optionsContainer.classList.add("closed")})),_defineProperty$1(_assertThisInitialized$1(e),"setDropdownListPosition",(function(){var n=window.innerHeight,o=e.$selection.getBoundingClientRect(),i=e.$optionsContainer.getBoundingClientRect();o.bottom+i.height>n?(e.$optionsContainer.style.top=o.top-i.height+"px",e.$optionsContainer.style.left=o.left+"px"):(e.$optionsContainer.style.top=o.bottom+"px",e.$optionsContainer.style.left=o.left+"px")})),e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Oo.content.cloneNode(!0)),e.$dropdown=e._shadowRoot.querySelector("#select-container"),e.$label=e._shadowRoot.querySelector("label"),e.$selection=e.$dropdown.querySelector("#selected-value"),e.items=e.querySelectorAll("se-list-item"),e.imgPath=svgEditor.configObj.curConfig.imgPath,e.$optionsContainer=e._shadowRoot.querySelector("#options-container"),e.$optionsContainer.classList.add("closed"),e.$selection.addEventListener("click",e.toggleList),e.updateSelectedValue(e.items[0].getAttribute("value")),e.isDropdownOpen=!1,e}return _createClass$1(SeList,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"title":this.$dropdown.setAttribute("title",P(o));break;case"label":this.$label.textContent=P(o);break;case"height":this.$dropdown.style.height=o;break;case"width":this.$dropdown.style.width=o;break;case"value":this.updateSelectedValue(o);break;default:console.error("unknown attribute: ".concat(e))}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"label",get:function get(){return this.getAttribute("label")},set:function set(e){this.setAttribute("label",e)}},{key:"width",get:function get(){return this.getAttribute("width")},set:function set(e){this.setAttribute("width",e)}},{key:"height",get:function get(){return this.getAttribute("height")},set:function set(e){this.setAttribute("height",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this;this.$dropdown.addEventListener("selectedindexchange",(function(e){var o;if(void 0!==(null==e||null===(o=e.detail)||void 0===o?void 0:o.selectedItem)){var i=e.detail.selectedItem,r=new CustomEvent("change",{detail:{value:i}});n.dispatchEvent(r),n.value=i,n.setAttribute("value",i)}})),this.$dropdown.addEventListener("focusout",(function(n){e.closeDropdown()})),window.addEventListener("mousedown",(function(n){e.isDropdownOpen&&(n.target.closest("se-list")||(n.stopPropagation(),e.closeDropdown()))}),{capture:!0})}}],[{key:"observedAttributes",get:function get(){return["label","width","height","title","value"]}}]),SeList}();customElements.define("se-list",Ao);var To=document.createElement("template");To.innerHTML='\n  <style>\n  [aria-label="option"]{\n    padding:0.25rem 0.125rem !important;\n    background-color: var(--icon-bg-color);\n  }\n  [aria-label="option"]:hover{\n    background-color: var(--icon-bg-color-hover);\n  }\n\n  .selected {\n    background-color: var(--icon-bg-color-hover);\n  }\n\n  </style>\n  <div aria-label="option">\n    <img alt="icon" />\n    <slot></slot>\n  </div>\n';var jo=function(e){_inherits$1(SeListItem,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeListItem);function SeListItem(){var e;return _classCallCheck$1(this,SeListItem),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(To.content.cloneNode(!0)),e.$menuitem=e._shadowRoot.querySelector("[aria-label=option]"),e.$img=e._shadowRoot.querySelector("img"),e.$img.setAttribute("style","display: none;"),e.imgPath=svgEditor.configObj.curConfig.imgPath,e.$menuitem.addEventListener("mousedown",(function(n){e.$menuitem.dispatchEvent(new CustomEvent("selectedindexchange",{bubbles:!0,composed:!0,detail:{selectedItem:e.getAttribute("value")}}))})),e}return _createClass$1(SeListItem,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"option":this.$menuitem.setAttribute("option",o),this.$menuitem.textContent=P(o);break;case"src":this.$img.setAttribute("style","display: block;"),this.$img.setAttribute("src",this.imgPath+"/"+o);break;case"title":this.$img.setAttribute("title",P(o));break;case"img-height":this.$img.setAttribute("height",o);break;case"selected":"true"===o?this.$menuitem.classList.add("selected"):this.$menuitem.classList.remove("selected");break;default:console.error("unknown attribute: ".concat(e))}}},{key:"option",get:function get(){return this.getAttribute("option")},set:function set(e){this.setAttribute("option",e)}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"imgHeight",get:function get(){return this.getAttribute("img-height")},set:function set(e){this.setAttribute("img-height",e)}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}}],[{key:"observedAttributes",get:function get(){return["option","src","title","img-height","selected"]}}]),SeListItem}();function toFixedNumeric$1(e,n){return void 0===n&&(n=0),Math.round(e*Math.pow(10,n))/Math.pow(10,n)}customElements.define("se-list-item",jo);var Io=_createClass$1((function ColorValuePicker(e,n,o,i){_classCallCheck$1(this,ColorValuePicker);var r=this,a=e.querySelectorAll("td.Text input");function keyDown(e){if(""!==e.target.value||e.target===g||(!o||e.target===o)&&o){if(!validateKey(e))return e;switch(e.target){case s:switch(e.keyCode){case 38:return s.value=setValueInRange.call(r,1+(s.value<<0),0,255),n.val("r",s.value,e.target),!1;case 40:return s.value=setValueInRange.call(r,(s.value<<0)-1,0,255),n.val("r",s.value,e.target),!1}break;case l:switch(e.keyCode){case 38:return l.value=setValueInRange.call(r,1+(l.value<<0),0,255),n.val("g",l.value,e.target),!1;case 40:return l.value=setValueInRange.call(r,(l.value<<0)-1,0,255),n.val("g",l.value,e.target),!1}break;case c:switch(e.keyCode){case 38:return c.value=setValueInRange.call(r,1+(c.value<<0),0,255),n.val("b",c.value,e.target),!1;case 40:return c.value=setValueInRange.call(r,(c.value<<0)-1,0,255),n.val("b",c.value,e.target),!1}break;case u:switch(e.keyCode){case 38:return u.value=setValueInRange.call(r,Number.parseFloat(u.value)+1,0,100),n.val("a",toFixedNumeric$1(255*u.value/100,i),e.target),!1;case 40:return u.value=setValueInRange.call(r,Number.parseFloat(u.value)-1,0,100),n.val("a",toFixedNumeric$1(255*u.value/100,i),e.target),!1}break;case d:switch(e.keyCode){case 38:return d.value=setValueInRange.call(r,1+(d.value<<0),0,360),n.val("h",d.value,e.target),!1;case 40:return d.value=setValueInRange.call(r,(d.value<<0)-1,0,360),n.val("h",d.value,e.target),!1}break;case p:switch(e.keyCode){case 38:return p.value=setValueInRange.call(r,1+(p.value<<0),0,100),n.val("s",p.value,e.target),!1;case 40:return p.value=setValueInRange.call(r,(p.value<<0)-1,0,100),n.val("s",p.value,e.target),!1}break;case h:switch(e.keyCode){case 38:return h.value=setValueInRange.call(r,1+(h.value<<0),0,100),n.val("v",h.value,e.target),!1;case 40:return h.value=setValueInRange.call(r,(h.value<<0)-1,0,100),n.val("v",h.value,e.target),!1}}}}function keyUp(e){if(""!==e.target.value||e.target===g||(!o||e.target===o)&&o){if(!validateKey(e))return e;switch(e.target){case s:s.value=setValueInRange.call(r,s.value,0,255),n.val("r",s.value,e.target);break;case l:l.value=setValueInRange.call(r,l.value,0,255),n.val("g",l.value,e.target);break;case c:c.value=setValueInRange.call(r,c.value,0,255),n.val("b",c.value,e.target);break;case u:u.value=setValueInRange.call(r,u.value,0,100),n.val("a",toFixedNumeric$1(255*u.value/100,i),e.target);break;case d:d.value=setValueInRange.call(r,d.value,0,360),n.val("h",d.value,e.target);break;case p:p.value=setValueInRange.call(r,p.value,0,100),n.val("s",p.value,e.target);break;case h:h.value=setValueInRange.call(r,h.value,0,100),n.val("v",h.value,e.target);break;case g:g.value=g.value.replace(/[^a-fA-F\d]/g,"").toLowerCase().substring(0,6),o&&o.val(g.value),n.val("hex",""!==g.value?g.value:null,e.target);break;case o:o.value=o.value.replace(/[^a-fA-F\d]/g,"").toLowerCase().substring(0,6),g.val(o.value),n.val("hex",""!==o.value?o.value:null,e.target);break;case f:f.value=f.value.replace(/[^a-fA-F\d]/g,"").toLowerCase().substring(0,2),n.val("a",f.value?Number.parseInt(f.value,16):null,e.target)}}}function blur(e){if(n.value)switch(e.target){case s:n.value="r",s.value=n.value;break;case l:n.value="g",l.value=n.value;break;case c:n.value="b",c.value=n.value;break;case u:n.value="a",u.value=toFixedNumeric$1(100*n.value/255,i);break;case d:n.value="h",d.value=n.value;break;case p:n.value="s",p.value=n.value;break;case h:n.value="v",h.value=n.value;break;case g:case o:n.value="hex",g.value=n.value,o.value=n.value;break;case f:n.value="ahex",f.value=n.value.substring(6)}}function validateKey(e){switch(e.keyCode){case 9:case 16:case 29:case 37:case 39:return!1;case"c".charCodeAt():case"v".charCodeAt():if(e.ctrlKey)return!1}return!0}function setValueInRange(e,n,o){return""===e||isNaN(e)?n:e>o?o:e<n?n:e}function colorChanged(e,n){var r=e.val("all");n!==s&&(s.value=r?r.r:""),n!==l&&(l.value=r?r.g:""),n!==c&&(c.value=r?r.b:""),u&&n!==u&&(u.value=r?toFixedNumeric$1(100*r.a/255,i):""),n!==d&&(d.value=r?r.h:""),n!==p&&(p.value=r?r.s:""),n!==h&&(h.value=r?r.v:""),n!==g&&(o&&n!==o||!o)&&(g.value=r?r.hex:""),o&&n!==o&&n!==g&&(o.value=r?r.hex:""),f&&n!==f&&(f.value=r?r.ahex.substring(6):"")}var s=a[3],l=a[4],c=a[5],u=a.length>7?a[6]:null,d=a[0],p=a[1],h=a[2],g=a[a.length>7?7:6],f=a.length>7?a[8]:null;Object.assign(r,{destroy:function destroy(){s.removeEventListener("keyup",keyUp),l.removeEventListener("keyup",keyUp),c.removeEventListener("keyup",keyUp),d.removeEventListener("keyup",keyUp),p.removeEventListener("keyup",keyUp),h.removeEventListener("keyup",keyUp),g.removeEventListener("keyup",keyUp),s.removeEventListener("blur",blur),l.removeEventListener("blur",blur),c.removeEventListener("blur",blur),d.removeEventListener("blur",blur),p.removeEventListener("blur",blur),h.removeEventListener("blur",blur),g.removeEventListener("blur",blur),s.removeEventListener("keydown",keyDown),l.removeEventListener("keydown",keyDown),c.removeEventListener("keydown",keyDown),d.removeEventListener("keydown",keyDown),p.removeEventListener("keydown",keyDown),h.removeEventListener("keydown",keyDown),null!==u&&(u.removeEventListener("keyup",keyUp),u.removeEventListener("blur",blur),u.removeEventListener("keydown",keyDown)),null!==f&&(f.removeEventListener("keyup",keyUp),f.removeEventListener("blur",blur)),null!==o&&(o.removeEventListener("keyup",keyUp),o.removeEventListener("blur",blur)),n.unbind(colorChanged),s=null,l=null,c=null,u=null,d=null,p=null,h=null,g=null,f=null}}),s.addEventListener("keyup",keyUp),l.addEventListener("keyup",keyUp),c.addEventListener("keyup",keyUp),d.addEventListener("keyup",keyUp),p.addEventListener("keyup",keyUp),h.addEventListener("keyup",keyUp),g.addEventListener("keyup",keyUp),s.addEventListener("blur",blur),l.addEventListener("blur",blur),c.addEventListener("blur",blur),d.addEventListener("blur",blur),p.addEventListener("blur",blur),h.addEventListener("blur",blur),g.addEventListener("blur",blur),s.addEventListener("keydown",keyDown),l.addEventListener("keydown",keyDown),c.addEventListener("keydown",keyDown),d.addEventListener("keydown",keyDown),p.addEventListener("keydown",keyDown),h.addEventListener("keydown",keyDown),null!==u&&(u.addEventListener("keyup",keyUp),u.addEventListener("blur",blur),u.addEventListener("keydown",keyDown)),null!==f&&(f.addEventListener("keyup",keyUp),f.addEventListener("blur",blur)),null!==o&&(o.addEventListener("keyup",keyUp),o.addEventListener("blur",blur)),n.bind(colorChanged)}));function findPos(e){var n=0,o=0;if(e.offsetParent){do{n+=e.offsetLeft,o+=e.offsetTop}while(e=e.offsetParent);return{left:n,top:o}}return{left:n,top:o}}function isObject(e){return e&&"object"===_typeof$1(e)&&!Array.isArray(e)}function mergeDeep(e,n){var o=Object.assign({},e);return isObject(e)&&isObject(n)&&Object.keys(n).forEach((function(i){isObject(n[i])&&i in e?o[i]=mergeDeep(e[i],n[i]):Object.assign(o,_defineProperty$1({},i,n[i]))})),o}var Ro=function isNullish(e){return null==e},Mo=_createClass$1((function Slider(e,n){_classCallCheck$1(this,Slider);var o,i,r=this;function fireChangeEvents(e){f.forEach((function(n){n.call(r,r,e)}))}function mouseDown(n){var a=findPos(e);o={l:0|a.left,t:0|a.top},clearTimeout(i),i=setTimeout((function(){setValuesFromMousePosition.call(r,n)}),0),document.addEventListener("mousemove",mouseMove),document.addEventListener("mouseup",mouseUp),n.preventDefault()}function mouseMove(e){return clearTimeout(i),i=setTimeout((function(){setValuesFromMousePosition.call(r,e)}),0),e.stopPropagation(),e.preventDefault(),!1}function mouseUp(e){return document.removeEventListener("mousemove",mouseMove),document.removeEventListener("mouseup",mouseUp),e.stopPropagation(),e.preventDefault(),!1}function setValuesFromMousePosition(n){var i=e.w,a=e.h,s=n.pageX-o.l,c=n.pageY-o.t;s<0?s=0:s>i&&(s=i),c<0?c=0:c>a&&(c=a),val.call(r,"xy",{x:s/i*u+l,y:c/a*h+d})}function val(e,n,o){if(!(void 0!==n))switch(Ro(e)&&(e="xy"),e.toLowerCase()){case"x":return a;case"y":return s;default:return{x:a,y:s}}if(Ro(o)||o!==r){var i,u,h=!1;switch(Ro(e)&&(e="xy"),e.toLowerCase()){case"x":i=n&&(n.x&&0|n.x||0|n)||0;break;case"y":u=n&&(n.y&&0|n.y||0|n)||0;break;default:i=n&&n.x&&0|n.x||0,u=n&&n.y&&0|n.y||0}Ro(i)||(i<l?i=l:i>c&&(i=c),a!==i&&(a=i,h=!0)),Ro(u)||(u<d?u=d:u>p&&(u=p),s!==u&&(s=u,h=!0)),h&&fireChangeEvents.call(r,o||r)}}function bind(e){"function"==typeof e&&f.push(e)}var a=0,s=0,l=0,c=100,u=100,d=0,p=100,h=100,g=e.querySelector("img"),f=[];Object.assign(r,{val:val,range:function range(e,n){var o,i,r,a;if(!(void 0!==n))switch(Ro(e)&&(e="all"),e.toLowerCase()){case"minx":return l;case"maxx":return c;case"rangex":return{minX:l,maxX:c,rangeX:u};case"miny":return d;case"maxy":return p;case"rangey":return{minY:d,maxY:p,rangeY:h};default:return{minX:l,maxX:c,rangeX:u,minY:d,maxY:p,rangeY:h}}switch(Ro(e)&&(e="all"),e.toLowerCase()){case"minx":o=n&&(n.minX&&0|n.minX||0|n)||0;break;case"maxx":i=n&&(n.maxX&&0|n.maxX||0|n)||0;break;case"rangex":o=n&&n.minX&&0|n.minX||0,i=n&&n.maxX&&0|n.maxX||0;break;case"miny":r=n&&(n.minY&&0|n.minY||0|n)||0;break;case"maxy":a=n&&(n.maxY&&0|n.maxY||0|n)||0;break;case"rangey":r=n&&n.minY&&0|n.minY||0,a=n&&n.maxY&&0|n.maxY||0;break;default:o=n&&n.minX&&0|n.minX||0,i=n&&n.maxX&&0|n.maxX||0,r=n&&n.minY&&0|n.minY||0,a=n&&n.maxY&&0|n.maxY||0}Ro(o)||l===o||(u=c-(l=o)),Ro(i)||c===i||(u=(c=i)-l),Ro(r)||d===r||(h=p-(d=r)),Ro(a)||p===a||(h=(p=a)-d)},bind:bind,unbind:function unbind(e){if("function"==typeof e)for(var n;n=f.includes(e);)f.splice(n,1)},destroy:function destroy(){document.removeEventListener("mousemove",mouseMove),document.removeEventListener("mouseup",mouseUp),e.removeEventListener("mousedown",mouseDown),e=null,g=null,f=null}}),g.src=n.arrow&&n.arrow.image,g.w=n.arrow&&n.arrow.width||parseFloat(getComputedStyle(g,null).width.replace("px","")),g.h=n.arrow&&n.arrow.height||parseFloat(getComputedStyle(g,null).height.replace("px","")),e.w=n.map&&n.map.width||parseFloat(getComputedStyle(e,null).width.replace("px","")),e.h=n.map&&n.map.height||parseFloat(getComputedStyle(e,null).height.replace("px","")),e.addEventListener("mousedown",mouseDown),bind.call(r,(function draw(){var n=e.w,o=e.h,i=g.w,r=g.h,l=0,d=0;setTimeout((function(){u>0&&(l=a===c?n:a/u*n|0),h>0&&(d=s===p?o:s/h*o|0),i>=n?l=(n>>1)-(i>>1):l-=i>>1,r>=o?d=(o>>1)-(r>>1):d-=r>>1,g.style.left=l+"px",g.style.top=d+"px"}))}))}));function toFixedNumeric(e,n){return void 0===n&&(n=0),Math.round(e*Math.pow(10,n))/Math.pow(10,n)}var Do=function isNullish(e){return null==e},Bo={List:[],Color:function Color(e){var n,o,i,r,a,s,l,c=this;function fireChangeEvents(e){for(var n=0;n<u.length;n++)u[n].call(c,c,e)}function val(e,u,d){var p=Boolean(u);if(p&&""===u.ahex&&(u.ahex="00000000"),!p){var h;if((Do(e)||""===e)&&(e="all"),Do(n))return null;switch(e.toLowerCase()){case"ahex":return Go.rgbaToHex({r:n,g:o,b:i,a:r});case"hex":return val("ahex").substring(0,6);case"all":return{r:n,g:o,b:i,a:r,h:a,s:s,v:l,hex:val.call(c,"hex"),ahex:val.call(c,"ahex")};default:h={};var g=e.length;_toConsumableArray(e).forEach((function(e){switch(e){case"r":1===g?h=n:h.r=n;break;case"g":1===g?h=o:h.g=o;break;case"b":1===g?h=i:h.b=i;break;case"a":1===g?h=r:h.a=r;break;case"h":1===g?h=a:h.h=a;break;case"s":1===g?h=s:h.s=s;break;case"v":1===g?h=l:h.v=l}}))}return"object"!==_typeof$1(h)||Object.keys(h).length?h:val.call(c,"all")}if(Do(d)||d!==c){Do(e)&&(e="");var f=!1;if(Do(u))return Do(n)||(n=null,f=!0),Do(o)||(o=null,f=!0),Do(i)||(i=null,f=!0),Do(r)||(r=null,f=!0),Do(a)||(a=null,f=!0),Do(s)||(s=null,f=!0),Do(l)||(l=null,f=!0),void(f&&fireChangeEvents.call(c,d||c));switch(e.toLowerCase()){case"ahex":case"hex":var v=Go.hexToRgba(u&&(u.ahex||u.hex)||u||"none");val.call(c,"rgba",{r:v.r,g:v.g,b:v.b,a:"ahex"===e?v.a:Do(r)?255:r},d);break;default:if(u&&(!Do(u.ahex)||!Do(u.hex)))return void val.call(c,"ahex",u.ahex||u.hex||"00000000",d);var b={},y=!1,m=!1;if(void 0===u.r||e.includes("r")||(e+="r"),void 0===u.g||e.includes("g")||(e+="g"),void 0===u.b||e.includes("b")||(e+="b"),void 0===u.a||e.includes("a")||(e+="a"),void 0===u.h||e.includes("h")||(e+="h"),void 0===u.s||e.includes("s")||(e+="s"),void 0===u.v||e.includes("v")||(e+="v"),_toConsumableArray(e).forEach((function(e){switch(e){case"r":if(m)return;y=!0,b.r=u.r&&0|u.r||0|u||0,b.r<0?b.r=0:b.r>255&&(b.r=255),n!==b.r&&(n=b.r,f=!0);break;case"g":if(m)return;y=!0,b.g=u&&u.g&&0|u.g||u&&0|u||0,b.g<0?b.g=0:b.g>255&&(b.g=255),o!==b.g&&(o=b.g,f=!0);break;case"b":if(m)return;y=!0,b.b=u&&u.b&&0|u.b||u&&0|u||0,b.b<0?b.b=0:b.b>255&&(b.b=255),i!==b.b&&(i=b.b,f=!0);break;case"a":b.a=u&&!Do(u.a)?0|u.a:0|u,b.a<0?b.a=0:b.a>255&&(b.a=255),r!==b.a&&(r=b.a,f=!0);break;case"h":if(y)return;m=!0,b.h=u&&u.h&&0|u.h||u&&0|u||0,b.h<0?b.h=0:b.h>360&&(b.h=360),a!==b.h&&(a=b.h,f=!0);break;case"s":if(y)return;m=!0,b.s=Do(u.s)?0|u:0|u.s,b.s<0?b.s=0:b.s>100&&(b.s=100),s!==b.s&&(s=b.s,f=!0);break;case"v":if(y)return;m=!0,b.v=Do(u.v)?0|u:0|u.v,b.v<0?b.v=0:b.v>100&&(b.v=100),l!==b.v&&(l=b.v,f=!0)}})),f){if(y){n=n||0,o=o||0,i=i||0;var k=Go.rgbToHsv({r:n,g:o,b:i});a=k.h,s=k.s,l=k.v}else if(m){a=a||0,s=Do(s)?100:s,l=Do(l)?100:l;var x=Go.hsvToRgb({h:a,s:s,v:l});n=x.r,o=x.g,i=x.b}r=Do(r)?255:r,fireChangeEvents.call(c,d||c)}}}}var u=[];Object.assign(c,{val:val,bind:function bind(e){"function"==typeof e&&u.push(e)},unbind:function unbind(e){if("function"==typeof e)for(var n;n=u.includes(e);)u.splice(n,1)},destroy:function destroy(){u=null}}),e&&(Do(e.ahex)?Do(e.hex)?Do(e.r)||Do(e.g)||Do(e.b)?Do(e.h)||Do(e.s)||Do(e.v)||val("hsv"+(Do(e.a)?"":"a"),e):val("rgb"+(Do(e.a)?"":"a"),e):val((Do(e.a)?"":"a")+"hex",Do(e.a)?e:{ahex:e.hex+Go.intToHex(e.a)}):val("ahex",e))},ColorMethods:{hexToRgba:function hexToRgba(e){if(""===e||"none"===e)return{r:null,g:null,b:null,a:null};var n="00",o="00",i="00",r="255";return 6===(e=this.validateHex(e)).length&&(e+="ff"),e.length>6?(n=e.substring(0,2),o=e.substring(2,4),i=e.substring(4,6),r=e.substring(6,e.length)):(e.length>4&&(n=e.substring(4,e.length),e=e.substring(0,4)),e.length>2&&(o=e.substring(2,e.length),e=e.substring(0,2)),e.length>0&&(i=e.substring(0,e.length))),{r:this.hexToInt(n),g:this.hexToInt(o),b:this.hexToInt(i),a:this.hexToInt(r)}},validateHex:function validateHex(e){return(e=e.toLowerCase().replace(/[^a-f\d]/g,"")).length>8&&(e=e.substring(0,8)),e},rgbaToHex:function rgbaToHex(e){return this.intToHex(e.r)+this.intToHex(e.g)+this.intToHex(e.b)+this.intToHex(e.a)},intToHex:function intToHex(e){var n=(0|e).toString(16);return 1===n.length&&(n="0"+n),n.toLowerCase()},hexToInt:function hexToInt(e){return Number.parseInt(e,16)},rgbToHsv:function rgbToHsv(e){var n,o=e.r/255,i=e.g/255,r=e.b/255,a={h:0,s:0,v:0},s=0,l=0;return o>=i&&o>=r?(l=o,s=i>r?r:i):i>=r&&i>=o?(l=i,s=o>r?r:o):(l=r,s=i>o?o:i),a.v=l,a.s=l?(l-s)/l:0,a.s?(n=l-s,a.h=o===l?(i-r)/n:i===l?2+(r-o)/n:4+(o-i)/n,a.h=Number.parseInt(60*a.h),a.h<0&&(a.h+=360)):a.h=0,a.s=100*a.s|0,a.v=100*a.v|0,a},hsvToRgb:function hsvToRgb(e){var n={r:0,g:0,b:0,a:100},o=e.h,i=e.s,r=e.v;if(0===i)n.r=n.g=n.b=0===r?0:255*r/100|0;else{360===o&&(o=0);var a=0|(o/=60),s=o-a,l=(r/=100)*(1-(i/=100)),c=r*(1-i*s),u=r*(1-i*(1-s));switch(a){case 0:n.r=r,n.g=u,n.b=l;break;case 1:n.r=c,n.g=r,n.b=l;break;case 2:n.r=l,n.g=r,n.b=u;break;case 3:n.r=l,n.g=c,n.b=r;break;case 4:n.r=u,n.g=l,n.b=r;break;case 5:n.r=r,n.g=l,n.b=c}n.r=255*n.r|0,n.g=255*n.g|0,n.b=255*n.b|0}return n}}},No=Bo.Color,Fo=Bo.List,Go=Bo.ColorMethods;function jPickerMethod(e,n,o,i,r,a){var s=mergeDeep({},zo);s=mergeDeep(s,n);var l=e,c=s;if("input"===l.nodeName.toLowerCase()&&(Object.assign(c,{window:{bindToInput:!0,expandable:!0,input:l}}),""===l.value?(c.color.active=new No({hex:null}),c.color.current=new No({hex:null})):Go.validateHex(l.value)&&(c.color.active=new No({hex:l.value,a:c.color.active.val("a")}),c.color.current=new No({hex:l.value,a:c.color.active.val("a")}))),c.window.expandable){var u=document.createElement("span");u.classList.add("jPicker"),u.innerHTML='<span class="Icon" id="jq-ae-Icon">\n      <span class="Color" id="jq-ae-Color">&nbsp;</span>\n      <span class="Alpha" id="jq-ae-Alpha">&nbsp;</span>\n      <span class="Image" id="jq-ae-Image" title="'.concat(a.t("config.open_color_picker"),'">&nbsp;</span>\n      <span class="Container" id="Container">&nbsp;</span>\n    </span>'),l.insertAdjacentElement("afterend",u)}else c.window.liveUpdate=!1;var d=Number.parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters;function setColorMode(e){var n,o,i=h.active,r=i.val("hex");switch(c.color.mode=e,e){case"h":if(setTimeout((function(){setBG.call(l,m,"transparent"),setImgLoc.call(l,x,0),setAlpha.call(l,x,100),setImgLoc.call(l,w,260),setAlpha.call(l,w,100),setBG.call(l,k,"transparent"),setImgLoc.call(l,S,0),setAlpha.call(l,S,100),setImgLoc.call(l,P,260),setAlpha.call(l,P,100),setImgLoc.call(l,$,260),setAlpha.call(l,$,100),setImgLoc.call(l,E,260),setAlpha.call(l,E,100),setImgLoc.call(l,O,260),setAlpha.call(l,O,100)}),0),A.range("all",{minX:0,maxX:100,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:360}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("s"),y:100-i.val("v")},A),T.val("y",360-i.val("h"),T);break;case"s":if(setTimeout((function(){setBG.call(l,m,"transparent"),setImgLoc.call(l,x,-260),setImgLoc.call(l,w,-520),setImgLoc.call(l,S,-260),setImgLoc.call(l,P,-520),setImgLoc.call(l,O,260),setAlpha.call(l,O,100)}),0),A.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:100}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("h"),y:100-i.val("v")},A),T.val("y",100-i.val("s"),T);break;case"v":if(setTimeout((function(){setBG.call(l,m,"000000"),setImgLoc.call(l,x,-780),setImgLoc.call(l,w,260),setBG.call(l,k,r),setImgLoc.call(l,S,-520),setImgLoc.call(l,P,260),setAlpha.call(l,P,100),setImgLoc.call(l,O,260),setAlpha.call(l,O,100)}),0),A.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:100}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("h"),y:100-i.val("s")},A),T.val("y",100-i.val("v"),T);break;case"r":if(n=-1040,o=-780,A.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("b"),y:255-i.val("g")},A),T.val("y",255-i.val("r"),T);break;case"g":if(n=-1560,o=-1820,A.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("b"),y:255-i.val("r")},A),T.val("y",255-i.val("g"),T);break;case"b":if(n=-2080,o=-2860,A.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("r"),y:255-i.val("g")},A),T.val("y",255-i.val("b"),T);break;case"a":if(setTimeout((function(){setBG.call(l,m,"transparent"),setImgLoc.call(l,x,-260),setImgLoc.call(l,w,-520),setImgLoc.call(l,S,260),setImgLoc.call(l,P,260),setAlpha.call(l,P,100),setImgLoc.call(l,O,0),setAlpha.call(l,O,100)}),0),A.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:255}),Do(i.val("ahex")))break;A.val("xy",{x:i.val("h"),y:100-i.val("v")},A),T.val("y",255-i.val("a"),T);break;default:throw new Error("Invalid Mode")}switch(e){case"h":break;case"s":case"v":case"a":setTimeout((function(){setAlpha.call(l,x,100),setAlpha.call(l,S,100),setImgLoc.call(l,$,260),setAlpha.call(l,$,100),setImgLoc.call(l,E,260),setAlpha.call(l,E,100)}),0);break;case"r":case"g":case"b":setTimeout((function(){setBG.call(l,m,"transparent"),setBG.call(l,k,"transparent"),setAlpha.call(l,S,100),setAlpha.call(l,x,100),setImgLoc.call(l,x,n),setImgLoc.call(l,w,n-260),setImgLoc.call(l,S,o-780),setImgLoc.call(l,P,o-520),setImgLoc.call(l,$,o),setImgLoc.call(l,E,o-260),setImgLoc.call(l,O,260),setAlpha.call(l,O,100)}),0)}Do(i.val("ahex"))||activeColorChanged.call(l,i)}function activeColorChanged(e,n){(Do(n)||n!==T&&n!==A)&&positionMapAndBarArrows.call(l,e,n),setTimeout((function(){updatePreview.call(l,e),updateMapVisuals.call(l,e),updateBarVisuals.call(l,e)}),0)}function mapValueChanged(e,n){var o=h.active;if(n===A||!Do(o.val())){var i=e.val("all");switch(c.color.mode){case"h":o.val("sv",{s:i.x,v:100-i.y},n);break;case"s":case"a":o.val("hv",{h:i.x,v:100-i.y},n);break;case"v":o.val("hs",{h:i.x,s:100-i.y},n);break;case"r":o.val("gb",{g:255-i.y,b:i.x},n);break;case"g":o.val("rb",{r:255-i.y,b:i.x},n);break;case"b":o.val("rg",{r:i.x,g:255-i.y},n)}}}function colorBarValueChanged(e,n){var o=h.active;if(n===T||!Do(o.val()))switch(c.color.mode){case"h":o.val("h",{h:360-e.val("y")},n);break;case"s":o.val("s",{s:100-e.val("y")},n);break;case"v":o.val("v",{v:100-e.val("y")},n);break;case"r":o.val("r",{r:255-e.val("y")},n);break;case"g":o.val("g",{g:255-e.val("y")},n);break;case"b":o.val("b",{b:255-e.val("y")},n);break;case"a":o.val("a",255-e.val("y"),n)}}function positionMapAndBarArrows(e,n){if(n!==A)switch(c.color.mode){case"h":var o=e.val("sv");A.val("xy",{x:Do(o)?100:o.s,y:100-(Do(o)?100:o.v)},n);break;case"s":case"a":var i=e.val("hv");A.val("xy",{x:i&&i.h||0,y:100-(Do(i)?100:i.v)},n);break;case"v":var r=e.val("hs");A.val("xy",{x:r&&r.h||0,y:100-(Do(r)?100:r.s)},n);break;case"r":var a=e.val("bg");A.val("xy",{x:a&&a.b||0,y:255-(a&&a.g||0)},n);break;case"g":var s=e.val("br");A.val("xy",{x:s&&s.b||0,y:255-(s&&s.r||0)},n);break;case"b":var l=e.val("rg");A.val("xy",{x:l&&l.r||0,y:255-(l&&l.g||0)},n)}if(n!==T)switch(c.color.mode){case"h":T.val("y",360-(e.val("h")||0),n);break;case"s":var u=e.val("s");T.val("y",100-(Do(u)?100:u),n);break;case"v":var d=e.val("v");T.val("y",100-(Do(d)?100:d),n);break;case"r":T.val("y",255-(e.val("r")||0),n);break;case"g":T.val("y",255-(e.val("g")||0),n);break;case"b":T.val("y",255-(e.val("b")||0),n);break;case"a":var p=e.val("a");T.val("y",255-(Do(p)?255:p),n)}}function updatePreview(e){try{var n=e.val("all");I.style.backgroundColor=n&&"#"+n.hex||"transparent",setAlpha.call(l,I,n&&toFixedNumeric(100*n.a/255,4)||0)}catch(e){}}function updateMapVisuals(e){switch(c.color.mode){case"h":setBG.call(l,m,new No({h:e.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":var n=e.val("s");setAlpha.call(l,w,100-(Do(n)?100:n));break;case"v":var o=e.val("v");setAlpha.call(l,x,Do(o)?100:o);break;case"r":setAlpha.call(l,w,toFixedNumeric((e.val("r")||0)/255*100,4));break;case"g":setAlpha.call(l,w,toFixedNumeric((e.val("g")||0)/255*100,4));break;case"b":setAlpha.call(l,w,toFixedNumeric((e.val("b")||0)/255*100))}var i=e.val("a");setAlpha.call(l,C,toFixedNumeric(100*(255-(i||0))/255,4))}function updateBarVisuals(e){switch(c.color.mode){case"h":var n=e.val("a");setAlpha.call(l,L,toFixedNumeric(100*(255-(n||0))/255,4));break;case"s":var o=e.val("hva"),i=new No({h:o&&o.h||0,s:100,v:Do(o)?100:o.v});setBG.call(l,k,i.val("hex")),setAlpha.call(l,P,100-(Do(o)?100:o.v)),setAlpha.call(l,L,toFixedNumeric(100*(255-(o&&o.a||0))/255,4));break;case"v":var r=e.val("hsa"),a=new No({h:r&&r.h||0,s:Do(r)?100:r.s,v:100});setBG.call(l,k,a.val("hex")),setAlpha.call(l,L,toFixedNumeric(100*(255-(r&&r.a||0))/255,4));break;case"r":case"g":case"b":var s=e.val("rgba"),u=0,d=0;"r"===c.color.mode?(u=s&&s.b||0,d=s&&s.g||0):"g"===c.color.mode?(u=s&&s.b||0,d=s&&s.r||0):"b"===c.color.mode&&(u=s&&s.r||0,d=s&&s.g||0);var p=d>u?u:d;setAlpha.call(l,P,u>d?toFixedNumeric((u-d)/(255-d)*100,4):0),setAlpha.call(l,$,d>u?toFixedNumeric((d-u)/(255-u)*100,4):0),setAlpha.call(l,E,toFixedNumeric(p/255*100,4)),setAlpha.call(l,L,toFixedNumeric(100*(255-(s&&s.a||0))/255,4));break;case"a":var h=e.val("a");setBG.call(l,k,e.val("hex")||"000000"),setAlpha.call(l,L,Do(h)?100:0),setAlpha.call(l,O,Do(h)?0:100)}}function setBG(e,n){e.style.backgroundColor=n&&6===n.length&&"#"+n||"transparent"}function setImg(e,n){d&&(n.includes("AlphaBar.png")||n.includes("Bars.png")||n.includes("Maps.png"))?(e.setAttribute("pngSrc",n),e.style.backgroundImage="none",e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n+"', sizingMethod='scale')"):e.style.backgroundImage="url('"+n+"')"}function setImgLoc(e,n){e.style.top=n+"px"}function setAlpha(e,n){if(e.style.visibility=n>0?"visible":"hidden",n>0&&n<100)if(d){var o=e.getAttribute("pngSrc");!Do(o)&&(o.includes("AlphaBar.png")||o.includes("Bars.png")||o.includes("Maps.png"))?e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+o+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+n+")":e.style.opacity=toFixedNumeric(n/100,4)}else e.style.opacity=toFixedNumeric(n/100,4);else if(0===n||100===n)if(d){var i=e.getAttribute("pngSrc");!Do(i)&&(i.includes("AlphaBar.png")||i.includes("Bars.png")||i.includes("Maps.png"))?e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"', sizingMethod='scale')":e.style.opacity=""}else e.style.opacity=""}function revertColor(){h.active.val("ahex",h.current.val("ahex"))}function commitColor(){h.current.val("ahex",h.active.val("ahex"))}function radioClicked(e){var n,o=_createForOfIteratorHelper(l.querySelectorAll('input[type="radio"]:checked'));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.value!==e.target.value&&(i.checked=!1)}}catch(e){o.e(e)}finally{o.f()}setColorMode.call(l,e.target.value)}function currentClicked(){revertColor.call(l)}function cancelClicked(){revertColor.call(l),c.window.expandable&&hide.call(l),"function"==typeof r&&r.call(l,h.active,D)}function okClicked(){commitColor.call(l),c.window.expandable&&hide.call(l),"function"==typeof o&&o.call(l,h.active,M)}function iconImageClicked(){show.call(l)}function currentColorChanged(e){var n=e.val("hex");R.style.backgroundColor=n&&"#"+n||"transparent",setAlpha.call(l,R,toFixedNumeric(100*(e.val("a")||0)/255,4))}function expandableColorChanged(e){var n=e.val("hex"),o=e.val("va");N.style.backgroundColor=n&&"#"+n||"transparent",setAlpha.call(l,G,toFixedNumeric(100*(255-(o&&o.a||0))/255,4)),c.window.bindToInput&&c.window.updateInputColor&&(c.window.input.style.backgroundColor=n&&"#"+n||"transparent",c.window.input.style.color=Do(o)||o.v>75?"#000000":"#ffffff")}function moveBarMouseDown(e){g=Number.parseInt(y.style.left),f=Number.parseInt(y.style.top),v=e.pageX,b=e.pageY,document.addEventListener("mousemove",documentMouseMove),document.addEventListener("mouseup",documentMouseUp),e.preventDefault()}function documentMouseMove(e){if(y.style.left=g-(v-e.pageX)+"px",y.style.top=f-(b-e.pageY)+"px",c.window.expandable){var n=y.previousElementSibling;n.style.left=y.style.left,n.style.top=y.style.top}return e.stopPropagation(),e.preventDefault(),!1}function documentMouseUp(e){return document.removeEventListener("mousemove",documentMouseMove),document.removeEventListener("mouseup",documentMouseUp),e.stopPropagation(),e.preventDefault(),!1}function quickPickClicked(e){return e.preventDefault(),e.stopPropagation(),h.active.val("ahex",e.target.getAttribute("title")||null,e.target),!1}function show(){h.current.val("ahex",h.active.val("ahex")),c.window.expandable&&(y.style.zIndex=20),y.style.display="block",function attachIFrame(){if(c.window.expandable){var e=y.querySelector("#jPicker-table");y.insertAdjacentElement("beforebegin",document.createElement("iframe"));var n=y.previousElementSibling;n.style.width=parseFloat(getComputedStyle(e,null).width.replace("px","")),n.style.height=parseFloat(getComputedStyle(y,null).height.replace("px","")),n.style.opacity=0,n.style.position="absolute",n.style.left=getComputedStyle(y,null).getPropertyValue("left"),n.style.top=getComputedStyle(y,null).getPropertyValue("top")}}()}function hide(){y.style.display="none",function removeIFrame(){c.window.expandable&&(y.style.zIndex=10),c.window.expandable&&y.prev().remove()}()}function initialize(){var e=l.nextElementSibling,n=c.window,o=n.expandable?e.querySelector("#Container"):null;(y=n.expandable?document.createElement("div"):l).classList.add("jPicker"),y.classList.add("Container"),n.expandable&&(y.style.display="none"),y.onselectstart=function(e){return"input"===e.target.nodeName.toLowerCase()};var r=h.active.val("all");n.alphaPrecision<0?n.alphaPrecision=0:n.alphaPrecision>2&&(n.alphaPrecision=2);var s='<table class="jPicker" id="jPicker-table" cellpadding="0" cellspacing="0">\n      <tbody>\n        '.concat(n.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"",'\n        <tr>\n          <td rowspan="9"><h2 class="Title">').concat(n.title||"config.jpicker_title",'</h2><div class="Map" id="Map"><span class="Map1" id="MMap1">&nbsp;</span><span class="Map2" id="MMap2">&nbsp;</span><span class="Map3" id="MMap3">&nbsp;</span><img src="').concat(p.clientPath+p.colorMap.arrow.file,'" class="Arrow"/></div></td>\n          <td rowspan="9"><div class="Bar" id="Bar"><span class="Map1" id="Map1">&nbsp;</span><span class="Map2" id="Map2">&nbsp;</span><span class="Map3" id="Map3">&nbsp;</span><span class="Map4" id="Map4">&nbsp;</span><span class="Map5" id="Map5">&nbsp;</span><span class="Map6" id="Map6">&nbsp;</span><img src="').concat(p.clientPath+p.colorBar.arrow.file,'" class="Arrow"/></div></td>\n          <td colspan="2" class="Preview" id="Preview">').concat(a.t("config.jpicker_new_color"),'<div id="preview-div"><span class="Active" id="Active" title="').concat(a.t("config.jpicker_tooltip_colors_new_color"),'">&nbsp;</span><span class="Current" id="Current" title="').concat(a.t("config.jpicker_tooltip_colors_current_color"),'">&nbsp;</span></div>').concat(a.t("config.jpicker_current_color"),'</td>\n          <td rowspan="9" class="Button" id="Button"><input type="button" class="Ok" id="Ok" value="').concat(a.t("common.ok"),'" title="').concat(a.t("config.jpicker_tooltip_buttons_ok"),'"/><input type="button" class="Cancel" id="Cancel" value="').concat(a.t("common.cancel"),'" title="').concat(a.t("config.jpicker_tooltip_buttons_cancel"),'"/><hr/><div class="Grid" id="Grid"></div></td>\n        </tr>\n        <tr class="Hue">\n          <td class="Radio"><label title="').concat(a.t("config.jpicker_tooltip_hue_radio"),'"><input type="radio" value="h"').concat("h"===c.color.mode?' checked="checked"':"",'/>H:</label></td>\n          <td class="Text"><input type="text" maxlength="3" value="').concat(r?r.h:"",'" title="').concat(a.t("config.jpicker_tooltip_hue_textbox"),'"/>&nbsp;&deg;</td>\n        </tr>\n        <tr class="Saturation">\n          <td class="Radio"><label title="').concat(a.t("config.jpicker_tooltip_saturation_radio"),'"><input type="radio" value="s"').concat("s"===c.color.mode?' checked="checked"':"",'/>S:</label></td>\n          <td class="Text"><input type="text" maxlength="3" value="').concat(r?r.s:"",'" title="').concat(a.t("config.jpicker_tooltip_saturation_textbox"),'"/>&nbsp;%</td>\n        </tr>\n        <tr class="Value">\n          <td class="Radio"><label title="').concat(a.t("config.jpicker_tooltip_value_radio"),'"><input type="radio" value="v"').concat("v"===c.color.mode?' checked="checked"':"",'/>V:</label><br/><br/></td>\n          <td class="Text"><input type="text" maxlength="3" value="').concat(r?r.v:"",'" title="').concat(a.t("config.jpicker_tooltip_value_textbox"),'"/>&nbsp;%<br/><br/></td>\n        </tr>\n        <tr class="Red">\n          <td class="Radio"><label title="').concat(a.t("config.jpicker_tooltip_red_radio"),'"><input type="radio" value="r"').concat("r"===c.color.mode?' checked="checked"':"",'/>R:</label></td>\n          <td class="Text"><input type="text" maxlength="3" value="').concat(r?r.r:"",'" title="').concat(a.t("config.jpicker_tooltip_red_textbox"),'"/></td>\n        </tr>\n        <tr class="Green">\n          <td class="Radio"><label title="').concat(a.t("config.jpicker_tooltip_green_radio"),'"><input type="radio" value="g"').concat("g"===c.color.mode?' checked="checked"':"",'/>G:</label></td>\n          <td class="Text"><input type="text" maxlength="3" value="').concat(r?r.g:"",'" title="').concat(a.t("config.jpicker_tooltip_green_textbox"),'"/></td>\n        </tr>\n        <tr class="Blue">\n          <td class="Radio"><label title="').concat(a.t("config.jpicker_tooltip_blue_radio"),'"><input type="radio" value="b"').concat("b"===c.color.mode?' checked="checked"':"",'/>B:</label></td>\n          <td class="Text"><input type="text" maxlength="3" value="').concat(r?r.b:"",'" title="').concat(a.t("config.jpicker_tooltip_blue_textbox"),'"/></td>\n        </tr>\n        <tr class="Alpha">\n          <td class="Radio">').concat(n.alphaSupport?'<label title="'.concat(a.t("config.jpicker_tooltip_alpha_radio"),'"><input type="radio" value="a"').concat("a"===c.color.mode?' checked="checked"':"","/>A:</label>"):"&nbsp;",'</td>\n          <td class="Text">').concat(n.alphaSupport?'<input type="text" maxlength="'.concat(3+n.alphaPrecision,'" value="').concat(r?toFixedNumeric(100*r.a/255,n.alphaPrecision):"",'" title="').concat(a.t("config.jpicker_tooltip_alpha_textbox"),'"/>&nbsp;%'):"&nbsp;",'</td>\n        </tr>\n        <tr class="Hex">\n          <td colspan="2" class="Text"><label title="').concat(a.t("config.jpicker_tooltip_hex_textbox"),'">#:<input type="text" maxlength="6" class="Hex" value="').concat(r?r.hex:"",'"/></label>').concat(n.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'.concat(r?r.ahex.substring(6):"",'" title="').concat(a.t("config.jpicker_tooltip_hex_alpha"),'"/></td>'):"&nbsp;","\n        </tr>\n      </tbody></table>");if(n.expandable){y.innerHTML=s,l.querySelectorAll("div.jPicker.Container").length?l.querySelector("div.jPicker.Container:last").insertAdjacentElement("afterend",y):document.body.insertBefore(y,document.body.firstChild),y.addEventListener("mousedown",(function(){y.style.zIndex=20}));var u=findPos(o);y.style.position="absolute",y.style.left="left"===n.position.x?u.left-530-("center"===n.position.y?25:0)+"px":"center"===n.position.x?u.left-260+"px":"right"===n.position.x?u.left-10+("center"===n.position.y?25:0)+"px":"screenCenter"===n.position.x?(document.width>>1)-260+"px":u.left+Number.parseInt(n.position.x)+"px",y.style.top="top"===n.position.y?u.top-312+"px":"center"===n.position.y?u.top-156+"px":"bottom"===n.position.y?u.top+25+"px":u.top+Number.parseInt(n.position.y)+"px"}else{y=l;var d=document.createElement("div");for(d.innerHTML=s;d.children.length>0;)y.appendChild(d.children[0])}var g=y.querySelector("tbody");m=g.querySelector("#Map"),k=g.querySelector("#Bar"),x=m.querySelector("#MMap1"),w=m.querySelector("#MMap2"),C=m.querySelector("#MMap3"),S=k.querySelector("#Map1"),P=k.querySelector("#Map2"),$=k.querySelector("#Map3"),E=k.querySelector("#Map4"),L=k.querySelector("#Map5"),O=k.querySelector("#Map6"),(A=new Mo(m,{map:{width:p.colorMap.width,height:p.colorMap.height},arrow:{image:p.clientPath+p.colorMap.arrow.file,width:p.colorMap.arrow.width,height:p.colorMap.arrow.height}})).bind(mapValueChanged),(T=new Mo(k,{map:{width:p.colorBar.width,height:p.colorBar.height},arrow:{image:p.clientPath+p.colorBar.arrow.file,width:p.colorBar.arrow.width,height:p.colorBar.arrow.height}})).bind(colorBarValueChanged),j=new Io(g,h.active,n.expandable&&n.bindToInput?n.input:null,n.alphaPrecision);var f=r?r.hex:null,v=g.querySelector("#Preview"),b=g.querySelector("#Button");(I=v.querySelector("#Active")).style.backgroundColor=f?"#"+f:"transparent",(R=v.querySelector("#Current")).style.backgroundColor=f?"#"+f:"transparent",svgEditor.$click(R,currentClicked),setAlpha.call(l,R,toFixedNumeric(100*h.current.val("a")/255,4)),M=b.querySelector("#Ok"),svgEditor.$click(M,okClicked),D=b.querySelector("#Cancel"),svgEditor.$click(D,cancelClicked),B=b.querySelector("#Grid"),setTimeout((function(){setImg.call(l,x,p.clientPath+"Maps.png"),setImg.call(l,w,p.clientPath+"Maps.png"),setImg.call(l,C,p.clientPath+"map-opacity.png"),setImg.call(l,S,p.clientPath+"Bars.png"),setImg.call(l,P,p.clientPath+"Bars.png"),setImg.call(l,$,p.clientPath+"Bars.png"),setImg.call(l,E,p.clientPath+"Bars.png"),setImg.call(l,L,p.clientPath+"bar-opacity.png"),setImg.call(l,O,p.clientPath+"AlphaBar.png"),setImg.call(l,v.querySelector("#preview-div"),p.clientPath+"preview-opacity.png")}),0);var H,U=_createForOfIteratorHelper(g.querySelectorAll("td.Radio input"));try{for(U.s();!(H=U.n()).done;){var V=H.value;svgEditor.$click(V,radioClicked)}}catch(e){U.e(e)}finally{U.f()}if(h.quickList&&h.quickList.length>0){for(var K="",W=0;W<h.quickList.length;W++){"string"===_typeof$1(h.quickList[W]).toString().toLowerCase()&&(h.quickList[W]=new No({hex:h.quickList[W]}));var Y=h.quickList[W].val("a"),X=h.quickList[W].val("ahex");!n.alphaSupport&&X&&(X=X.substring(0,6)+"ff");var Z=h.quickList[W].val("hex");X||(X="00000000"),K+='<span class="QuickColor" title="#'+X+'" style="background-color:'+(Z&&"#"+Z||"")+";"+(Z?"":"background-image:url("+p.clientPath+"NoColor.png)")+(n.alphaSupport&&Y&&Y<255?";opacity:"+toFixedNumeric(Y/255,4)+";filter:Alpha(opacity="+toFixedNumeric(Y/2.55,4)+")":"")+'">&nbsp;</span>'}setImg.call(l,B,p.clientPath+"bar-opacity.png");var J=document.createElement("div");for(J.innerHTML=K;J.children.length>0;)B.appendChild(J.children[0]);var Q,ee=_createForOfIteratorHelper(B.querySelectorAll(".QuickColor"));try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;svgEditor.$click(te,quickPickClicked)}}catch(e){ee.e(e)}finally{ee.f()}}setColorMode.call(l,c.color.mode),h.active.bind(activeColorChanged),"function"==typeof i&&h.active.bind(i),h.current.bind(currentColorChanged),n.expandable?(l.icon=o.parentNode,(N=l.icon.querySelector(".Color")).style.backgroundColor=f&&"#"+f||"transparent",G=l.icon.querySelector(".Alpha"),setImg.call(l,G,p.clientPath+"bar-opacity.png"),setAlpha.call(l,G,toFixedNumeric(100*(255-(r?r.a:0))/255,4)),(z=l.icon.querySelector(".Image")).style.backgroundImage="url('"+p.clientPath+p.picker.file+"')",svgEditor.$click(z,iconImageClicked),n.bindToInput&&n.updateInputColor&&(n.input.style.backgroundColor=f&&"#"+f||"transparent",n.input.style.color=Do(r)||r.v>75?"#000000":"#ffffff"),(q=g.querySelector(".Move")).addEventListener("mousedown",moveBarMouseDown),h.active.bind(expandableColorChanged)):show.call(l)}var p=c.images,h={active:"string"===_typeof$1(c.color.active).toString().toLowerCase()?new No({ahex:!c.window.alphaSupport&&c.color.active?c.color.active.substring(0,6)+"ff":c.color.active}):new No({ahex:!c.window.alphaSupport&&c.color.active.val("ahex")?c.color.active.val("ahex").substring(0,6)+"ff":c.color.active.val("ahex")}),current:"string"===_typeof$1(c.color.active).toString().toLowerCase()?new No({ahex:!c.window.alphaSupport&&c.color.active?c.color.active.substring(0,6)+"ff":c.color.active}):new No({ahex:!c.window.alphaSupport&&c.color.active.val("ahex")?c.color.active.val("ahex").substring(0,6)+"ff":c.color.active.val("ahex")}),quickList:c.color.quickList};"function"!=typeof o&&(o=null),"function"!=typeof i&&(i=null),"function"!=typeof r&&(r=null);var g=null,f=null,v=null,b=null,y=null,m=null,k=null,x=null,w=null,C=null,S=null,P=null,$=null,E=null,L=null,O=null,A=null,T=null,j=null,I=null,R=null,M=null,D=null,B=null,N=null,G=null,z=null,q=null;Object.assign(l,{commitCallback:o,liveCallback:i,cancelCallback:r,color:h,show:show,hide:hide,destroy:function destroy(){var e,n=_createForOfIteratorHelper(y.querySelectorAll("td.Radio input"));try{for(n.s();!(e=n.n()).done;){e.value.removeEventListener("click",radioClicked)}}catch(e){n.e(e)}finally{n.f()}R.removeEventListener("click",currentClicked),D.removeEventListener("click",cancelClicked),M.removeEventListener("click",okClicked),c.window.expandable&&(z.removeEventListener("click",iconImageClicked),q.removeEventListener("mousedown",moveBarMouseDown),l.icon=null);var a,s=_createForOfIteratorHelper(y.querySelectorAll(".QuickColor"));try{for(s.s();!(a=s.n()).done;){a.value.removeEventListener("click",quickPickClicked)}}catch(e){s.e(e)}finally{s.f()}m=null,k=null,x=null,w=null,C=null,S=null,P=null,$=null,E=null,L=null,O=null,A.destroy(),A=null,T.destroy(),T=null,j.destroy(),j=null,I=null,R=null,M=null,D=null,B=null,o=null,r=null,i=null,y.html("");for(var u=0;u<Fo.length;u++)Fo[u]===l&&(Fo.splice(u,1),u--)}}),Fo.push(l),setTimeout((function(){initialize.call(l)}),0)}var zo={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:!1,liveUpdate:!0,alphaSupport:!1,alphaPrecision:0,updateInputColor:!0},color:{mode:"h",active:new No({ahex:"#ffcc00ff"}),quickList:[new No({h:360,s:33,v:100}),new No({h:360,s:66,v:100}),new No({h:360,s:100,v:100}),new No({h:360,s:100,v:75}),new No({h:360,s:100,v:50}),new No({h:180,s:0,v:100}),new No({h:30,s:33,v:100}),new No({h:30,s:66,v:100}),new No({h:30,s:100,v:100}),new No({h:30,s:100,v:75}),new No({h:30,s:100,v:50}),new No({h:180,s:0,v:90}),new No({h:60,s:33,v:100}),new No({h:60,s:66,v:100}),new No({h:60,s:100,v:100}),new No({h:60,s:100,v:75}),new No({h:60,s:100,v:50}),new No({h:180,s:0,v:80}),new No({h:90,s:33,v:100}),new No({h:90,s:66,v:100}),new No({h:90,s:100,v:100}),new No({h:90,s:100,v:75}),new No({h:90,s:100,v:50}),new No({h:180,s:0,v:70}),new No({h:120,s:33,v:100}),new No({h:120,s:66,v:100}),new No({h:120,s:100,v:100}),new No({h:120,s:100,v:75}),new No({h:120,s:100,v:50}),new No({h:180,s:0,v:60}),new No({h:150,s:33,v:100}),new No({h:150,s:66,v:100}),new No({h:150,s:100,v:100}),new No({h:150,s:100,v:75}),new No({h:150,s:100,v:50}),new No({h:180,s:0,v:50}),new No({h:180,s:33,v:100}),new No({h:180,s:66,v:100}),new No({h:180,s:100,v:100}),new No({h:180,s:100,v:75}),new No({h:180,s:100,v:50}),new No({h:180,s:0,v:40}),new No({h:210,s:33,v:100}),new No({h:210,s:66,v:100}),new No({h:210,s:100,v:100}),new No({h:210,s:100,v:75}),new No({h:210,s:100,v:50}),new No({h:180,s:0,v:30}),new No({h:240,s:33,v:100}),new No({h:240,s:66,v:100}),new No({h:240,s:100,v:100}),new No({h:240,s:100,v:75}),new No({h:240,s:100,v:50}),new No({h:180,s:0,v:20}),new No({h:270,s:33,v:100}),new No({h:270,s:66,v:100}),new No({h:270,s:100,v:100}),new No({h:270,s:100,v:75}),new No({h:270,s:100,v:50}),new No({h:180,s:0,v:10}),new No({h:300,s:33,v:100}),new No({h:300,s:66,v:100}),new No({h:300,s:100,v:100}),new No({h:300,s:100,v:75}),new No({h:300,s:100,v:50}),new No({h:180,s:0,v:0}),new No({h:330,s:33,v:100}),new No({h:330,s:66,v:100}),new No({h:330,s:100,v:100}),new No({h:330,s:100,v:75}),new No({h:330,s:100,v:50}),new No]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}}},qo="http://www.w3.org/2000/svg",Ho="http://www.w3.org/1999/xlink";window.console||(window.console={log:function log(){},dir:function dir(){}});var Uo={Paint:e.Paint},Vo={paint:new Uo.Paint,window:{pickerTitle:"Drag markers to pick a paint"},images:{clientPath:"images/"},newstop:"inverse"},Ko=navigator.userAgent.includes("Gecko/");function mkElem(e,n,o){var i=document.createElementNS(qo,e);return function setAttrs(e,n){Ko?Object.entries(n).forEach((function(n){var o=_slicedToArray(n,2),i=o[0],r=o[1];e.setAttribute(i,r)})):Object.entries(n).forEach((function(n){var o=_slicedToArray(n,2),i=o[0],r=o[1],a=e[i];"SVGLength"===(null==a?void 0:a.constructor)?a.baseVal.value=r:e.setAttribute(i,r)}))}(i,n),o&&o.append(i),i}function jGraduateMethod(e,n,o,i,r){var a=e,s=Object.assign({},Vo,n||{}),l=a.getAttribute("id"),c="#"+a.getAttribute("id")+" ";if(c){var u=function okClicked(){switch(a.paint.type){case"radialGradient":a.paint.linearGradient=null;break;case"linearGradient":a.paint.radialGradient=null;break;case"solidColor":a.paint.radialGradient=a.paint.linearGradient=null}"function"==typeof a.okCallback&&a.okCallback(a.paint),a.style.display="none"},d=function cancelClicked(){"function"==typeof a.cancelCallback&&a.cancelCallback(),a.style.display="none"};Object.assign(a,{paint:new Uo.Paint({copy:s.paint}),okCallback:"function"==typeof o?o:null,cancelCallback:"function"==typeof i?i:null});var p=null,h=window;"none"===a.paint.type&&(a.paint=new Uo.Paint({solidColor:"ffffff"})),a.classList.add("jGraduate_Picker"),a.innerHTML='<ul class="jGraduate_tabs">\n      <li class="jGraduate_tab_color jGraduate_tab_current" id="jGraduate_tab_color" data-type="col">'.concat(r.t("config.jgraduate_solid_color"),'</li>\n      <li class="jGraduate_tab_lingrad" id="jGraduate_tab_lingrad" data-type="lg">').concat(r.t("config.jgraduate_linear_gradient"),'</li>\n      <li class="jGraduate_tab_radgrad" id="jGraduate_tab_radgrad" data-type="rg">').concat(r.t("config.jgraduate_radial_gradient"),'</li>\n    </ul>\n    <div class="jGraduate_colPick" id="jGraduate_colPick"></div>\n    <div class="jGraduate_gradPick" id="jGraduate_gradPick"></div>\n    <div class="jGraduate_LightBox" id="jGraduate_LightBox"></div>\n    <div id="').concat(l,'_jGraduate_stopPicker" class="jGraduate_stopPicker"></div>');var g=a.querySelector("#jGraduate_colPick"),f=a.querySelector("#jGraduate_gradPick"),v='<div id="'.concat(l,'_jGraduate_Swatch" class="jGraduate_Swatch">\n        <h2 class="jGraduate_Title">').concat(s.window.pickerTitle,'</h2>\n        <div id="').concat(l,'_jGraduate_GradContainer" class="jGraduate_GradContainer"></div>\n        <div id="').concat(l,'_jGraduate_StopSlider" class="jGraduate_StopSlider"></div>\n      </div>\n      <div class="jGraduate_Form jGraduate_Points jGraduate_lg_field">\n        <div class="jGraduate_StopSection">\n          <label class="jGraduate_Form_Heading">').concat(r.t("config.jgraduate_begin_point"),'</label>\n          <div class="jGraduate_Form_Section">\n            <label>x:</label>\n              <input type="text" id="').concat(l,'_jGraduate_x1" size="3" title="').concat(r.t("config.jgraduate_enter_starting_x"),'"/>\n            <label>y:</label>\n            <input type="text" id="').concat(l,'_jGraduate_y1" size="3" title="').concat(r.t("config.jgraduate_enter_starting_y"),'"/>\n          </div>\n        </div>\n        <div class="jGraduate_StopSection">\n          <label class="jGraduate_Form_Heading">').concat(r.t("config.jgraduate_end_point"),'</label>\n          <div class="jGraduate_Form_Section">\n            <label>x:</label>\n            <input type="text" id="').concat(l,'_jGraduate_x2" size="3" title="').concat(r.t("config.jgraduate_enter_ending_x"),'"/>\n            <label>y:</label>\n            <input type="text" id="').concat(l,'_jGraduate_y2" size="3" title="').concat(r.t("config.jgraduate_enter_ending_y"),'"/>\n          </div>\n        </div>\n      </div>\n      <div class="jGraduate_Form jGraduate_Points jGraduate_rg_field">\n        <div class="jGraduate_StopSection">\n          <label class="jGraduate_Form_Heading">').concat(r.t("config.jgraduate_center_point"),'</label>\n          <div class="jGraduate_Form_Section">\n            <label>x:</label>\n            <input type="text" id="').concat(l,'_jGraduate_cx" size="3" title="').concat(r.t("config.jgraduate_enter_value_x"),'"/>\n            <label>y:</label>\n            <input type="text" id="').concat(l,'_jGraduate_cy" size="3" title="').concat(r.t("config.jgraduate_enter_value_y"),'"/>\n          </div>\n        </div>\n        <div class="jGraduate_StopSection">\n          <label class="jGraduate_Form_Heading">').concat(r.t("config.jgraduate_focal_point"),'</label>\n          <div class="jGraduate_Form_Section">\n            <label>').concat(r.t("config.jgraduate_match_center"),' <input type="checkbox" checked="checked" id="').concat(l,'_jGraduate_match_ctr"/></label><br/>\n            <label>x:</label>\n            <input type="text" id="').concat(l,'_jGraduate_fx" size="3" title="').concat(r.t("config.jgraduate_enter_focal_x"),'"/>\n            <label>y:</label>\n            <input type="text" id="').concat(l,'_jGraduate_fy" size="3" title="').concat(r.t("config.jgraduate_enter_focal_y"),'"/>\n          </div>\n        </div>\n      </div>\n      <div class="jGraduate_StopSection jGraduate_SpreadMethod">\n        <label class="jGraduate_Form_Heading">').concat(r.t("config.jgraduate_spread_method"),'</label>\n        <div class="jGraduate_Form_Section">\n          <select class="jGraduate_spreadMethod" id="jGraduate_spreadMethod">\n            <option value=pad selected>').concat(r.t("properties.jgraduate_pad"),"</option>\n            <option value=reflect>").concat(r.t("properties.jgraduate_reflect"),"</option>\n            <option value=repeat>").concat(r.t("properties.jgraduate_repeat"),'</option>\n          </select>\n        </div>\n      </div>\n      <div class="jGraduate_Form">\n        <div class="jGraduate_Slider jGraduate_RadiusField jGraduate_rg_field">\n          <label class="prelabel">').concat(r.t("config.jgraduate_radius"),'</label>\n          <div id="').concat(l,'_jGraduate_Radius" class="jGraduate_SliderBar jGraduate_Radius" title="').concat(r.t("config.jgraduate_set_radius"),'">\n            <img id="').concat(l,'_jGraduate_RadiusArrows" class="jGraduate_RadiusArrows" src="').concat(s.images.clientPath,'rangearrows2.gif">\n          </div>\n          <label><input type="text" id="').concat(l,'_jGraduate_RadiusInput" size="3" value="100"/>%</label>\n        </div>\n        <div class="jGraduate_Slider jGraduate_EllipField jGraduate_rg_field">\n          <label class="prelabel">').concat(r.t("config.jgraduate_ellip"),'</label>\n          <div id="').concat(l,'_jGraduate_Ellip" class="jGraduate_SliderBar jGraduate_Ellip" title="').concat(r.t("config.jgraduate_set_ellip"),'">\n            <img id="').concat(l,'_jGraduate_EllipArrows" class="jGraduate_EllipArrows" src="').concat(s.images.clientPath,'rangearrows2.gif">\n          </div>\n          <label><input type="text" id="').concat(l,'_jGraduate_EllipInput" size="3" value="0"/>%</label>\n        </div>\n        <div class="jGraduate_Slider jGraduate_AngleField jGraduate_rg_field">\n          <label class="prelabel">').concat(r.t("config.jgraduate_angle"),'</label>\n          <div id="').concat(l,'_jGraduate_Angle" class="jGraduate_SliderBar jGraduate_Angle" title="').concat(r.t("config.jgraduate_set_angle"),'">\n            <img id="').concat(l,'_jGraduate_AngleArrows" class="jGraduate_AngleArrows" src="').concat(s.images.clientPath,'rangearrows2.gif">\n          </div>\n          <label><input type="text" id="').concat(l,'_jGraduate_AngleInput" size="3" value="0"/>').concat(r.t("config.jgraduate_deg"),'</label>\n        </div>\n        <div class="jGraduate_Slider jGraduate_OpacField">\n          <label class="prelabel">').concat(r.t("config.jgraduate_opac"),'</label>\n          <div id="').concat(l,'_jGraduate_Opac" class="jGraduate_SliderBar jGraduate_Opac" title="').concat(r.t("config.jgraduate_set_opac"),'">\n            <img id="').concat(l,'_jGraduate_OpacArrows" class="jGraduate_OpacArrows" src="').concat(s.images.clientPath,'rangearrows2.gif">\n          </div>\n          <label><input type="text" id="').concat(l,'_jGraduate_OpacInput" size="3" value="100"/>%</label>\n        </div>\n      </div>\n      <div class="jGraduate_OkCancel">\n        <input type="button" id="').concat(l,'_jGraduate_Ok" class="jGraduate_Ok" value="').concat(r.t("common.ok"),'"/>\n        <input type="button" id="').concat(l,'_jGraduate_Cancel" class="jGraduate_Cancel" value="').concat(r.t("common.cancel"),'"/>\n      </div>'),b=document.createElement("div");for(b.innerHTML=v;b.children.length>0;)f.appendChild(b.children[0]);var y,m=256,k={},x=145,w=_createForOfIteratorHelper(a.querySelectorAll(".jGraduate_SliderBar"));try{for(w.s();!(y=w.n()).done;){y.value.style.width="145px"}}catch(e){w.e(e)}finally{w.f()}var C,S=a.querySelector("#"+l+"_jGraduate_GradContainer"),P=mkElem("svg",{id:l+"_jgraduate_svg",width:m,height:m,xmlns:qo},S),$=a.paint.type,E=a.paint[$],L=E,O=a.paint.alpha,A="solidColor"===$;switch($){case"solidColor":case"linearGradient":if(A||(L.id=l+"_lg_jgraduate_grad",E=L=P.appendChild(L)),mkElem("radialGradient",{id:l+"_rg_jgraduate_grad"},P),"linearGradient"===$)break;case"radialGradient":A||(L.id=l+"_rg_jgraduate_grad",E=L=P.appendChild(L)),mkElem("linearGradient",{id:l+"_lg_jgraduate_grad"},P)}if(A){E=L=a.querySelector("#"+l+"_lg_jgraduate_grad"),mkStop(0,"#"+(p=a.paint[$]),1);var T=_typeof$1(s.newstop);if("string"===T)switch(s.newstop){case"same":mkStop(1,"#"+p,1);break;case"inverse":for(var j="",I=0;I<6;I+=2){var R=(255-Number.parseInt(p.substr(I,2),16)).toString(16);R.length<2&&(R=0+R),j+=R}mkStop(1,"#"+j,1);break;case"white":mkStop(1,"#ffffff",1);break;case"black":mkStop(1,"#000000",1)}else if("object"===T){var M="opac"in s.newstop?s.newstop.opac:1;mkStop(1,s.newstop.color||"#"+p,M)}}var D=Number.parseFloat(E.getAttribute("x1")||0),B=Number.parseFloat(E.getAttribute("y1")||0),N=Number.parseFloat(E.getAttribute("x2")||1),G=Number.parseFloat(E.getAttribute("y2")||0),z=Number.parseFloat(E.getAttribute("cx")||.5),q=Number.parseFloat(E.getAttribute("cy")||.5),H=Number.parseFloat(E.getAttribute("fx")||z),U=Number.parseFloat(E.getAttribute("fy")||q),V=mkElem("rect",{id:l+"_jgraduate_rect",x:0,y:0,width:256,height:256,fill:"url(#"+l+"_jgraduate_grad)","fill-opacity":O/100},P),K=document.createElement("div");K.setAttribute("class","grad_coord jGraduate_lg_field"),K.setAttribute("title","Begin Stop"),K.textContent=1,K.style.top=B*m,K.style.left=D*m,K.dataset.coord="start",S.appendChild(K);var W=document.createElement("div");W.setAttribute("class","grad_coord jGraduate_lg_field"),W.setAttribute("title","End stop"),W.textContent=2,W.style.top=G*m,W.style.left=N*m,W.dataset.coord="end",S.appendChild(W);var Y=document.createElement("div");Y.setAttribute("class","grad_coord jGraduate_rg_field"),Y.setAttribute("title","Center stop"),Y.textContent="C",Y.style.top=q*m,Y.style.left=z*m,Y.dataset.coord="center",S.appendChild(Y);var X,Z=document.createElement("div");Z.setAttribute("class","grad_coord jGraduate_rg_field"),Z.setAttribute("title","Focus point"),Z.textContent="F",Z.style.top=U*m,Z.style.left=H*m,Z.style.display="none",Z.dataset.coord="focus",Z.setAttribute("id",l+"_jGraduate_focusCoord"),S.appendChild(Z);var J,Q=_createForOfIteratorHelper(["x1","y1","x2","y2","cx","cy","fx","fy"].entries());try{var ee=function _loop2(){var e=_slicedToArray(J.value,2)[1],n=isNaN(e[1]),o=L.getAttribute(e);o||(o=n?"0.5":"x2"===e?"1.0":"0.0"),k[e]=a.querySelector("#"+l+"_jGraduate_"+e),k[e].value=o,k[e].addEventListener("change",(function(o){return function onAttrChangeHandler(e,n,o){isNaN(Number.parseFloat(e.target.value))||e.target.value<0?e.target.value=0:e.target.value>1&&(e.target.value=1),("f"!==n[0]||X)&&(o&&"radialGradient"===$||!o&&"linearGradient"===$)&&L.setAttribute(n,e.target.value);var i=o?"c"===n[0]?Y:Z:"1"===n[1]?K:W;"left"===n.includes("x")?i.style.left=e.target.value*m:"top"===n.includes("x")&&(i.style.top=e.target.value*m)}(o,e,n)})),k[e].dispatchEvent(new Event("change"))};for(Q.s();!(J=Q.n()).done;)ee()}catch(e){Q.e(e)}finally{Q.f()}var te,ne,oe,ie,re=a.querySelector("#"+l+"_jGraduate_StopSlider"),ae=mkElem("path",{d:"m9.75,-6l-19.5,19.5m0,-19.5l19.5,19.5",fill:"none",stroke:"#D00","stroke-width":5,display:"none"},void 0),se=1,le=1,ce=0,ue=z,de=q,pe=mkElem("svg",{width:"100%",height:45},re),he=mkElem("pattern",{width:16,height:16,patternUnits:"userSpaceOnUse",id:"jGraduate_trans"},pe),ge=mkElem("image",{width:16,height:16},he),fe=s.images.clientPath+"map-opacity.png";ge.setAttributeNS(Ho,"xlink:href",fe),svgEditor.$click(pe,(function(e){if(ie=findPos(re),"path"!==e.target.tagName){var n=e.pageX-ie.left-8;mkStop((n=n<10?10:n>266?266:n)/m,0,0,!0),e.stopPropagation()}})),pe.addEventListener("mouseover",(function(){pe.append(ae)})),C=mkElem("g",{},pe),mkElem("line",{x1:10,y1:15,x2:266,y2:15,"stroke-width":2,stroke:"#000"},pe);var ve=f.querySelector("#jGraduate_spreadMethod");ve.addEventListener("change",(function(){L.setAttribute("spreadMethod",this.value)}));var be,ye=null,me=function onCoordDrag(e){var n=e.pageX-be.left,o=e.pageY-be.top;n=n<0?0:n>m?m:n,o=o<0?0:o>m?m:o,ye.style.left=n+"px",ye.style.top=o+"px";var i=n/256,r=o/256,a=ye.dataset.coord,s=L;switch(a){case"start":k.x1.value=i,k.y1.value=r,s.setAttribute("x1",i),s.setAttribute("y1",r);break;case"end":k.x2.value=i,k.y2.value=r,s.setAttribute("x2",i),s.setAttribute("y2",r);break;case"center":k.cx.value=i,k.cy.value=r,s.setAttribute("cx",i),s.setAttribute("cy",r),ue=i,de=r,xform();break;case"focus":k.fx.value=i,k.fy.value=r,s.setAttribute("fx",i),s.setAttribute("fy",r),xform()}e.preventDefault()},_e=function onCoordUp(){ye=null,h.removeEventListener("mousemove",me),h.removeEventListener("mouseup",onCoordUp)},ke=(te=L.getElementsByTagNameNS(qo,"stop")).length;if(ke<2){for(;ke<2;)L.append(document.createElementNS(qo,"stop")),++ke;te=L.getElementsByTagNameNS(qo,"stop")}for(var xe=0;xe<ke;xe++)mkStop(0,0,0,0,te[xe]);ve.setAttribute("value",L.getAttribute("spreadMethod")||"pad"),X=!1,V.setAttribute("fill-opacity",O/100);var we,Ce,Se,Pe=function onMouseDownGradCoords(e){e.preventDefault(),ye=e.target,be=findPos(ye.parentNode),h.addEventListener("mousemove",me),h.addEventListener("mouseup",_e)},$e=_createForOfIteratorHelper(a.querySelectorAll("#"+l+" div.grad_coord"));try{for($e.s();!(we=$e.n()).done;){we.value.addEventListener("mousedown",Pe)}}catch(e){$e.e(e)}finally{$e.f()}svgEditor.$click(a.querySelector("#"+l+"_jGraduate_Ok"),(function(){a.paint.type=$,a.paint[$]=L.cloneNode(!0),a.paint.solidColor=null,u()})),svgEditor.$click(a.querySelector("#"+l+"_jGraduate_Cancel"),d),"radialGradient"===$&&(X?Z.style.display="block":(Z.style.display="none",k.fx.value="",k.fy.value="")),a.querySelector("#"+l+"_jGraduate_match_ctr").checked=!X;var Ee;if(a.querySelector("#"+l+"_jGraduate_match_ctr").addEventListener("change",(function onMatchCtrHandler(e){X=!e.target.checked,Z.style.display=X?"block":"none",k.fx.value="",k.fy.value="";var n=L;if(X){var o=Ce||.5,i=Se||.5;n.setAttribute("fx",o),n.setAttribute("fy",i),k.fx.value=o,k.fy.value=i}else Ce=n.getAttribute("fx"),Se=n.getAttribute("fy"),n.removeAttribute("fx"),n.removeAttribute("fy")})),(ke=(te=L.getElementsByTagNameNS(qo,"stop")).length)<2){for(;ke<2;)L.append(document.createElementNS(qo,"stop")),++ke;te=L.getElementsByTagNameNS(qo,"stop")}var Le=0,Oe=0;if("radialGradient"===$){var Ae=L.gradientTransform.baseVal;if(2===Ae.numberOfItems){var Te=Ae.getItem(0),je=Ae.getItem(1);if(2===Te.type&&3===je.type){var Ie=je.matrix;1!==Ie.a?Le=Math.round(100*-(1-Ie.a)):1!==Ie.d&&(Le=Math.round(100*(1-Ie.d)))}}else if(3===Ae.numberOfItems){var Re=Ae.getItem(0),Me=Ae.getItem(1),De=Ae.getItem(2);if(4===Re.type&&2===Me.type&&3===De.type){Oe=Math.round(Re.angle);var Be=De.matrix;1!==Be.a?Le=Math.round(100*-(1-Be.a)):1!==Be.d&&(Le=Math.round(100*(1-Be.d)))}}}for(var Ne={radius:{handle:"#"+l+"_jGraduate_RadiusArrows",input:"#"+l+"_jGraduate_RadiusInput",val:100*(L.getAttribute("r")||.5)},opacity:{handle:"#"+l+"_jGraduate_OpacArrows",input:"#"+l+"_jGraduate_OpacInput",val:a.paint.alpha||100},ellip:{handle:"#"+l+"_jGraduate_EllipArrows",input:"#"+l+"_jGraduate_EllipInput",val:Le},angle:{handle:"#"+l+"_jGraduate_AngleArrows",input:"#"+l+"_jGraduate_AngleInput",val:Oe}},Fe=function _loop(){var e=_slicedToArray(ze[Ge],2),n=_slicedToArray(e[1],2),o=n[0],i=n[1],r=a.querySelector(i.handle),s=a.querySelector(i.input);r.addEventListener("mousedown",(function(e){var n=r.parentNode;Ee={type:o,elem:r,input:s,parent:n,offset:findPos(n)},h.addEventListener("mousemove",qe),h.addEventListener("mouseup",He),e.preventDefault()})),s.value=i.val,s.addEventListener("change",(function(){var e="radialGradient"===$,n=Number(this.value),i=0;switch(o){case"radius":e&&L.setAttribute("r",n/100),i=Math.pow(n/100,.4)/2*x;break;case"opacity":a.paint.alpha=n,V.setAttribute("fill-opacity",n/100),i=1.45*n;break;case"ellip":if(se=le=1,0===n){i=72.5;break}n>99.5&&(n=99.5),n>0?le=1-n/100:se=-n/100-1,i=x*((n+100)/2)/100,e&&xform();break;case"angle":i=(ce=n)/180,i+=.5,i*=x,e&&xform()}i>x?i=x:i<0&&(i=0),r.style.marginLeft=i-5+"px"})),s.dispatchEvent(new Event("change"))},Ge=0,ze=Object.entries(Object.entries(Ne));Ge<ze.length;Ge++)Fe();for(var qe=function dragSlider(e){!function setSlider(e){var n=Ee.offset.left,o=Ee.parent,i=e.pageX-n-Number.parseInt(getComputedStyle(o,null).getPropertyValue("border-left-width"));i>x&&(i=x),i<=0&&(i=0);var r=i-5;switch(i/=x,Ee.type){case"radius":(i=Math.pow(2*i,2.5))>.98&&i<1.02&&(i=1),i<=.01&&(i=.01),L.setAttribute("r",i);break;case"opacity":a.paint.alpha=Number.parseInt(100*i),V.setAttribute("fill-opacity",i);break;case"ellip":se=1,le=1,i<.5?se=(i/=.5)<=0?.01:i:i>.5&&(le=(i=2-(i/=.5))<=0?.01:i),xform(),le===1+(i-=1)&&(i=Math.abs(i));break;case"angle":i-=.5,ce=i*=180,xform(),i/=100}Ee.elem.style.marginLeft=r+"px",i=Math.round(100*i),Ee.input.value=i}(e),e.preventDefault()},He=function stopSlider(){h.removeEventListener("mousemove",qe),h.removeEventListener("mouseup",stopSlider),Ee=null},Ue=(255*a.paint.alpha/100).toString(16);Ue.length<2;)Ue="0"+Ue;Ue=Ue.split(".")[0],p="none"===a.paint.solidColor?"":a.paint.solidColor+Ue,A||(p=te[0].getAttribute("stop-color")),Object.assign(zo.window,{alphaSupport:!0,effects:{type:"show",speed:0}}),jPickerMethod(g,{window:{title:s.window.pickerTitle},images:{clientPath:s.images.clientPath},color:{active:p,alphaSupport:!0}},(function(e){a.paint.type="solidColor",a.paint.alpha=e.val("ahex")?Math.round(e.val("a")/255*100):100,a.paint.solidColor=e.val("hex")?e.val("hex"):"none",a.paint.radialGradient=null,u()}),null,(function(){d()}),r);var Ve,Ke=a.querySelectorAll(".jGraduate_tabs li"),We=function onTabsClickHandler(e){var n,o=_createForOfIteratorHelper(Ke);try{for(o.s();!(n=o.n()).done;){n.value.classList.remove("jGraduate_tab_current")}}catch(e){o.e(e)}finally{o.f()}e.target.classList.add("jGraduate_tab_current");var i=a.querySelectorAll(c+" > div");[].forEach.call(i,(function(e){e.style.display="none"}));var r=e.target.dataset.type;if(f.style.display="block","rg"===r||"lg"===r){var s=a.querySelectorAll(".jGraduate_"+r+"_field");[].forEach.call(s,(function(e){e.style.display="block"}));var u=a.querySelectorAll(".jGraduate_"+("lg"===r?"rg":"lg")+"_field");[].forEach.call(u,(function(e){e.style.display="none"})),a.querySelectorAll("#"+l+"_jgraduate_rect")[0].setAttribute("fill","url(#"+l+"_"+r+"_jgraduate_grad)"),$="lg"===r?"linearGradient":"radialGradient";var d=a.querySelector("#"+l+"_jGraduate_OpacInput");d.value=a.paint.alpha,d.dispatchEvent(new Event("change"));var p=a.querySelectorAll("#"+l+"_"+r+"_jgraduate_grad")[0];if(L!==p){for(var h=L.querySelectorAll("stop");p.firstChild;)p.removeChild(p.firstChild);[].forEach.call(h,(function(e){p.appendChild(e)})),L=p;var v=ve.getAttribute("value");L.setAttribute("spreadMethod",v)}X="rg"===r&&null!==L.getAttribute("fx")&&!(z===H&&q===U);var b=a.querySelectorAll("#"+l+"_jGraduate_focusCoord");"none"===b[0].style.display?b[0].style.display="block":b[0].style.display="none",X&&(a.querySelectorAll("#"+l+"_jGraduate_match_ctr")[0].checked=!1)}else f.style.display="none",g.style.display="block"},Ye=_createForOfIteratorHelper(Ke);try{for(Ye.s();!(Ve=Ye.n()).done;){var Xe=Ve.value;svgEditor.$click(Xe,We)}}catch(e){Ye.e(e)}finally{Ye.f()}var Ze=a.querySelectorAll(c+" > div");[].forEach.call(Ze,(function(e){e.style.display="none"}));var Je,Qe,et=_createForOfIteratorHelper(Ke);try{for(et.s();!(Je=et.n()).done;){Je.value.classList.remove("jGraduate_tab_current")}}catch(e){et.e(e)}finally{et.f()}switch(a.paint.type){case"linearGradient":Qe=a.querySelector(c+" .jGraduate_tab_lingrad");break;case"radialGradient":Qe=a.querySelector(c+" .jGraduate_tab_radgrad");break;default:Qe=a.querySelector(c+" .jGraduate_tab_color")}a.style.display="block",setTimeout((function(){Qe.classList.add("jGraduate_tab_current"),Qe.dispatchEvent(new Event("click"))}),10)}else alert("Container element must have an id attribute to maintain unique id strings for sub-elements.");function mkStop(e,n,o,i,c){var u=c||mkElem("stop",{id:"jq_stop_"+Math.floor(1e4*Math.random()+1),"stop-color":n,"stop-opacity":o,offset:e},L);c?(n=c.getAttribute("stop-color"),o=c.getAttribute("stop-opacity"),e=c.getAttribute("offset")):L.appendChild(u),null===o&&(o=1);var d="M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",p=mkElem("path",{id:"jq_pathbg_"+Math.floor(1e4*Math.random()+1),d:d,fill:"url(#jGraduate_trans)",transform:"translate("+(10+e*m)+", 26)"},C),g=mkElem("path",{d:d,fill:n,"fill-opacity":o,transform:"translate("+(10+e*m)+", 26)",stroke:"#000","stroke-width":1.5},C);g.addEventListener("mousedown",(function(e){return selectStop(this),oe=ne,h.addEventListener("mousemove",dragColor),h.addEventListener("mouseup",remDrags),ie=findPos(re),e.preventDefault(),!1})),g.dataset.stop=u.getAttribute("id"),g.dataset.bg=p.getAttribute("id"),g.addEventListener("dblclick",(function(){a.querySelector("#jGraduate_LightBox").style.display="block";for(var e=this,o=Number(u.getAttribute("stop-opacity"))||1,i=u.getAttribute("stop-color")||1,c=(255*Number.parseFloat(o)).toString(16);c.length<2;)c="0"+c;n=i.substr(1)+c;var d=a.querySelector("#"+l+"_jGraduate_stopPicker");d.style.left="100px",d.style.bottom="15px",jPickerMethod(d,{window:{title:"Pick the start color and opacity for the gradient"},images:{clientPath:s.images.clientPath},color:{active:n,alphaSupport:!0}},(function(n){i=n.val("hex")?"#"+n.val("hex"):"none",o=null!==n.val("a")?n.val("a")/256:1,e.setAttribute("fill",i),e.setAttribute("fill-opacity",o),u.setAttribute("stop-color",i),u.setAttribute("stop-opacity",o),a.querySelector("#jGraduate_LightBox").style.display="none",a.querySelector("#"+l+"_jGraduate_stopPicker").style.display="none"}),null,(function(){a.querySelector("#jGraduate_LightBox").style.display="none",a.querySelector("#"+l+"_jGraduate_stopPicker").style.display="none"}),r)}));var f,v=_createForOfIteratorHelper(L.querySelectorAll("stop"));try{for(v.s();!(f=v.n()).done;){var b=f.value,y=b;if(Number(b.getAttribute("offset"))>e){if(!n){var k=b.getAttribute("stop-color"),x=b.getAttribute("stop-opacity");u.setAttribute("stop-color",k),g.setAttribute("fill",k),u.setAttribute("stop-opacity",null===x?1:x),g.setAttribute("fill-opacity",null===x?1:x)}y.insertAdjacentElement("beforebegin",u)}}}catch(e){v.e(e)}finally{v.f()}return i&&selectStop(g),u}function selectStop(e){ne&&ne.setAttribute("stroke","#000"),e.setAttribute("stroke","blue"),ne=e}function remDrags(){h.removeEventListener("mousemove",dragColor),"none"!==ae.getAttribute("display")&&function remStop(){ae.setAttribute("display","none");var e=ne;delete e.dataset.stop,delete e.dataset.bg,ne.parentNode.removeChild(ne)}(),oe=null}function xform(){var e=ce?"rotate("+ce+","+ue+","+de+") ":"";if(1===se&&1===le)L.removeAttribute("gradientTransform");else{var n=-ue*(se-1),o=-de*(le-1);L.setAttribute("gradientTransform",e+"translate("+n+","+o+") scale("+se+","+le+")")}}function dragColor(e){var n=e.pageX-ie.left,o=e.pageY-ie.top,i="translate("+(n=n<10?10:n>266?266:n)+", 26)";o<-60||o>130?(ae.setAttribute("display","block"),ae.setAttribute("transform",i)):ae.setAttribute("display","none"),oe.setAttribute("transform",i),a.querySelector("#"+oe.dataset.bg).setAttribute("transform",i);var r=a.querySelector("#"+oe.dataset.stop),s=(n-10)/m;r.setAttribute("offset",s);var l=0,c=L.querySelectorAll("stop");[].forEach.call(c,(function(e){var n=e.getAttribute("offset"),o=e;n<l&&(o.previousElementSibling.insertAdjacentElement("beforebegin",o),te=L.querySelectorAll("stop")),l=n}))}}var Wo=function(){function PaintBox(e,n){_classCallCheck$1(this,PaintBox);var o=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14">\n          <rect\n            fill="#000000" opacity="1" width="14" height="14"/>\n          <defs><linearGradient id="gradbox_'.concat(PaintBox.ctr++,'"/></defs>\n        </svg>'),"text/xml").documentElement;o=document.importNode(o,!0),e.appendChild(o),this.rect=o.firstElementChild,this.defs=o.getElementsByTagName("defs")[0],this.grad=this.defs.firstElementChild,this.type=n}return _createClass$1(PaintBox,[{key:"setPaint",value:function setPaint(e){this.paint=e;var n=e.type,o=e.alpha/100,i="none";switch(n){case"solidColor":i="none"!==e[n]?"#"+e[n]:e[n];break;case"linearGradient":case"radialGradient":this.grad.remove(),this.grad=e[n],this.defs.appendChild(this.grad),i="url(#"+(this.grad.id="gradbox_"+this.type)+")"}this.rect.setAttribute("fill",i),this.rect.setAttribute("opacity",o)}},{key:"update",value:function update(e,n){if(!n)return null;var o=this.type;switch(n.tagName){case"use":case"image":case"foreignObject":return null;case"g":case"a":for(var i=n.getElementsByTagName("*"),r=null,a=0,s=i.length;a<s;a++){var l=i[a].getAttribute(o);if(0===a)r=l;else if(r!==l){r=null;break}}if(null===r)return this._paintColor=null,null;this._paintColor=r,this._paintOpacity=1;break;default:this._paintOpacity=Number.parseFloat(n.getAttribute(o+"-opacity")),Number.isNaN(this._paintOpacity)&&(this._paintOpacity=1);var c="fill"===o?"black":"none";this._paintColor=n.getAttribute(o)||c}this._paintOpacity*=100;var u=PaintBox.getPaint(e,this._paintColor,this._paintOpacity,o);return this.setPaint(u),u}}],[{key:"getPaint",value:function getPaint(e,n,o,i){var r={alpha:o};if(n.startsWith("url(#")){var a=e.getRefElem(n);(a=a?a.cloneNode(!0):document.querySelectorAll("#"+i+"_color defs *")[0])?r[a.tagName]=a:(console.error("the color ".concat(n," is referenced by an url that can't be identified - using 'none'")),r.solidColor="none")}else n.startsWith("#")&&(r.solidColor=n.substr(1));return new Uo.Paint(r)}}]),PaintBox}();Wo.ctr=0;var Yo=document.createElement("template");Yo.innerHTML='\n  <style>\n  .jPicker .Icon {\n    display: inline-block;\n    height: 24px;\n    position: relative;\n    text-align: left;\n    width: 25px\n}\n\n.jPicker .Icon span.Color, .jPicker .Icon span.Alpha {\n    background-position: 2px 2px;\n    display: block;\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%\n}\n\n.jPicker .Icon span.Image {\n    background-repeat: no-repeat;\n    cursor: pointer;\n    display: block;\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%\n}\n\n.jPicker.Container {\n    z-index: 10\n}\n\ntable.jPicker {\n    background-color: #efefef;\n    border: 1px outset #666;\n    font-family: Arial, Helvetica, Sans-Serif;\n    font-size: 12px!important;\n    margin: 0;\n    padding: 5px;\n    width: 545px;\n    z-index: 20\n}\n\n.jPicker .Move {\n    background-color: #ddd;\n    border-color: #fff #666 #666 #fff;\n    border-style: solid;\n    border-width: 1px;\n    cursor: move;\n    height: 12px;\n    padding: 0\n}\n\n.jPicker .Title {\n    font-size: 11px!important;\n    font-weight: bold;\n    margin: -2px 0 0 0;\n    padding: 0;\n    text-align: center;\n    width: 100%\n}\n\n.jPicker div.Map {\n    border-bottom: 2px solid #fff;\n    border-left: 2px solid #9a9a9a;\n    border-right: 2px solid #fff;\n    border-top: 2px solid #9a9a9a;\n    cursor: crosshair;\n    height: 260px;\n    margin: 0 5px 0 5px;\n    overflow: hidden;\n    padding: 0;\n    position: relative;\n    width: 260px\n}\n\n.jPicker div[class="Map"] {\n    height: 256px;\n    width: 256px\n}\n\n.jPicker div.Bar {\n    border-bottom: 2px solid #fff;\n    border-left: 2px solid #9a9a9a;\n    border-right: 2px solid #fff;\n    border-top: 2px solid #9a9a9a;\n    cursor: n-resize;\n    height: 260px;\n    margin: 12px 10px 0 5px;\n    overflow: hidden;\n    padding: 0;\n    position: relative;\n    width: 24px\n}\n\n.jPicker div[class="Bar"] {\n    height: 256px;\n    width: 20px\n}\n\n.jPicker .Map .Map1, .jPicker .Map .Map2, .jPicker .Map .Map3, .jPicker .Bar .Map1, .jPicker .Bar .Map2, .jPicker .Bar .Map3, .jPicker .Bar .Map4, .jPicker .Bar .Map5, .jPicker .Bar .Map6 {\n    background-color: transparent;\n    background-image: none;\n    display: block;\n    left: 0;\n    position: absolute;\n    top: 0\n}\n\n.jPicker .Map .Map1, .jPicker .Map .Map2, .jPicker .Map .Map3 {\n    height: 2596px;\n    width: 256px\n}\n\n.jPicker .Bar .Map1, .jPicker .Bar .Map2, .jPicker .Bar .Map3, .jPicker .Bar .Map4 {\n    height: 3896px;\n    width: 20px\n}\n\n.jPicker .Bar .Map5, .jPicker .Bar .Map6 {\n    height: 256px;\n    width: 20px\n}\n\n.jPicker .Map .Map1, .jPicker .Map .Map2, .jPicker .Bar .Map6 {\n    background-repeat: no-repeat\n}\n\n.jPicker .Map .Map3, .jPicker .Bar .Map5 {\n    background-repeat: repeat\n}\n\n.jPicker .Bar .Map1, .jPicker .Bar .Map2, .jPicker .Bar .Map3, .jPicker .Bar .Map4 {\n    background-repeat: repeat-x\n}\n\n.jPicker .Map .Arrow {\n    display: block;\n    position: absolute\n}\n\n.jPicker .Bar .Arrow {\n    display: block;\n    left: 0;\n    position: absolute\n}\n\n.jPicker .Preview {\n    font-size: 9px;\n    text-align: center\n}\n\n.jPicker .Preview div {\n    border: 2px inset #eee;\n    height: 62px;\n    margin: 0 auto;\n    padding: 0;\n    width: 62px\n}\n\n.jPicker .Preview div span {\n    border: 1px solid #000;\n    display: block;\n    height: 30px;\n    margin: 0 auto;\n    padding: 0;\n    width: 60px\n}\n\n.jPicker .Preview .Active {\n    border-bottom-width: 0\n}\n\n.jPicker .Preview .Current {\n    border-top-width: 0;\n    cursor: pointer\n}\n\n.jPicker .Button {\n    text-align: center;\n    width: 115px\n}\n\n.jPicker .Button input {\n    width: 100px\n}\n\n.jPicker .Button .Ok {\n    margin: 12px 0 5px 0\n}\n\n.jPicker td.Radio {\n    margin: 0;\n    padding: 0;\n    width: 31px\n}\n\n.jPicker td.Radio input {\n    margin: 0 5px 0 0;\n    padding: 0\n}\n\n.jPicker td.Text {\n    font-size: 12px!important;\n    height: 22px;\n    margin: 0;\n    padding: 0;\n    text-align: left;\n    width: 70px\n}\n\n.jPicker tr.Hex td.Text {\n    width: 100px\n}\n\n.jPicker td.Text input {\n    background-color: #fff;\n    border: 1px inset #aaa;\n    height: 19px;\n    margin: 0 0 0 5px;\n    text-align: left;\n    width: 30px\n}\n\n.jPicker td[class="Text"] input {\n    height: 15px\n}\n\n.jPicker tr.Hex td.Text input.Hex {\n    width: 50px\n}\n\n.jPicker tr.Hex td.Text input.AHex {\n    width: 20px\n}\n\n.jPicker .Grid {\n    text-align: center;\n    width: 114px\n}\n\n.jPicker .Grid span.QuickColor {\n    border: 1px inset #aaa;\n    cursor: pointer;\n    display: inline-block;\n    height: 15px;\n    line-height: 15px;\n    margin: 0;\n    padding: 0;\n    width: 19px\n}\n\n.jPicker .Grid span[class="QuickColor"] {\n    width: 17px\n}\n  /*\n * jGraduate Default CSS\n *\n * Copyright (c) 2010 Jeff Schiller\n * http://blog.codedread.com/\n *\n * Copyright (c) 2010 Alexis Deveria\n * http://a.deveria.com/\n *\n * Licensed under the MIT License\n */\n\nh2.jGraduate_Title {\n  font-family: Arial, Helvetica, Sans-Serif;\n  font-size: 11px !important;\n  font-weight: bold;\n  margin: -13px 0px 0px 0px;\n  padding: 0px;\n  text-align: center;\n}\n\n.jGraduate_Picker {\n  font-family: Arial, Helvetica, Sans-Serif;\n  font-size: 12px;\n  border-style: solid;\n  border-color: lightgrey black black lightgrey;\n  border-width: 1px;\n  background-color: #EFEFEF;\n  position: absolute;\n  padding: 10px;\n}\n\n.jGraduate_tabs li {\n  background-color: #ccc;\n  display: inline;\n  border: solid 1px grey;\n  padding: 3px;\n  margin: 2px;\n  cursor: pointer;\n}\n\nli.jGraduate_tab_current {\n  background-color: #EFEFEF;\n  display: inline;\n  padding: 3px;\n  margin: 2px;\n  border: solid 1px black;\n  cursor: pointer;\n}\n\n.jGraduate_colPick {\n  display: none;\n}\n\n.jGraduate_gradPick {\n  display: none;\n  border: outset 1px #666;\n  padding: 10px 7px 5px 5px;\n  overflow: auto;\n}\n\n.jGraduate_gradPick {\n  display: none;\n  border: outset 1px #666;\n  padding: 10px 7px 5px 5px;\n  overflow: auto;\n/*  position: relative;*/\n}\n\n.jGraduate_tabs {\n  position: relative;\n  background-color: #EFEFEF;\n  padding: 0px;\n  margin: 0px;\n  margin-bottom: 5px;\n}\n\ndiv.jGraduate_Swatch {\n  float: left;\n  margin: 8px;\n}\ndiv.jGraduate_GradContainer {\n  border: 2px inset #EEE;\n  background-image: url(./components/jgraduate/images/map-opacity.png);\n  background-position: 0px 0px;\n  height: 256px;\n  width: 256px;\n  position: relative;\n}\n\ndiv.jGraduate_GradContainer div.grad_coord {\n  background: #000;\n  border: 1px solid #fff;\n  border-radius: 5px;\n  -moz-border-radius: 5px;\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  margin: -5px -5px;\n  top: 0;\n  left: 0;\n  text-align: center;\n  font-size: xx-small;\n  line-height: 10px;\n  color: #fff;\n  text-decoration: none;\n  cursor: pointer;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n}\n\n.jGraduate_AlphaArrows {\n  position: absolute;\n  margin-top: -10px;\n  margin-left: 250.5px;\n}\n\ndiv.jGraduate_Opacity {\n  border: 2px inset #eee;\n  margin-top: 14px;\n  background-color: black;\n  background-image: url(../images/Maps.png);\n  background-position: 0px -2816px;\n  height: 20px;\n  cursor: ew-resize;\n}\n\ndiv.jGraduate_StopSlider {\n/*  border: 2px inset #eee;*/\n  margin: 0 0 0 -10px;\n  width: 276px;\n  overflow: visible;\n  background: #efefef;\n  height: 45px;\n  cursor: pointer;\n}\n\ndiv.jGraduate_StopSection {\n  width: 120px;\n  text-align: center;\n}\n\ninput.jGraduate_Ok, input.jGraduate_Cancel {\n  display: block;\n  width: 100px;\n  margin-left: -4px;\n  margin-right: -4px;\n}\ninput.jGraduate_Ok {\n  margin: 9px -4px 5px -4px;\n}\n\n.colorBox {\n  float: left;\n  height: 16px;\n  width: 16px;\n  border: 1px solid var(--border-color);\n  cursor: pointer;\n  margin: 4px 4px 4px 30px;\n}\n\n.colorBox + label {\n  float: left;\n  margin-top: 7px;\n}\n\nlabel.jGraduate_Form_Heading {\n  position: relative;\n  top: 10px;\n  background-color: #EFEFEF;\n  padding: 2px;\n  font-weight: bold;\n  font-size: 13px;\n}\n\ndiv.jGraduate_Form_Section {\n  border-style: solid;\n  border-width: 1px;\n  border-color: grey;\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  padding: 15px 5px 5px 5px;\n  margin: 5px 2px;\n  width: 110px;\n  text-align: center;\n  overflow: auto;\n}\n\ndiv.jGraduate_Form_Section label {\n  padding: 0 2px;\n}\n\ndiv.jGraduate_StopSection input[type=text],\ndiv.jGraduate_Slider input[type=text] {\n  width: 33px;\n}\n\ndiv.jGraduate_LightBox {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  background-color: #000;\n  opacity: 0.5;\n  display: none;\n}\n\ndiv.jGraduate_stopPicker {\n  position: absolute;\n  display: none;\n  background: #E8E8E8;\n}\n\n\n.jGraduate_gradPick {\n  width: 535px;\n}\n\n.jGraduate_gradPick div.jGraduate_OpacField {\n\n  position: absolute;\n  left: 0;\n  bottom: 5px;\n/*\n  width: 270px;\n\n  left: 284px;\n  width: 266px;\n  height: 200px;\n  top: 167px;\n  margin: -3px 3px 0px 4px;\n*/\n}\n\n.jGraduate_gradPick .jGraduate_Form {\n  float: left;\n  width: 270px;\n  position: absolute;\n  left: 284px;\n  width: 266px;\n  height: 200px;\n  top: 167px;\n  margin: -3px 3px 0px 10px;\n}\n\n.jGraduate_gradPick .jGraduate_Points {\n  position: static;\n  width: 150px;\n  margin-left: 0;\n}\n\n.jGraduate_SpreadMethod {\n  position: absolute;\n  right: 8px;\n  top: 100px;\n}\n\n.jGraduate_Colorblocks {\n  display: table;\n  border-spacing: 0 5px;\n}\n\n.jGraduate_colorblock {\n  display: table-row;\n}\n\n.jGraduate_Colorblocks .jGraduate_colorblock > * {\n  display: table-cell;\n  vertical-align: middle;\n  margin: 0;\n  float: none;\n}\n\n.jGraduate_gradPick div.jGraduate_StopSection {\n  float: left;\n  width: 133px;\n  margin-top: -8px;\n}\n\n\n.jGraduate_gradPick .jGraduate_Form_Section {\n  padding-top: 9px;\n}\n\n\n.jGraduate_Slider {\n  text-align: center;\n  float: left;\n  width: 100%;\n}\n\n.jGraduate_Slider .jGraduate_Form_Section {\n  border: none;\n  width: 250px;\n  padding: 0 2px;\n  overflow: visible;\n}\n\n.jGraduate_Slider label {\n  display: inline-block;\n  float: left;\n  line-height: 50px;\n  padding: 0;\n}\n\n.jGraduate_Slider label.prelabel {\n  width: 40px;\n  text-align: left;\n}\n\n.jGraduate_SliderBar {\n  width: 140px;\n  float: left;\n  margin-right: 5px;\n  border:1px solid #BBB;\n  height:20px;\n  margin-top:14px;\n  margin-left:5px;\n  position: relative;\n}\n\ndiv.jGraduate_Slider input {\n  margin-top: 5px;\n}\n\ndiv.jGraduate_Slider img {\n  top: 0;\n  left: 0;\n  position: absolute;\n  margin-top: -10px;\n  cursor:ew-resize;\n}\n\n\n.jGraduate_gradPick .jGraduate_OkCancel {\n  position: absolute;\n  top: 39px;\n  right: 10px;\n  width: 113px;\n\n}\n\n.jGraduate_OpacField {\n  position: absolute;\n  right: -10px;\n  bottom: 0;\n}\n  #logo {\n    height: 18px;\n    width: 18px;\n  }\n  #block {\n    height: 17px;\n    width: 14px;\n    float: right;\n    background-color: darkgrey;\n  }\n  #picker {\n    background: var(--input-color);\n    height: 23px;\n    line-height: 23px;\n    border-radius: 3px;\n    width: 52px;\n    display: flex;\n    align-items: center;\n    margin-right: 4px;\n    margin-top: 1px;\n    justify-content: space-evenly;\n  }\n  #color_picker {\n    z-index: 1000;\n    top: 60%;\n  }\n  </style>\n  <div id="picker">\n      <img src="logo.svg" alt="icon" id="logo">\n      <label for="color" title="" id="label"></label>\n      <div id="block">\n      </div>\n  </div>\n  \x3c!-- hidden div --\x3e\n  <div id="color_picker"></div>\n';var Xo=function(e){_inherits$1(SeColorPicker,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeColorPicker);function SeColorPicker(){var e;return _classCallCheck$1(this,SeColorPicker),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Yo.content.cloneNode(!0)),e.$logo=e._shadowRoot.getElementById("logo"),e.$label=e._shadowRoot.getElementById("label"),e.$block=e._shadowRoot.getElementById("block"),e.paintBox=null,e.i18next=null,e.$picker=e._shadowRoot.getElementById("picker"),e.$color_picker=e._shadowRoot.getElementById("color_picker"),e.imgPath=svgEditor.configObj.curConfig.imgPath,e}return _createClass$1(SeColorPicker,[{key:"init",value:function init(e){this.i18next=e,this.setAttribute("config-change_xxx_color",P("config.change_xxx_color"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"src":this.$logo.setAttribute("src",this.imgPath+"/"+o);break;case"label":this.setAttribute("title",P(o));break;case"type":this.$label.setAttribute("title","config.pick_paint_opavity");break;case"config-change_xxx_color":this.$label.setAttribute("title",o);break;default:console.error("unknown attribute: ".concat(e))}}},{key:"label",get:function get(){return this.$label.getAttribute("title")},set:function set(e){this.setAttribute("label",e)}},{key:"type",get:function get(){return this.getAttribute("type")},set:function set(e){this.setAttribute("type",e)}},{key:"src",get:function get(){return this.getAttribute("src")},set:function set(e){this.setAttribute("src",e)}},{key:"update",value:function update(e,n,o){var i=this.paintBox.update(e,n);if(i&&o){var r=new CustomEvent("change",{detail:{paint:i}});this.dispatchEvent(r)}}},{key:"setPaint",value:function setPaint(e){this.paintBox.setPaint(e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this;this.paintBox=new Wo(this.$block,this.type),svgEditor.$click(this.$picker,(function(){var n=e.paintBox.paint;jGraduateMethod(e.$color_picker,{images:{clientPath:"./components/jgraduate/images/"},paint:n,window:{pickerTitle:e.label},newstop:"inverse"},(function(o){n=new Uo.Paint(o),e.setPaint(n);var i=new CustomEvent("change",{detail:{paint:n}});e.dispatchEvent(i),e.$color_picker.style.display="none"}),(function(){e.$color_picker.style.display="none"}),e.i18next)}))}}],[{key:"observedAttributes",get:function get(){return["label","src","type","config-change_xxx_color"]}}]),SeColorPicker}();customElements.define("se-colorpicker",Xo);var Zo=document.createElement("template");Zo.innerHTML="\n<style>\nselect {\n  margin-top: 8px;\n  background-color: var(--input-color);\n  appearance: none;\n  outline: none;\n  padding: 3px;\n}\nlabel {\n  margin-left: 2px;\n}\n::slotted(*) {\n  padding:0;\n  width:100%;\n}\n</style>\n  <label></label>\n  <select>\n  </select>\n\n";var Jo=function(e){_inherits$1(SeSelect,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeSelect);function SeSelect(){var e;return _classCallCheck$1(this,SeSelect),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Zo.content.cloneNode(!0)),e.$select=e._shadowRoot.querySelector("select"),e.$label=e._shadowRoot.querySelector("label"),e}return _createClass$1(SeSelect,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){var i=this;if(n!==o)switch(e){case"label":this.$label.textContent=P(o);break;case"title":this.$select.setAttribute("title",P(o));break;case"disabled":null===o?this.$select.removeAttribute("disabled"):this.$select.setAttribute("disabled",o);break;case"height":this.$select.style.height=o;break;case"width":this.$select.style.width=o;break;case"options":if(""===o)for(;this.$select.firstChild;)this.$select.removeChild(this.$select.firstChild);else o.split(",").forEach((function(e){var n=document.createElement("OPTION"),o=document.createTextNode(P(e));n.appendChild(o),i.$select.appendChild(n)}));break;case"values":if(""===o)for(;this.$select.firstChild;)this.$select.removeChild(this.$select.firstChild);else o.split("::").forEach((function(e,n){i.$select.children[n].setAttribute("value",e)}));break;default:console.error("unknown attribute: ".concat(e))}}},{key:"label",get:function get(){return this.getAttribute("label")},set:function set(e){this.setAttribute("label",e)}},{key:"width",get:function get(){return this.getAttribute("width")},set:function set(e){this.setAttribute("width",e)}},{key:"height",get:function get(){return this.getAttribute("height")},set:function set(e){this.setAttribute("height",e)}},{key:"value",get:function get(){return this.$select.value},set:function set(e){this.$select.value=e}},{key:"disabled",get:function get(){return this.$select.getAttribute("disabled")},set:function set(e){this.$select.setAttribute("disabled",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this;this.$select.addEventListener("change",(function(){var o=e.$select.value,i=new CustomEvent("change",{detail:{value:o}});n.dispatchEvent(i),n.value=o}))}}],[{key:"observedAttributes",get:function get(){return["label","width","height","options","values","title","disabled"]}}]),SeSelect}();customElements.define("se-select",Jo);var Qo=document.createElement("template");Qo.innerHTML="\n  <style>\n  #layersLabel {\n    font-size: 13px;\n    line-height: normal;\n    font-weight: 700;\n  }\n  </style>\n  <div></div>\n";var ei=function(e){_inherits$1(SeText,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeText);function SeText(){var e;return _classCallCheck$1(this,SeText),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Qo.content.cloneNode(!0)),e.$div=e._shadowRoot.querySelector("div"),e}return _createClass$1(SeText,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"text":this.$div.textContent=P(o);break;case"title":this.$div.setAttribute("title",P(o));break;case"style":this.$div.style=o;break;case"id":this.$div.id=o;break;case"value":this.$div.value=o;break;default:console.error("unknown attribute: ".concat(e))}}},{key:"text",get:function get(){return this.$div.textContent},set:function set(e){this.$div.setAttribute("title",P(e))}},{key:"value",get:function get(){return this.value},set:function set(e){this.value=e}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"connectedCallback",value:function connectedCallback(){}}],[{key:"observedAttributes",get:function get(){return["text","value","style","title","id"]}}]),SeText}();customElements.define("se-text",ei);var ti,ni=Object.freeze({__proto__:null}),oi=Symbol("previousBodyStyleOverflow"),ii=Symbol("previousDocumentMarginRight");var ri=Symbol("wrap"),ai=Symbol("wrappingFocus");function FocusCaptureMixin(e){var n=function(e){_inherits$1(FocusCapture,e);var n=_createSuper$4(FocusCapture);function FocusCapture(){return _classCallCheck$1(this,FocusCapture),n.apply(this,arguments)}return _createClass$1(FocusCapture,[{key:Me,value:function value(e){var n=firstFocusableElement(this[We]);if(n){var o=document.activeElement&&(document.activeElement===n||document.activeElement.contains(n)),i=this[We].activeElement,r=i&&(i===n||deepContains(i,n));(o||r)&&"Tab"===e.key&&e.shiftKey&&(this[ai]=!0,this[je].focusCatcher.focus(),this[ai]=!1)}return _get(_getPrototypeOf$1(FocusCapture.prototype),Me,this)&&_get(_getPrototypeOf$1(FocusCapture.prototype),Me,this).call(this,e)||!1}},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(FocusCapture.prototype),Ge,this)&&_get(_getPrototypeOf$1(FocusCapture.prototype),Ge,this).call(this,e),this[ye]&&this[je].focusCatcher.addEventListener("focus",(function(){if(!n[ai]){var e=firstFocusableElement(n[We]);e&&e.focus()}}))}},{key:ri,value:function value(e){var n=j(ti||(ti=_taggedTemplateLiteral(['\n        <style>\n          #focusCapture {\n            display: flex;\n            height: 100%;\n            overflow: hidden;\n            width: 100%;\n          }\n\n          #focusCaptureContainer {\n            align-items: center;\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            justify-content: center;\n            position: relative;\n          }\n        </style>\n        <div id="focusCapture">\n          <div id="focusCaptureContainer"></div>\n          <div id="focusCatcher" tabindex="0"></div>\n        </div>\n      ']))),o=n.getElementById("focusCaptureContainer");o&&(e.replaceWith(n),o.append(e))}}]),FocusCapture}(e);return n}FocusCaptureMixin.wrap=ri;var si,li,ci=function(e){_inherits$1(ModalBackdrop,On);var n=_createSuper$4(ModalBackdrop);function ModalBackdrop(){var e;return _classCallCheck$1(this,ModalBackdrop),e=n.call(this),"PointerEvent"in window||e.addEventListener("touchmove",(function(e){1===e.touches.length&&e.preventDefault()})),e}return _createClass$1(ModalBackdrop)}(),ui=function DialogModalityMixin(e){return function(e){_inherits$1(DialogModality,e);var n=_createSuper$4(DialogModality);function DialogModality(){return _classCallCheck$1(this,DialogModality),n.apply(this,arguments)}return _createClass$1(DialogModality,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(DialogModality.prototype),ge,this)||{},{role:"dialog"})}},{key:Me,value:function value(e){var n=!1;if("Escape"===e.key)this.close({canceled:"Escape"}),n=!0;return n||_get(_getPrototypeOf$1(DialogModality.prototype),Me,this)&&_get(_getPrototypeOf$1(DialogModality.prototype),Me,this).call(this,e)||!1}},{key:Ge,value:function value(e){if(_get(_getPrototypeOf$1(DialogModality.prototype),Ge,this)&&_get(_getPrototypeOf$1(DialogModality.prototype),Ge,this).call(this,e),e.opened)if(this[Ze].opened&&document.documentElement){var n=document.documentElement.clientWidth,o=window.innerWidth-n;this[oi]=document.body.style.overflow,this[ii]=o>0?document.documentElement.style.marginRight:null,document.body.style.overflow="hidden",o>0&&(document.documentElement.style.marginRight="".concat(o,"px"))}else null!=this[oi]&&(document.body.style.overflow=this[oi],this[oi]=null),null!=this[ii]&&(document.documentElement.style.marginRight=this[ii],this[ii]=null);if(e.role){var i=this[Ze].role;this.setAttribute("role",i)}}},{key:"role",get:function get(){return _get(_getPrototypeOf$1(DialogModality.prototype),"role",this)}},{key:"role",set:function set(e){_set(_getPrototypeOf$1(DialogModality.prototype),"role",e,this,!0),this[Ue]||this[Ke]({role:e})}}]),DialogModality}(e)}(FocusCaptureMixin(KeyboardMixin(Mn))),di=function(e){_inherits$1(Dialog,ui);var n=_createSuper$4(Dialog);function Dialog(){return _classCallCheck$1(this,Dialog),n.apply(this,arguments)}return _createClass$1(Dialog,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(Dialog.prototype),ge,this),{backdropPartType:ci,tabIndex:-1})}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(Dialog.prototype),ut,this),n=e.content.querySelector("#frame");return this[FocusCaptureMixin.wrap](n),e.content.append(j(si||(si=_taggedTemplateLiteral(["\n        <style>\n          :host {\n            display: inline-flex;\n            flex-direction: column;\n            height: 100%;\n            left: 0;\n            pointer-events: initial;\n            top: 0;\n            width: 100%;\n          }\n        </style>\n      "])))),e}}]),Dialog}(),pi=function(e){_inherits$1(PlainModalBackdrop,ci);var n=_createSuper$4(PlainModalBackdrop);function PlainModalBackdrop(){return _classCallCheck$1(this,PlainModalBackdrop),n.apply(this,arguments)}return _createClass$1(PlainModalBackdrop,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainModalBackdrop.prototype),ut,this);return e.content.append(j(li||(li=_taggedTemplateLiteral(["\n        <style>\n          :host {\n            background: rgba(0, 0, 0, 0.2);\n          }\n        </style>\n      "])))),e}}]),PlainModalBackdrop}();function PlainModalOverlayMixin(e){return function(e){_inherits$1(PlainModalOverlay,e);var n=_createSuper$4(PlainModalOverlay);function PlainModalOverlay(){return _classCallCheck$1(this,PlainModalOverlay),n.apply(this,arguments)}return _createClass$1(PlainModalOverlay,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PlainModalOverlay.prototype),ge,this)||{},{backdropPartType:pi,framePartType:_o})}}]),PlainModalOverlay}(e)}var hi=function(e){_inherits$1(PlainDialog,PlainModalOverlayMixin(di));var n=_createSuper$4(PlainDialog);function PlainDialog(){return _classCallCheck$1(this,PlainDialog),n.apply(this,arguments)}return _createClass$1(PlainDialog)}(),gi=function(e){_inherits$1(ElixDialog,hi);var n=_createSuper$4(ElixDialog);function ElixDialog(){return _classCallCheck$1(this,ElixDialog),n.apply(this,arguments)}return _createClass$1(ElixDialog)}();customElements.define("elix-dialog",gi);var fi=e.isValidUnit,vi=document.createElement("template");vi.innerHTML='<style>\n    :not(:defined) {\n        display: none;\n    }\n\n    /* Force the scroll bar to appear so we see it hide when overlay opens. */\n    body::-webkit-scrollbar {\n        background: lightgray;\n    }\n\n    body::-webkit-scrollbar-thumb {\n        background: darkgray;\n    }\n\n    #svg_docprops #svg_docprops_container {\n        padding: 10px;\n        background-color: #5a6162;\n        color: #c5c5c5;\n        border: 1px outset #777;\n        opacity: 1.0;\n        font-family: Verdana, Helvetica, sans-serif;\n        font-size: .8em;\n        z-index: 20001;\n    }\n\n    #svg_docprops .error {\n        border: 1px solid red;\n        padding: 3px;\n    }\n\n    #svg_docprops #resolution {\n        max-width: 14em;\n    }\n\n    #tool_docprops_back {\n        margin-left: 1em;\n        overflow: auto;\n    }\n\n    #svg_docprops_container #svg_docprops_docprops {\n        float: left;\n        width: 221px;\n        margin: 5px .7em;\n        overflow: hidden;\n    }\n\n    #svg_docprops legend {\n        max-width: 195px;\n    }\n\n    #svg_docprops_docprops>legend {\n        font-weight: bold;\n        font-size: 1.1em;\n    }\n\n    #svg_docprops_container fieldset {\n        padding: 5px;\n        margin: 5px;\n        border: 1px solid #DDD;\n    }\n\n    #svg_docprops_container label {\n        display: block;\n        margin: .5em;\n    }\n</style>\n<elix-dialog id="svg_docprops" aria-label="Sample dialog" closed>\n    <div id="svg_docprops_container">\n        <div id="tool_docprops_back" class="toolbar_button">\n            <button id="tool_docprops_save"></button>\n            <button id="tool_docprops_cancel"></button>\n        </div>\n        <fieldset id="svg_docprops_docprops">\n            <legend id="svginfo_image_props"></legend>\n            <label>\n                <span id="svginfo_title"></span>\n                <input type="text" id="canvas_title">\n            </label>\n            <fieldset id="change_resolution">\n                <legend id="svginfo_dim"></legend>\n                <label>\n                    <span id="svginfo_width"></span>\n                    <input type="text" id="canvas_width" size="6">\n                </label>\n                <label>\n                    <span id="svginfo_height"></span>\n                    <input type="text" id="canvas_height" size="6">\n                </label>\n                <label>\n                    <select id="resolution">\n                        <option id="selectedPredefined" selected="selected"></option>\n                        <option>640x480</option>\n                        <option>800x600</option>\n                        <option>1024x768</option>\n                        <option>1280x960</option>\n                        <option>1600x1200</option>\n                        <option id="fitToContent" value="content"></option>\n                    </select>\n                </label>\n            </fieldset>\n            <fieldset id="image_save_opts">\n                <legend id="includedImages"></legend>\n                <label>\n                    <input type="radio" id="image_embed" name="image_opt" value="embed" checked="checked">\n                    <span id="image_opt_embed"></span>\n                </label>\n                <label>\n                    <input type="radio" id="image_ref" name="image_opt" value="ref">\n                    <span id="image_opt_ref"></span>\n                </label>\n            </fieldset>\n        </fieldset>\n    </div>\n</elix-dialog>';var bi=function(e){_inherits$1(SeImgPropDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeImgPropDialog);function SeImgPropDialog(){var e;return _classCallCheck$1(this,SeImgPropDialog),(e=n.call(this)).eventlisten=!1,e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(vi.content.cloneNode(!0)),e.$saveBtn=e._shadowRoot.querySelector("#tool_docprops_save"),e.$cancelBtn=e._shadowRoot.querySelector("#tool_docprops_cancel"),e.$resolution=e._shadowRoot.querySelector("#resolution"),e.$canvasTitle=e._shadowRoot.querySelector("#canvas_title"),e.$canvasWidth=e._shadowRoot.querySelector("#canvas_width"),e.$canvasHeight=e._shadowRoot.querySelector("#canvas_height"),e.$imageOptEmbed=e._shadowRoot.querySelector("#image_embed"),e.$imageOptRef=e._shadowRoot.querySelector("#image_ref"),e.$dialog=e._shadowRoot.querySelector("#svg_docprops"),e}return _createClass$1(SeImgPropDialog,[{key:"init",value:function init(e){this.setAttribute("common-ok",e.t("common.ok")),this.setAttribute("common-cancel",e.t("common.cancel")),this.setAttribute("config-image_props",e.t("config.image_props")),this.setAttribute("config-doc_title",e.t("config.doc_title")),this.setAttribute("config-doc_dims",e.t("config.doc_dims")),this.setAttribute("common-width",e.t("common.width")),this.setAttribute("common-height",e.t("common.height")),this.setAttribute("config-select_predefined",e.t("config.select_predefined")),this.setAttribute("tools-fit-to-content",e.t("tools.fitToContent")),this.setAttribute("config-included_images",e.t("config.included_images")),this.setAttribute("config-image_opt_embed",e.t("config.image_opt_embed")),this.setAttribute("config-image_opt_ref",e.t("config.image_opt_ref"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"title":this.$canvasTitle.value=o;break;case"width":"fit"===o?(this.$canvasWidth.removeAttribute("disabled"),this.$canvasWidth.value=100,this.$canvasHeight.removeAttribute("disabled"),this.$canvasHeight.value=100):this.$canvasWidth.value=o;break;case"height":"fit"===o?(this.$canvasWidth.removeAttribute("disabled"),this.$canvasWidth.value=100,this.$canvasHeight.removeAttribute("disabled"),this.$canvasHeight.value=100):this.$canvasHeight.value=o;break;case"dialog":this.eventlisten&&("open"===o?this.$dialog.open():this.$dialog.close());break;case"save":"ref"===o?(this.$imageOptEmbed.setAttribute("checked",!1),this.$imageOptRef.setAttribute("checked",!0)):(this.$imageOptEmbed.setAttribute("checked",!0),this.$imageOptRef.setAttribute("checked",!1));break;case"embed":if(o.includes("one")){var i=o.split("|");i.length>1&&(this._shadowRoot.querySelector("#image_opt_embed").setAttribute("title",i[1]),this._shadowRoot.querySelector("#image_opt_embed").setAttribute("disabled","disabled"),this._shadowRoot.querySelector("#image_opt_embed").style.color="#666")}break;case"common-ok":this.$saveBtn.textContent=o;break;case"common-cancel":this.$cancelBtn.textContent=o;break;case"config-image_props":this._shadowRoot.querySelector("#svginfo_image_props").textContent=o;break;case"config-doc_title":this._shadowRoot.querySelector("#svginfo_title").textContent=o;break;case"config-doc_dims":this._shadowRoot.querySelector("#svginfo_dim").textContent=o;break;case"common-width":this._shadowRoot.querySelector("#svginfo_width").textContent=o;break;case"common-height":this._shadowRoot.querySelector("#svginfo_height").textContent=o;break;case"config-select_predefined":this._shadowRoot.querySelector("#selectedPredefined").textContent=o;break;case"tools-fit-to-content":this._shadowRoot.querySelector("#fitToContent").textContent=o;break;case"config-included_images":this._shadowRoot.querySelector("#includedImages").textContent=o;break;case"config-image_opt_embed":this._shadowRoot.querySelector("#image_opt_embed").textContent=o;break;case"config-image_opt_ref":this._shadowRoot.querySelector("#image_opt_ref").textContent=o;break;default:_get(_getPrototypeOf$1(SeImgPropDialog.prototype),"attributeChangedCallback",this).call(this,e,n,o)}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"width",get:function get(){return this.getAttribute("width")},set:function set(e){this.setAttribute("width",e)}},{key:"height",get:function get(){return this.getAttribute("height")},set:function set(e){this.setAttribute("height",e)}},{key:"save",get:function get(){return this.getAttribute("save")},set:function set(e){this.setAttribute("save",e)}},{key:"dialog",get:function get(){return this.getAttribute("dialog")},set:function set(e){this.setAttribute("dialog",e)}},{key:"embed",get:function get(){return this.getAttribute("embed")},set:function set(e){this.setAttribute("embed",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=function onCancelHandler(){var n=new CustomEvent("change",{detail:{dialog:"closed"}});e.$canvasWidth.removeAttribute("disabled"),e.$canvasHeight.removeAttribute("disabled"),e.$resolution.selectedIndex=0,e.dispatchEvent(n)};this.$resolution.addEventListener("change",(function onChangeHandler(n){if(n.target.selectedIndex)if("content"===n.target.value)e.$canvasWidth.setAttribute("disabled","disabled"),e.$canvasWidth.value="fit",e.$canvasHeight.setAttribute("disabled","disabled"),e.$canvasHeight.value="fit";else{var o=n.target.value.split("x");e.$canvasWidth.value=o[0],e.$canvasWidth.removeAttribute("disabled"),e.$canvasHeight.value=o[1],e.$canvasHeight.removeAttribute("disabled")}else"fit"===e.$canvasWidth.getAttribute("value")&&(e.$canvasWidth.removeAttribute("disabled"),e.$canvasWidth.value=100,e.$canvasHeight.removeAttribute("disabled"),e.$canvasHeight.value=100)})),svgEditor.$click(this.$saveBtn,(function onSaveHandler(){var n="",o=e.$canvasWidth.value,i=e.$canvasHeight.value;"fit"===o||fi("width",o)?e.$canvasWidth.parentElement.classList.remove("error"):e.$canvasWidth.parentElement.classList.add("error"),"fit"===i||fi("height",o)?e.$canvasHeight.parentElement.classList.remove("error"):e.$canvasHeight.parentElement.classList.add("error"),"true"===e.$imageOptEmbed.getAttribute("checked")&&(n="embed"),"true"===e.$imageOptRef.getAttribute("checked")&&(n="ref");var r=new CustomEvent("change",{detail:{title:e.$canvasTitle.value,w:e.$canvasWidth.value,h:e.$canvasHeight.value,save:n,dialog:"close"}});e.$canvasWidth.removeAttribute("disabled"),e.$canvasHeight.removeAttribute("disabled"),e.$resolution.selectedIndex=0,e.dispatchEvent(r)})),svgEditor.$click(this.$cancelBtn,n),this.$dialog.addEventListener("close",n),this.eventlisten=!0}}],[{key:"observedAttributes",get:function get(){return["title","width","height","save","dialog","embed","common-ok","common-cancel","config-image_props","config-doc_title","config-doc_dims","common-width","common-height","config-select_predefined","tools-fit-to-content","config-included_images","config-image_opt_embed","config-image_opt_ref"]}}]),SeImgPropDialog}();customElements.define("se-img-prop-dialog",bi);var yi=document.createElement("template");yi.innerHTML='<style>\n    :not(:defined) {\n        display: none;\n    }\n\n    /* Force the scroll bar to appear so we see it hide when overlay opens. */\n    body::-webkit-scrollbar {\n        background: lightgray;\n    }\n\n    body::-webkit-scrollbar-thumb {\n        background: darkgray;\n    }\n\n    .toolbar_button button {\n        border: 1px solid #dedede;\n        line-height: 130%;\n        float: left;\n        background: #E8E8E8 none;\n        padding: 5px 10px 5px 7px;\n        /* Firefox */\n        line-height: 17px;\n        /* Safari */\n        margin: 5px 20px 0 0;\n        border: 1px var(--border-color) solid;\n        border-top-color: #FFF;\n        border-left-color: #FFF;\n        border-radius: 5px;\n        -moz-border-radius: 5px;\n        -webkit-border-radius: 5px;\n        cursor: pointer;\n    }\n\n    .toolbar_button button:hover {\n        border: 1px #e0a874 solid;\n        border-top-color: #fcd9ba;\n        border-left-color: #fcd9ba;\n        background-color: #FFC;\n    }\n\n    .toolbar_button button:active {\n        background-color: #F4E284;\n        border-left: 1px solid #663300;\n        border-top: 1px solid #663300;\n    }\n\n    .toolbar_button button .svg_icon {\n        margin: 0 3px -3px 0 !important;\n        padding: 0;\n        border: none;\n        width: 16px;\n        height: 16px;\n    }\n\n    .color_block {\n        top: 0;\n        left: 0;\n    }\n\n    .color_block svg {\n        display: block;\n    }\n\n    #bg_blocks {\n        overflow: auto;\n        margin-left: 30px;\n    }\n\n    #bg_blocks .color_block {\n        position: static;\n    }\n\n    #svginfo_bg_note {\n        font-size: .9em;\n        font-style: italic;\n        color: #444;\n    }\n\n    #svg_prefs #svg_prefs_container {\n        padding: 10px;\n        background-color: #5a6162;\n        color: #c5c5c5;\n        border: 1px outset #777;\n        opacity: 1.0;\n        font-family: Verdana, Helvetica, sans-serif;\n        font-size: .8em;\n        z-index: 20001;\n    }\n\n    #tool_prefs_back {\n        margin-left: 1em;\n        overflow: auto;\n    }\n\n    #tool_prefs_save {\n        width: 30%;\n        background-color: #c79605;\n        margin-left: 20%;\n    }\n\n    #tool_prefs_cancel {\n        width: 30%;\n        background-color: #c8c8c8;\n    }\n\n    #svg_prefs #svg_docprops_prefs {\n        float: left;\n        width: 221px;\n        margin: 5px .7em;\n        overflow: hidden;\n    }\n\n    #svg_prefs_container fieldset+fieldset {\n        float: right;\n    }\n\n    #svg_prefs legend {\n        max-width: 195px;\n    }\n\n    #svg_prefs_container>fieldset>legend {\n        font-weight: bold;\n        font-size: 1.1em;\n    }\n\n    #svg_prefs fieldset {\n        padding: 5px;\n        margin: 5px;\n        border: 1px solid #DDD;\n    }\n\n    #svg_prefs_container label {\n        display: block;\n        margin: .5em;\n    }\n\n    #svg_prefs_container div.color_block {\n        float: left;\n        margin: 2px;\n        padding: 20px;\n        border: 1px solid #6f6f6f;\n    }\n\n    #change_background div.cur_background {\n        border: 2px solid blue;\n        padding: 19px;\n    }\n\n    #canvas_bg_url {\n        display: block;\n        width: 96%;\n    }\n\n    #svg_prefs button {\n        margin-top: 0;\n        margin-bottom: 5px;\n    }\n</style>\n<elix-dialog id="svg_prefs" aria-label="Editor Preferences" closed>\n    <div id="svg_prefs_container">\n        <div id="tool_prefs_back" class="toolbar_button">\n            <button id="tool_prefs_save"></button>\n            <button id="tool_prefs_cancel"></button>\n        </div>\n        <fieldset>\n            <legend id="svginfo_editor_prefs"></legend>\n            <label>\n                <span id="svginfo_lang"></span>\n                \x3c!-- Source: https://en.wikipedia.org/wiki/Language_names --\x3e\n                <select id="lang_select">\n                    <option id="lang_ar" value="ar">العربية</option>\n                    <option id="lang_cs" value="cs">Čeština</option>\n                    <option id="lang_de" value="de">Deutsch</option>\n                    <option id="lang_en" value="en" selected="selected">English</option>\n                    <option id="lang_es" value="es">Español</option>\n                    <option id="lang_fa" value="fa">فارسی</option>\n                    <option id="lang_fr" value="fr">Français</option>\n                    <option id="lang_fy" value="fy">Frysk</option>\n                    <option id="lang_hi" value="hi">हिन्दी, हिंदी</option>\n                    <option id="lang_it" value="it">Italiano</option>\n                    <option id="lang_ja" value="ja">日本語</option>\n                    <option id="lang_nl" value="nl">Nederlands</option>\n                    <option id="lang_pl" value="pl">Polski</option>\n                    <option id="lang_pt-BR" value="pt-BR">Português (BR)</option>\n                    <option id="lang_ro" value="ro">Română</option>\n                    <option id="lang_ru" value="ru">Русский</option>\n                    <option id="lang_sk" value="sk">Slovenčina</option>\n                    <option id="lang_sl" value="sl">Slovenščina</option>\n                    <option id="lang_tr" value="tr">Türkçe</option>\n                    <option id="lang_zh-CN" value="zh-CN">简体中文</option>\n                    <option id="lang_zh-TW" value="zh-TW">繁體中文</option>\n                </select>\n            </label>\n            <fieldset id="change_background">\n                <legend id="svginfo_change_background"></legend>\n                <div id="bg_blocks"></div>\n                <label>\n                    <span id="svginfo_bg_url"></span>\n                    <input type="text" id="canvas_bg_url">\n                </label>\n                <p id="svginfo_bg_note"></p>\n            </fieldset>\n            <fieldset id="change_grid">\n                <legend id="svginfo_grid_settings"></legend>\n                <label for="svginfo_snap_onoff">\n                    <span id="svginfo_snap_onoff"></span>\n                    <input type="checkbox" value="snapping_on" id="grid_snapping_on">\n                </label>\n                <label for="grid_snapping_step">\n                    <span id="svginfo_snap_step"></span>\n                    <input type="text" id="grid_snapping_step" size="3" value="10">\n                </label>\n                <label>\n                    <span id="svginfo_grid_color"></span>\n                    <input type="text" id="grid_color" size="3" value="#000">\n                </label>\n            </fieldset>\n            <fieldset id="units_rulers">\n                <legend id="svginfo_units_rulers"></legend>\n                <label>\n                    <span id="svginfo_rulers_onoff"></span>\n                    <input id="show_rulers" type="checkbox" value="show_rulers" checked="checked">\n                </label>\n                <label>\n                    <span id="svginfo_unit"></span>\n                    <select id="base_unit">\n                        <option value="px">Pixels</option>\n                        <option value="cm">Centimeters</option>\n                        <option value="mm">Millimeters</option>\n                        <option value="in">Inches</option>\n                        <option value="pt">Points</option>\n                        <option value="pc">Picas</option>\n                        <option value="em">Ems</option>\n                        <option value="ex">Exs</option>\n                    </select>\n                </label>\n            </fieldset>\n        </fieldset>\n    </div>\n</elix-dialog>\n';var mi=function(e){_inherits$1(SeEditPrefsDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeEditPrefsDialog);function SeEditPrefsDialog(){var e;return _classCallCheck$1(this,SeEditPrefsDialog),(e=n.call(this)).colorBlocks=["#FFF","#888","#000","chessboard"],e._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(yi.content.cloneNode(!0)),e.$dialog=e._shadowRoot.querySelector("#svg_prefs"),e.$saveBtn=e._shadowRoot.querySelector("#tool_prefs_save"),e.$cancelBtn=e._shadowRoot.querySelector("#tool_prefs_cancel"),e.$langSelect=e._shadowRoot.querySelector("#lang_select"),e.$bgBlocks=e._shadowRoot.querySelector("#bg_blocks"),e.$bgURL=e._shadowRoot.querySelector("#canvas_bg_url"),e.$gridSnappingOn=e._shadowRoot.querySelector("#grid_snapping_on"),e.$gridSnappingStep=e._shadowRoot.querySelector("#grid_snapping_step"),e.$gridColor=e._shadowRoot.querySelector("#grid_color"),e.$showRulers=e._shadowRoot.querySelector("#show_rulers"),e.$baseUnit=e._shadowRoot.querySelector("#base_unit"),e}return _createClass$1(SeEditPrefsDialog,[{key:"init",value:function init(e){this.setAttribute("common-ok",e.t("common.ok")),this.setAttribute("common-cancel",e.t("common.cancel")),this.setAttribute("config-editor_prefs",e.t("config.editor_prefs")),this.setAttribute("config-language",e.t("config.language")),this.setAttribute("config-background",e.t("config.background")),this.setAttribute("common-url",e.t("common.url")),this.setAttribute("config-editor_bg_note",e.t("config.editor_bg_note")),this.setAttribute("config-grid",e.t("config.grid")),this.setAttribute("config-snapping_onoff",e.t("config.snapping_onoff")),this.setAttribute("config-snapping_stepsize",e.t("config.snapping_stepsize")),this.setAttribute("config-grid_color",e.t("config.grid_color")),this.setAttribute("config-units_and_rulers",e.t("config.units_and_rulers")),this.setAttribute("config-show_rulers",e.t("config.show_rulers")),this.setAttribute("config-base_unit",e.t("config.base_unit"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o){var i=this.$bgBlocks.querySelectorAll("div"),r="cur_background";switch(e){case"dialog":"open"===o?this.$dialog.open():this.$dialog.close();break;case"lang":this.$langSelect.value=o;break;case"canvasbg":o?i.forEach((function(e){e.dataset.bgColor===o?e.classList.add(r):e.classList.remove(r)})):i.length>0&&i[0].classList.add(r);break;case"bgurl":this.$bgURL.value=o;break;case"gridsnappingon":"true"===o?this.$gridSnappingOn.checked=!0:"false"===o&&(this.$gridSnappingOn.checked=!1);break;case"gridsnappingstep":this.$gridSnappingStep.value=o;break;case"gridcolor":this.$gridColor.value=o;break;case"showrulers":"true"===o?this.$showRulers.checked=!0:"false"===o&&(this.$showRulers.checked=!1);break;case"baseunit":this.$baseUnit.value=o;break;case"common-ok":this.$saveBtn.textContent=o;break;case"common-cancel":this.$cancelBtn.textContent=o;break;case"config-editor_prefs":this._shadowRoot.querySelector("#svginfo_editor_prefs").textContent=o;break;case"config-language":this._shadowRoot.querySelector("#svginfo_lang").textContent=o;break;case"config-background":this._shadowRoot.querySelector("#svginfo_change_background").textContent=o;break;case"common-url":this._shadowRoot.querySelector("#svginfo_bg_url").textContent=o;break;case"config-editor_bg_note":this._shadowRoot.querySelector("#svginfo_bg_note").textContent=o;break;case"config-grid":this._shadowRoot.querySelector("#svginfo_grid_settings").textContent=o;break;case"config-snapping_onoff":this._shadowRoot.querySelector("#svginfo_snap_onoff").textContent=o;break;case"config-snapping_stepsize":this._shadowRoot.querySelector("#svginfo_snap_step").textContent=o;break;case"config-grid_color":this._shadowRoot.querySelector("#svginfo_grid_color").textContent=o;break;case"config-units_and_rulers":this._shadowRoot.querySelector("#svginfo_units_rulers").textContent=o;break;case"config-show_rulers":this._shadowRoot.querySelector("#svginfo_rulers_onoff").textContent=o;break;case"config-base_unit":this._shadowRoot.querySelector("#svginfo_unit").textContent=o;break;default:_get(_getPrototypeOf$1(SeEditPrefsDialog.prototype),"attributeChangedCallback",this).call(this,e,n,o)}}}},{key:"lang",get:function get(){return this.getAttribute("lang")},set:function set(e){this.setAttribute("lang",e)}},{key:"canvasbg",get:function get(){return this.getAttribute("canvasbg")},set:function set(e){this.setAttribute("canvasbg",e)}},{key:"bgurl",get:function get(){return this.getAttribute("bgurl")},set:function set(e){this.setAttribute("bgurl",e)}},{key:"dialog",get:function get(){return this.getAttribute("dialog")},set:function set(e){this.setAttribute("dialog",e)}},{key:"gridsnappingon",get:function get(){return this.getAttribute("gridsnappingon")},set:function set(e){this.setAttribute("gridsnappingon",e)}},{key:"gridsnappingstep",get:function get(){return this.getAttribute("gridsnappingstep")},set:function set(e){this.setAttribute("gridsnappingstep",e)}},{key:"gridcolor",get:function get(){return this.getAttribute("gridcolor")},set:function set(e){this.setAttribute("gridcolor",e)}},{key:"showrulers",get:function get(){return this.getAttribute("showrulers")},set:function set(e){this.setAttribute("showrulers",e)}},{key:"baseunit",get:function get(){return this.getAttribute("baseunit")},set:function set(e){this.setAttribute("baseunit",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=function onCancelHandler(){var n=new CustomEvent("change",{detail:{dialog:"closed"}});e.dispatchEvent(n)},o=this;this.colorBlocks.forEach((function(e){var n=document.createElement("div");"chessboard"===e?(n.dataset.bgColor=e,n.style.backgroundImage="url(data:image/gif;base64,R0lGODlhEAAQAIAAAP///9bW1iH5BAAAAAAALAAAAAAQABAAAAIfjG+gq4jM3IFLJgpswNly/XkcBpIiVaInlLJr9FZWAQA7)",n.classList.add("color_block")):(n.dataset.bgColor=e,n.style.backgroundColor=e,n.classList.add("color_block")),o.$bgBlocks.append(n)}));var i=this.$bgBlocks.querySelectorAll("div"),r="cur_background";i.forEach((function(e){svgEditor.$click(e,(function(){i.forEach((function(e){return e.classList.remove(r)})),e.classList.add(r)}))})),svgEditor.$click(this.$saveBtn,(function onSaveHandler(){var n=e.$bgBlocks.querySelector(".cur_background").dataset.bgColor||"#FFF",o=new CustomEvent("change",{detail:{lang:e.$langSelect.value,dialog:"close",bgcolor:n,bgurl:e.$bgURL.value,gridsnappingon:e.$gridSnappingOn.checked,gridsnappingstep:e.$gridSnappingStep.value,showrulers:e.$showRulers.checked,baseunit:e.$baseUnit.value}});e.dispatchEvent(o)})),svgEditor.$click(this.$cancelBtn,n),this.$dialog.addEventListener("close",n)}}],[{key:"observedAttributes",get:function get(){return["dialog","lang","canvasbg","bgurl","gridsnappingon","gridsnappingstep","gridcolor","showrulers","baseunit","common-ok","common-cancel","config-editor_prefs","config-language","config-background","common-url","config-editor_bg_note","config-grid","config-snapping_onoff","config-snapping_stepsize","config-grid_color","config-units_and_rulers","config-show_rulers","config-base_unit"]}}]),SeEditPrefsDialog}();customElements.define("se-edit-prefs-dialog",mi);var _i=document.createElement("template");_i.innerHTML='<style>\n    :not(:defined) {\n        display: none;\n    }\n\n    /* Force the scroll bar to appear so we see it hide when overlay opens. */\n    body::-webkit-scrollbar {\n        background: lightgray;\n    }\n\n    body::-webkit-scrollbar-thumb {\n        background: darkgray;\n    }\n\n    #svg_source_editor #svg_source_container {\n        background-color: #5a6162;\n        color: #c5c5c5;\n        opacity: 1.0;\n        text-align: center;\n        border: 1px outset #777;\n        z-index: 6;\n    }\n\n    #save_output_btns {\n        display: none;\n        text-align: left;\n    }\n\n    #save_output_btns p {\n        margin: .5em 1.5em;\n        display: inline-block;\n    }\n\n    #svg_source_editor form {\n        width: 100%;\n    }\n\n    #svg_source_editor #svg_source_textarea {\n        padding: 5px;\n        font-size: 12px;\n        min-height: 200px;\n        width: 95%;\n        height: 95%;\n    }\n\n    #svg_source_editor #tool_source_back {\n        text-align: left;\n        height: 30px;\n    }\n\n    #tool_source_save {\n        width: 20%;\n        background-color: #c79605;\n        margin-left: 30%;\n        margin-top: 5px;\n    }\n    \n    #tool_source_dynamic {\n        cursor: pointer;\n    }\n    \n    .tool_label {\n        cursor: pointer;\n        margin: 5px 0;\n        display: inline-block;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n    }\n\n    #tool_source_cancel {\n        width: 20%;\n        background-color: #c8c8c8;\n    }\n</style>\n<elix-dialog id="svg_source_editor" aria-label="SVG Source Editor" closed>\n    <div id="svg_source_container">\n        <div id="tool_source_back" class="toolbar_button">\n            <button id="tool_source_save"></button>\n            <button id="tool_source_cancel"></button>\n        </div>\n        <div id="save_output_btns">\n            <p id="copy_save_note"></p>\n            <button id="copy_save_done"></button>\n        </div>\n        <form>\n            <textarea id="svg_source_textarea" spellcheck="false" rows="5" cols="80"></textarea>\n        </form>\n        <label class="tool_label" for="tool_source_dynamic">\n          <input type="checkbox" id="tool_source_dynamic" checked="checked">Toggle dynamic size\n        </label>\n    </div>\n</elix-dialog>';var ki=function(e){_inherits$1(SeSvgSourceEditorDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeSvgSourceEditorDialog);function SeSvgSourceEditorDialog(){var e;return _classCallCheck$1(this,SeSvgSourceEditorDialog),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(_i.content.cloneNode(!0)),e.$dialog=e._shadowRoot.querySelector("#svg_source_editor"),e.$copyBtn=e._shadowRoot.querySelector("#copy_save_done"),e.$saveBtn=e._shadowRoot.querySelector("#tool_source_save"),e.$cancelBtn=e._shadowRoot.querySelector("#tool_source_cancel"),e.$sourceTxt=e._shadowRoot.querySelector("#svg_source_textarea"),e.$copySec=e._shadowRoot.querySelector("#save_output_btns"),e.$applySec=e._shadowRoot.querySelector("#tool_source_back"),e.$toggleDynamic=e._shadowRoot.querySelector("#tool_source_dynamic"),e.$toggleDynamic.checked=svgEditor.configObj.curConfig.dynamicOutput,e}return _createClass$1(SeSvgSourceEditorDialog,[{key:"init",value:function init(e){this.setAttribute("tools-source_save",e.t("tools.source_save")),this.setAttribute("common-cancel",e.t("common.cancel")),this.setAttribute("notification-source_dialog_note",e.t("notification.source_dialog_note")),this.setAttribute("config-done",e.t("config.done"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"dialog":"open"===o?(this.$sourceTxt.focus(),this.$dialog.open()):(this.$dialog.close(),this.$sourceTxt.blur());break;case"applysec":this.$applySec.style.display="false"===o?"none":"block";break;case"copysec":this.$copySec.style.display="false"===o?"none":"block";break;case"value":this.$sourceTxt.value=o;break;case"tools-source_save":this.$saveBtn.textContent=o;break;case"common-cancel":this.$cancelBtn.textContent=o;break;case"notification-source_dialog_note":this._shadowRoot.querySelector("#copy_save_note").textContent=o;break;case"config-done":this.$copyBtn.textContent=o;break;default:_get(_getPrototypeOf$1(SeSvgSourceEditorDialog.prototype),"attributeChangedCallback",this).call(this,e,n,o)}}},{key:"dialog",get:function get(){return this.getAttribute("dialog")},set:function set(e){this.setAttribute("dialog",e)}},{key:"value",get:function get(){return this.getAttribute("value")},set:function set(e){this.setAttribute("value",e)}},{key:"applysec",get:function get(){return this.getAttribute("applysec")},set:function set(e){this.setAttribute("applysec",e)}},{key:"copysec",get:function get(){return this.getAttribute("copysec")},set:function set(e){this.setAttribute("copysec",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=function onCancelHandler(){var n=new CustomEvent("change",{detail:{dialog:"closed"}});e.dispatchEvent(n)};svgEditor.$click(this.$copyBtn,(function onCopyHandler(){var n=new CustomEvent("change",{detail:{copy:"click",value:e.$sourceTxt.value}});e.dispatchEvent(n)})),svgEditor.$click(this.$saveBtn,(function onSaveHandler(){var n=new CustomEvent("change",{detail:{value:e.$sourceTxt.value,dialog:"close"}});e.dispatchEvent(n)})),svgEditor.$click(this.$cancelBtn,n),svgEditor.$click(this.$toggleDynamic,(function onToggleDynamicHandler(){var n=new CustomEvent("change",{detail:{dynamic:e.$toggleDynamic.checked,dialog:"dynamic"}});e.dispatchEvent(n)})),this.$dialog.addEventListener("close",n)}}],[{key:"observedAttributes",get:function get(){return["dialog","value","applysec","copysec","tools-source_save","common-cancel","notification-source_dialog_note","config-done"]}}]),SeSvgSourceEditorDialog}();customElements.define("se-svg-source-editor-dialog",ki);var xi=document.createElement("template");xi.innerHTML='<style>\n    .contextMenu {\n        position: absolute;\n        z-index: 99999;\n        border: solid 1px rgba(0, 0, 0, .33);\n        background: rgba(255, 255, 255, .95);\n        padding: 5px 0;\n        margin: 0px;\n        display: none;\n        font: 12px/15px Lucida Sans, Helvetica, Verdana, sans-serif;\n        border-radius: 5px;\n        -moz-border-radius: 5px;\n        -moz-box-shadow: 2px 5px 10px rgba(0, 0, 0, .3);\n        -webkit-box-shadow: 2px 5px 10px rgba(0, 0, 0, .3);\n        box-shadow: 2px 5px 10px rgba(0, 0, 0, .3);\n    }\n\n    .contextMenu li {\n        list-style: none;\n        padding: 0px;\n        margin: 0px;\n    }\n\n    .contextMenu .shortcut {\n        width: 115px;\n        text-align: right;\n        float: right;\n    }\n\n    .contextMenu a {\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        user-select: none;\n        color: #222;\n        text-decoration: none;\n        display: block;\n        line-height: 20px;\n        height: 20px;\n        background-position: 6px center;\n        background-repeat: no-repeat;\n        outline: none;\n        padding: 0px 15px 1px 20px;\n    }\n\n    .contextMenu li.hover a {\n        background-color: #2e5dea;\n        color: white;\n        cursor: default;\n    }\n\n    .contextMenu li.disabled a {\n        color: #999;\n        pointer-events: none;\n    }\n\n    .contextMenu li.hover.disabled a {\n        background-color: transparent;\n    }\n\n    .contextMenu li.separator {\n        border-top: solid 1px #E3E3E3;\n        padding-top: 5px;\n        margin-top: 5px;\n    }\n</style>\n<ul id="cmenu_canvas" class="contextMenu">\n    <li>\n        <a href="#cut" id="se-cut">\n            <span class="shortcut">META+X</span>\n        </a>\n    </li>\n    <li>\n        <a href="#copy" id="se-copy">\n            <span class="shortcut">META+C</span>\n        </a>\n    </li>\n    <li>\n        <a href="#paste" id="se-paste"></a>\n    </li>\n    <li>\n        <a href="#paste_in_place" id="se-paste-in-place"></a>\n    </li>\n    <li class="separator">\n        <a href="#delete" id="se-delete">\n            <span class="shortcut">BACKSPACE</span>\n        </a>\n    </li>\n    <li class="separator">\n        <a href="#group" id="se-group">\n            <span class="shortcut">G</span>\n        </a>\n    </li>\n    <li>\n        <a href="#ungroup" id="se-ungroup">\n            <span class="shortcut">G</span>\n        </a>\n    </li>\n    <li class="separator">\n        <a href="#move_front" id="se-move-front">\n            <span class="shortcut">CTRL+SHFT+]</span>\n        </a>\n    </li>\n    <li>\n        <a href="#move_up" id="se-move-up">\n            <span class="shortcut">CTRL+]</span>\n        </a>\n    </li>\n    <li>\n        <a href="#move_down" id="se-move-down">\n            <span class="shortcut">CTRL+[</span>\n        </a>\n    </li>\n    <li>\n        <a href="#move_back" id="se-move-back">\n            <span class="shortcut">CTRL+SHFT+[</span>\n        </a>\n    </li>\n</ul>';var wi=function(e){_inherits$1(SeCMenuDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeCMenuDialog);function SeCMenuDialog(){var e;return _classCallCheck$1(this,SeCMenuDialog),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(xi.content.cloneNode(!0)),e._workarea=document.getElementById("workarea"),e.$dialog=e._shadowRoot.querySelector("#cmenu_canvas"),e.$copyLink=e._shadowRoot.querySelector("#se-copy"),e.$cutLink=e._shadowRoot.querySelector("#se-cut"),e.$pasteLink=e._shadowRoot.querySelector("#se-paste"),e.$pasteInPlaceLink=e._shadowRoot.querySelector("#se-paste-in-place"),e.$deleteLink=e._shadowRoot.querySelector("#se-delete"),e.$groupLink=e._shadowRoot.querySelector("#se-group"),e.$ungroupLink=e._shadowRoot.querySelector("#se-ungroup"),e.$moveFrontLink=e._shadowRoot.querySelector("#se-move-front"),e.$moveUpLink=e._shadowRoot.querySelector("#se-move-up"),e.$moveDownLink=e._shadowRoot.querySelector("#se-move-down"),e.$moveBackLink=e._shadowRoot.querySelector("#se-move-back"),e}return _createClass$1(SeCMenuDialog,[{key:"init",value:function init(e){this.setAttribute("tools-cut",e.t("tools.cut")),this.setAttribute("tools-copy",e.t("tools.copy")),this.setAttribute("tools-paste",e.t("tools.paste")),this.setAttribute("tools-paste_in_place",e.t("tools.paste_in_place")),this.setAttribute("tools-delete",e.t("tools.delete")),this.setAttribute("tools-group",e.t("tools.group")),this.setAttribute("tools-ungroup",e.t("tools.ungroup")),this.setAttribute("tools-move_front",e.t("tools.move_front")),this.setAttribute("tools-move_up",e.t("tools.move_up")),this.setAttribute("tools-move_down",e.t("tools.move_down")),this.setAttribute("tools-move_back",e.t("tools.move_back"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){var i,r=this._shadowRoot;switch(e){case"disableallmenu":if("true"===o)r.querySelectorAll("li").forEach((function(e){e.classList.add("disabled")}));break;case"enablemenuitems":o.split(",").forEach((function(e){r.querySelector('a[href*="'+e+'"]').parentElement.classList.remove("disabled")}));break;case"disablemenuitems":o.split(",").forEach((function(e){r.querySelector('a[href*="'+e+'"]').parentElement.classList.add("disabled")}));break;case"tools-cut":i=document.createTextNode(o),this.$cutLink.prepend(i);break;case"tools-copy":i=document.createTextNode(o),this.$copyLink.prepend(i);break;case"tools-paste":this.$pasteLink.textContent=o;break;case"tools-paste_in_place":this.$pasteInPlaceLink.textContent=o;break;case"tools-delete":i=document.createTextNode(o),this.$deleteLink.prepend(i);break;case"tools-group":i=document.createTextNode(o),this.$groupLink.prepend(i);break;case"tools-ungroup":i=document.createTextNode(o),this.$ungroupLink.prepend(i);break;case"tools-move_front":i=document.createTextNode(o),this.$moveFrontLink.prepend(i);break;case"tools-move_up":i=document.createTextNode(o),this.$moveUpLink.prepend(i);break;case"tools-move_down":i=document.createTextNode(o),this.$moveDownLink.prepend(i);break;case"tools-move_back":i=document.createTextNode(o),this.$moveBackLink.prepend(i)}}},{key:"disableallmenu",get:function get(){return this.getAttribute("disableallmenu")},set:function set(e){this.setAttribute("disableallmenu",e)}},{key:"enablemenuitems",get:function get(){return this.getAttribute("enablemenuitems")},set:function set(e){this.setAttribute("enablemenuitems",e)}},{key:"disablemenuitems",get:function get(){return this.getAttribute("disablemenuitems")},set:function set(e){this.setAttribute("disablemenuitems",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this,o=function onMenuClickHandler(n,o){var i=new CustomEvent("change",{detail:{trigger:o}});e.dispatchEvent(i)};this._workarea.addEventListener("contextmenu",(function onMenuOpenHandler(e){e.preventDefault();var o=e.pageX,i=e.pageY,r=screen.width-250,a=screen.height-426;o>r&&(o=r),i>a&&(i=a),n.$dialog.style.top=i+"px",n.$dialog.style.left=o+"px",n.$dialog.style.display="block"})),this._workarea.addEventListener("mousedown",(function onMenuCloseHandler(e){2!==e.button&&(n.$dialog.style.display="none")})),svgEditor.$click(this.$cutLink,(function(e){return o(0,"cut")})),svgEditor.$click(this.$copyLink,(function(e){return o(0,"copy")})),svgEditor.$click(this.$pasteLink,(function(e){return o(0,"paste")})),svgEditor.$click(this.$pasteInPlaceLink,(function(e){return o(0,"paste_in_place")})),svgEditor.$click(this.$deleteLink,(function(e){return o(0,"delete")})),svgEditor.$click(this.$groupLink,(function(e){return o(0,"group")})),svgEditor.$click(this.$ungroupLink,(function(e){return o(0,"ungroup")})),svgEditor.$click(this.$moveFrontLink,(function(e){return o(0,"move_front")})),svgEditor.$click(this.$moveUpLink,(function(e){return o(0,"move_up")})),svgEditor.$click(this.$moveDownLink,(function(e){return o(0,"move_down")})),svgEditor.$click(this.$moveBackLink,(function(e){return o(0,"move_back")}))}}],[{key:"observedAttributes",get:function get(){return["disableallmenu","enablemenuitems","disablemenuitems","tools-cut","tools-copy","tools-paste","tools-paste_in_place","tools-delete","tools-group","tools-ungroup","tools-move_front","tools-move_up","tools-move_down","tools-move_back"]}}]),SeCMenuDialog}();customElements.define("se-cmenu_canvas-dialog",wi);var Ci=document.createElement("template");Ci.innerHTML='<style>\n    .contextMenu {\n        position: absolute;\n        z-index: 99999;\n        border: solid 1px rgba(0, 0, 0, .33);\n        background: rgba(255, 255, 255, .95);\n        padding: 5px 0;\n        margin: 0px;\n        display: none;\n        font: 12px/15px Lucida Sans, Helvetica, Verdana, sans-serif;\n        border-radius: 5px;\n        -moz-border-radius: 5px;\n        -moz-box-shadow: 2px 5px 10px rgba(0, 0, 0, .3);\n        -webkit-box-shadow: 2px 5px 10px rgba(0, 0, 0, .3);\n        box-shadow: 2px 5px 10px rgba(0, 0, 0, .3);\n    }\n\n    .contextMenu li {\n        list-style: none;\n        padding: 0px;\n        margin: 0px;\n    }\n\n    .contextMenu .shortcut {\n        width: 115px;\n        text-align: right;\n        float: right;\n    }\n\n    .contextMenu a {\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        user-select: none;\n        color: #222;\n        text-decoration: none;\n        display: block;\n        line-height: 20px;\n        height: 20px;\n        background-position: 6px center;\n        background-repeat: no-repeat;\n        outline: none;\n        padding: 0px 15px 1px 20px;\n    }\n\n    .contextMenu li.hover a {\n        background-color: #2e5dea;\n        color: white;\n        cursor: default;\n    }\n\n    .contextMenu li.disabled a {\n        color: #999;\n        pointer-events: none;\n    }\n\n    .contextMenu li.hover.disabled a {\n        background-color: transparent;\n    }\n\n    .contextMenu li.separator {\n        border-top: solid 1px #E3E3E3;\n        padding-top: 5px;\n        margin-top: 5px;\n    }\n</style>\n<ul id="cmenu_layers" class="contextMenu">\n    <li><a href="#dupe" id="se-dupe">#{svgEditor.i18next.t(\'layers.dupe\')}</a></li>\n    <li><a href="#delete" id="se-layer-delete">#{svgEditor.i18next.t(\'layers.del\')}</a></li>\n    <li><a href="#merge_down" id="se-merge-down">#{svgEditor.i18next.t(\'layers.merge_down\')}</a></li>\n    <li><a href="#merge_all" id="se-merge-all">#{svgEditor.i18next.t(\'layers.merge_all\')}</a></li>\n</ul>';var Si,Pi=function(e){_inherits$1(SeCMenuLayerDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeCMenuLayerDialog);function SeCMenuLayerDialog(){var e;return _classCallCheck$1(this,SeCMenuLayerDialog),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Ci.content.cloneNode(!0)),e.source="",e._workarea=void 0,e.$sidePanels=document.getElementById("sidepanels"),e.$dialog=e._shadowRoot.querySelector("#cmenu_layers"),e.$duplicateLink=e._shadowRoot.querySelector("#se-dupe"),e.$deleteLink=e._shadowRoot.querySelector("#se-layer-delete"),e.$mergeDownLink=e._shadowRoot.querySelector("#se-merge-down"),e.$mergeAllLink=e._shadowRoot.querySelector("#se-merge-all"),e}return _createClass$1(SeCMenuLayerDialog,[{key:"init",value:function init(e){this.setAttribute("layers-dupe",e.t("layers.dupe")),this.setAttribute("layers-del",e.t("layers.del")),this.setAttribute("layers-merge_down",e.t("layers.merge_down")),this.setAttribute("layers-merge_all",e.t("layers.merge_all"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){if(n!==o)switch(e){case"value":this.source=o,""!==o&&void 0!==o&&(this._workarea=document.getElementById(this.source));break;case"layers-dupe":this.$duplicateLink.textContent=o;break;case"layers-del":this.$deleteLink.textContent=o;break;case"layers-merge_down":this.$mergeDownLink.textContent=o;break;case"layers-merge_all":this.$mergeAllLink.textContent=o}}},{key:"value",get:function get(){return this.getAttribute("value")},set:function set(e){this.setAttribute("value",e)}},{key:"leftclick",get:function get(){return this.getAttribute("leftclick")},set:function set(e){this.setAttribute("leftclick",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this,n=this,o=function onMenuOpenHandler(e){e.preventDefault(),n.$dialog.style.top=e.pageY+"px",n.$dialog.style.left=e.pageX-126+"px",n.$dialog.style.display="block"},i=function onMenuCloseHandler(e){2!==e.button&&(n.$dialog.style.display="none")},r=function onMenuClickHandler(o,i,r){var a=new CustomEvent("change",{detail:{trigger:i,source:r}});e.dispatchEvent(a),n.$dialog.style.display="none"};void 0!==this._workarea&&(this._workarea.addEventListener("contextmenu",o),"true"===this.getAttribute("leftclick")&&svgEditor.$click(this._workarea,o),this._workarea.addEventListener("mousedown",i),this.$sidePanels.addEventListener("mousedown",i)),svgEditor.$click(this.$duplicateLink,(function(n){return r(0,"dupe",e.source)})),svgEditor.$click(this.$deleteLink,(function(n){return r(0,"delete",e.source)})),svgEditor.$click(this.$mergeDownLink,(function(n){return r(0,"merge_down",e.source)})),svgEditor.$click(this.$mergeAllLink,(function(n){return r(0,"merge_all",e.source)}))}}],[{key:"observedAttributes",get:function get(){return["value","leftclick","layers-dupe","layers-del","layers-merge_down","layers-merge_all"]}}]),SeCMenuLayerDialog}();customElements.define("se-cmenu-layers",Pi);var $i,Ei,Li,Oi=function(e){_inherits$1(AlertDialog,di);var n=_createSuper$4(AlertDialog);function AlertDialog(){return _classCallCheck$1(this,AlertDialog),n.apply(this,arguments)}return _createClass$1(AlertDialog,[{key:"choiceButtons",get:function get(){return this[Ze].choiceButtons}},{key:"choiceButtonPartType",get:function get(){return this[Ze].choiceButtonPartType},set:function set(e){this[Ke]({choiceButtonPartType:e})}},{key:"choices",get:function get(){return this[Ze].choices},set:function set(e){this[Ke]({choices:e})}},{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(AlertDialog.prototype),ge,this),{choiceButtonPartType:"button",choiceButtons:[],choices:["OK"]})}},{key:Me,value:function value(e){var n=!1,o=1===e.key.length&&e.key.toLowerCase();if(o){var i=this.choices.find((function(e){return e[0].toLowerCase()===o}));i&&(this.close({choice:i}),n=!0)}return n||_get(_getPrototypeOf$1(AlertDialog.prototype),Me,this)&&_get(_getPrototypeOf$1(AlertDialog.prototype),Me,this).call(this,e)||!1}},{key:Ge,value:function value(e){var n=this;_get(_getPrototypeOf$1(AlertDialog.prototype),Ge,this).call(this,e),this[ye]&&this[je].choiceButtonContainer.addEventListener("click",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var o,i;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(!((o=e.target)instanceof HTMLElement)){r.next=7;break}return i=o.textContent,n[Fe]=!0,r.next=6,n.close({choice:i});case 6:n[Fe]=!1;case 7:case"end":return r.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}()),e.choiceButtons&&function updateChildNodes(e,n){for(var o=_toConsumableArray(n),i=e.childNodes.length,r=o.length,a=Math.max(i,r),s=0;s<a;s++){var l=e.childNodes[s],c=o[s];s>=i?e.append(c):s>=r?e.removeChild(e.childNodes[r]):l!==c&&(o.indexOf(l,s)>=s?e.insertBefore(c,l):e.replaceChild(c,l))}}(this[je].choiceButtonContainer,this[Ze].choiceButtons)}},{key:Je,value:function value(e,n){var o=_get(_getPrototypeOf$1(AlertDialog.prototype),Je,this).call(this,e,n);if(n.choiceButtonPartType||n.choices){var i=e.choices.map((function(n){var o=createElement(e.choiceButtonPartType);return"part"in o&&(o.part="choice-button"),o.textContent=n,o}));Object.freeze(i),Object.assign(o,{choiceButtons:i})}return o}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(AlertDialog.prototype),ut,this),n=e.content.querySelector("slot:not([name])");return n&&n.replaceWith(j(Si||(Si=_taggedTemplateLiteral(['\n        <div id="alertDialogContent">\n          <slot></slot>\n          <div id="choiceButtonContainer" part="choice-button-container"></div>\n        </div>\n      '])))),e}}]),AlertDialog}(),Ai=function(e){_inherits$1(PlainAlertDialog,PlainModalOverlayMixin(Oi));var n=_createSuper$4(PlainAlertDialog);function PlainAlertDialog(){return _classCallCheck$1(this,PlainAlertDialog),n.apply(this,arguments)}return _createClass$1(PlainAlertDialog,[{key:ge,get:function get(){return Object.assign(_get(_getPrototypeOf$1(PlainAlertDialog.prototype),ge,this),{choiceButtonPartType:vo})}},{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(PlainAlertDialog.prototype),ut,this);return e.content.append(j($i||($i=_taggedTemplateLiteral(['\n        <style>\n          [part~="frame"] {\n            padding: 1em;\n          }\n\n          [part~="choice-button-container"] {\n            margin-top: 1em;\n          }\n\n          [part~="choice-button"]:not(:first-child) {\n            margin-left: 0.5em;\n          }\n        </style>\n      '])))),e}}]),PlainAlertDialog}(),Ti=function(e){_inherits$1(SePlainAlertDialog,Ai);var n=_createSuper$4(SePlainAlertDialog);function SePlainAlertDialog(){return _classCallCheck$1(this,SePlainAlertDialog),n.apply(this,arguments)}return _createClass$1(SePlainAlertDialog,[{key:ut,get:function get(){var e=_get(_getPrototypeOf$1(SePlainAlertDialog.prototype),ut,this),n=e.content.querySelector("#frameContent");return n&&n.replaceWith(j(Ei||(Ei=_taggedTemplateLiteral(['\n        <div id="alertDialogContent">\n          <div id="se-content-alert">\n            <slot></slot>\n          </div>\n          <div id="choiceButtonContainer" part="choice-button-container"></div>\n        </div>\n      '])))),e.content.append(j(Li||(Li=_taggedTemplateLiteral(['\n        <style>\n          [part~="frame"] {\n            padding: 1em;\n            background: #CCC;\n            width: 300px;\n            border: 1px outset #777;\n            font-size: 0.8em;\n            font-family: Verdana,Helvetica,sans-serif;\n            border-radius: 5px;\n            -moz-border-radius: 5px;\n            -webkit-border-radius: 5px;\n          }\n\n          [part~="choice-button-container"] {\n            margin-top: 1em;\n            text-align: center;\n          }\n\n          [part~="choice-button"]:not(:first-child) {\n            margin-left: 0.5em;\n          }\n          #se-content-alert{\n            height: 95px;\n            background: #DDD;\n            overflow: auto;\n            text-align: left;\n            border: 1px solid #5a6162;\n            padding: 1em;\n            border-radius: 5px;\n            -moz-border-radius: 5px;\n            -webkit-border-radius: 5px;\n          }\n        </style>\n      '])))),e}}]),SePlainAlertDialog}();customElements.define("se-elix-alert-dialog",Ti);var ji=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e,n){var o,i;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return(o=new Ti).textContent=e,o.choices=n,o.open(),r.next=6,o.whenClosed();case 6:return i=r.sent,r.abrupt("return",i.choice);case 8:case"end":return r.stop()}}),_callee)})));return function seSelect(n,o){return e.apply(this,arguments)}}();window.seSelect=ji;var Ii=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e,n){var o,i;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return(o=new Ti).textContent=e,o.choices=void 0===n?["Ok","Cancel"]:n,o.open(),r.next=6,o.whenClosed();case 6:return i=r.sent,r.abrupt("return",i.choice);case 8:case"end":return r.stop()}}),_callee)})));return function seConfirm(n,o){return e.apply(this,arguments)}}();window.seConfirm=Ii;var Ri=function(e){_inherits$1(SePromptDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SePromptDialog);function SePromptDialog(){var e;return _classCallCheck$1(this,SePromptDialog),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e.dialog=new Ti,e}return _createClass$1(SePromptDialog,[{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){switch(e){case"title":this.dialog.opened&&this.dialog.close(),this.dialog.textContent=o,this.dialog.choices=["Cancel"],this.dialog.open();break;case"close":this.dialog.opened?this.dialog.close():this.dialog.open();break;default:console.error("unknown attr for:",e,"newValue =",o)}}},{key:"title",get:function get(){return this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"close",get:function get(){return this.getAttribute("close")},set:function set(e){e?this.setAttribute("close","true"):this.removeAttribute("close")}}],[{key:"observedAttributes",get:function get(){return["title","close"]}}]),SePromptDialog}();customElements.define("se-prompt-dialog",Ri);window.seAlert=function seAlert(e){var n=new Ti;n.textContent=e,n.choices=["Ok"],n.open()};var Mi=document.createElement("template");Mi.innerHTML='<style>\n    #dialog_content {\n        margin: 10px 10px 5px 10px;\n        background: #5a6162;\n        overflow: auto;\n        text-align: left;\n        border: 1px solid #c8c8c8;\n    }\n\n    #dialog_content p,\n    #dialog_content select,\n    #dialog_content label {\n        margin: 10px;\n        line-height: 0.3em;\n    }\n\n    #dialog_container {\n        font-family: Verdana;\n        text-align: center;\n        left: 50%;\n        top: 50%;\n        max-width: 400px;\n        z-index: 50001;\n        background: #5a6162;\n        border: 1px outset #777;\n        font-family: Verdana, Helvetica, sans-serif;\n        font-size: 0.8em;\n    }\n\n    #dialog_container,\n    #dialog_content {\n        border-radius: 5px;\n        -moz-border-radius: 5px;\n        -webkit-border-radius: 5px;\n    }\n\n    #dialog_buttons input[type=text] {\n        width: 90%;\n        display: block;\n        margin: 0 0 5px 11px;\n    }\n\n    #dialog_buttons input[type=button] {\n        margin: 0 1em;\n    }\n\n    .se-select {\n        text-align: center;\n    }\n\n    elix-number-spin-box {\n        margin-left: 15px;\n    }\n</style>\n<elix-dialog id="export_box" aria-label="export svg" closed>\n    <div class="overlay"></div>\n    <div id="dialog_container">\n        <div id="dialog_content">\n            <p class="se-select" id="export_select"></p>\n            <p class="se-select">\n                <select id="se-storage-pref">\n                    <option value="PNG">PNG</option>\n                    <option value="JPEG">JPEG</option>\n                    <option value="BMP">BMP</option>\n                    <option value="WEBP">WEBP</option>\n                    <option value="PDF">PDF</option>\n                </select>\n            </p>\n            <p id="se-quality">\n                <elix-number-spin-box min="-1" max="101" step="5" value="100"></elix-number-spin-box>\n            </p>\n        </div>\n        <div id="dialog_buttons">\n            <button id="export_ok"></button>\n            <button id="export_cancel"></button>\n        </div>\n    </div>\n</elix-dialog>';var Di=function(e){_inherits$1(SeExportDialog,_wrapNativeSuper(HTMLElement));var n=_createSuper$4(SeExportDialog);function SeExportDialog(){var e;return _classCallCheck$1(this,SeExportDialog),(e=n.call(this))._shadowRoot=e.attachShadow({mode:"open"}),e._shadowRoot.append(Mi.content.cloneNode(!0)),e.$dialog=e._shadowRoot.querySelector("#export_box"),e.$okBtn=e._shadowRoot.querySelector("#export_ok"),e.$cancelBtn=e._shadowRoot.querySelector("#export_cancel"),e.$exportOption=e._shadowRoot.querySelector("#se-storage-pref"),e.$qualityCont=e._shadowRoot.querySelector("#se-quality"),e.$input=e._shadowRoot.querySelector("elix-number-spin-box"),e.value=1,e}return _createClass$1(SeExportDialog,[{key:"init",value:function init(e){this.setAttribute("common-ok",e.t("common.ok")),this.setAttribute("common-cancel",e.t("common.cancel")),this.setAttribute("ui-quality",e.t("ui.quality")),this.setAttribute("ui-export_type_label",e.t("ui.export_type_label"))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(e,n,o){switch(e){case"dialog":"open"===o?this.$dialog.open():this.$dialog.close();break;case"common-ok":this.$okBtn.textContent=o;break;case"common-cancel":this.$cancelBtn.textContent=o;break;case"ui-quality":this._shadowRoot.querySelector("#se-quality").prepend(o);break;case"ui-export_type_label":this._shadowRoot.querySelector("#export_select").textContent=o}}},{key:"dialog",get:function get(){return this.getAttribute("dialog")},set:function set(e){this.setAttribute("dialog",e)}},{key:"connectedCallback",value:function connectedCallback(){var e=this;this.$input.addEventListener("change",(function(n){n.preventDefault(),e.value=n.target.value})),svgEditor.$click(this.$input,(function(n){n.preventDefault(),e.value=n.target.value}));var n=function onSubmitHandler(n,o){if("cancel"===o)document.getElementById("se-export-dialog").setAttribute("dialog","close");else{var i=new CustomEvent("change",{detail:{trigger:o,imgType:e.$exportOption.value,quality:e.value}});e.dispatchEvent(i),document.getElementById("se-export-dialog").setAttribute("dialog","close")}};svgEditor.$click(this.$okBtn,(function(e){return n(0,"ok")})),svgEditor.$click(this.$cancelBtn,(function(e){return n(0,"cancel")})),this.$exportOption.addEventListener("change",(function(n){return function onChangeHandler(n){"PDF"===n.target.value?e.$qualityCont.style.display="none":e.$qualityCont.style.display="block"}(n)}))}}],[{key:"observedAttributes",get:function get(){return["dialog","common-ok","common-cancel","ui-quality","ui-export_type_label"]}}]),SeExportDialog}();customElements.define("se-export-dialog",Di);var Bi=Object.freeze({__proto__:null}),Ni="http://www.w3.org/2000/svg",Fi=navigator.userAgent;
/**
 * Browser detection.
 * @module browser
 * @license MIT
 *
 * @copyright 2010 Jeff Schiller, 2010 Alexis Deveria
 */Fi.includes("AppleWebKit"),Fi.includes("Gecko/");var Gi=Fi.includes("Chrome/"),zi=Fi.includes("Macintosh");!function(){var e=document.createElementNS(Ni,"svg"),n=document.createElementNS(Ni,"svg");document.documentElement.append(e),n.setAttribute("x",5),e.append(n);var o=document.createElementNS(Ni,"text");o.textContent="a",n.append(o);try{o.getStartPositionOfChar(0).x}catch(e){return!1}finally{e.remove()}}();var qi=function isChrome(){return Gi},Hi=function isMac(){return zi},Ui=function(){function ConfigObj(e){_classCallCheck$1(this,ConfigObj),this.defaultPrefs={lang:"en",bkgd_color:"#FFF",bkgd_url:"",img_save:"embed",save_notice_done:!1,export_notice_done:!1},this.defaultConfig={canvasName:"default",canvas_expansion:3,initFill:{color:"FF0000",opacity:1},initStroke:{width:5,color:"000000",opacity:1},text:{stroke_width:0,font_size:24,font_family:"Serif"},initOpacity:1,initTool:"select",exportWindowType:"new",wireframe:!1,showlayers:!1,no_save_warning:!1,imgPath:"./images",extPath:"./extensions",extPreurl:"",dimensions:[640,480],gridSnapping:!1,gridColor:"#000",baseUnit:"px",snappingStep:10,showRulers:!0,dynamicOutput:!1,preventAllURLConfig:!1,preventURLContentLoading:!1,lockExtensions:!1,noDefaultExtensions:!1,showGrid:!1,noStorageOnLoad:!1,forceStorage:!1,emptyStorageOnDecline:!1,avoidClientSide:!1,avoidClientSideDownload:!1,avoidClientSideOpen:!1},this.curPrefs={},this.urldata={},this.defaultExtensions=["ext-grid","ext-shapes"],this.curConfig={extensions:[],userExtensions:[],allowedOrigins:[]},this.editor=e}return _createClass$1(ConfigObj,[{key:"setupCurPrefs",value:function setupCurPrefs(){var e=_objectSpread2(_objectSpread2({},this.defaultPrefs),this.curPrefs);this.curPrefs=e}},{key:"setupCurConfig",value:function setupCurConfig(){var e=_objectSpread2(_objectSpread2({},this.defaultConfig),this.curConfig);e.noDefaultExtensions||(e.extensions=_toConsumableArray(this.defaultExtensions)),this.curConfig=e}},{key:"loadFromURL",value:function loadFromURL(){var e=this,n=this,o=new URL(location),i=o.search,r=o.searchParams;if(i){this.urldata={};var a,s=_createForOfIteratorHelper(r.entries());try{for(s.s();!(a=s.n()).done;){var l=a.value;this.urldata[l[0]]=l[1]}}catch(e){s.e(e)}finally{s.f()}if(["initStroke","initFill"].forEach((function(n){r.has("".concat(n,"[color]"))&&(void 0===e.urldata[n]&&(e.urldata[n]={}),e.urldata[n].color=r.get("".concat(n,"[color]")))})),r.has("bkgd_color")&&(this.urldata.bkgd_color="#"+r.get("bkgd_color")),this.urldata.dimensions&&(this.urldata.dimensions=this.urldata.dimensions.split(",")),this.urldata.extensions&&(this.urldata.extensions=/[:/\\]/.test(this.urldata.extensions)?"":this.urldata.extensions.split(",")),["userExtensions","imgPath"].forEach((function(e){n.urldata[e]&&delete n.urldata[e]})),this.setConfig(this.urldata,{overwrite:!1}),this.setupCurConfig(),!this.curConfig.preventURLContentLoading){var c=this.urldata.source;if(!c){var u=r.get("source");null!=u&&u.startsWith("data:")&&(c=u)}if(c)return void(c.startsWith("data:")?this.editor.loadFromDataURI(c):this.editor.loadFromString(c));if(this.urldata.url)return void this.editor.loadFromURL(this.urldata.url)}this.urldata.noStorageOnLoad&&!this.curConfig.forceStorage||this.loadContentAndPrefs()}else this.setupCurConfig(),this.loadContentAndPrefs()}},{key:"loadContentAndPrefs",value:function loadContentAndPrefs(){var e=this;(this.curConfig.forceStorage||!this.curConfig.noStorageOnLoad&&/(?:^|;\s*)svgeditstore=(?:prefsAndContent|prefsOnly)/.test(document.cookie))&&Object.keys(this.defaultPrefs).forEach((function(n){var o="svg-edit-"+n;if(e.editor.storage){var i=e.editor.storage.getItem(o);i&&(e.defaultPrefs[n]=String(i))}else if(window.widget)e.defaultPrefs[n]=window.widget.preferenceForKey(o);else{var r=document.cookie.match(new RegExp("(?:^|;\\s*)"+function regexEscape(e){return String(e).replace(/[.\\+*?[^\]$(){}=!<>|:-]/g,"\\$&")}(encodeURIComponent(o))+"=([^;]+)"));e.defaultPrefs[n]=r?decodeURIComponent(r[1]):""}}))}},{key:"setConfig",value:function setConfig(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function extendOrAdd(e,n,o){e[n]&&"object"===_typeof$1(e[n])&&!Array.isArray(e[n])?e[n]=mergeDeep(e[n],o):e[n]=o};Object.entries(e).forEach((function(e){var r=_slicedToArray(e,2),a=r[0],s=r[1];if(n.defaultPrefs[a]){if(!1===o.overwrite&&(n.curConfig.preventAllURLConfig||n.curPrefs[a]))return;!0===o.allowInitialUserOverride?n.defaultPrefs[a]=s:n.pref(a,s)}else if(["extensions","userExtensions","allowedOrigins"].includes(a)){if(!1===o.overwrite&&(n.curConfig.preventAllURLConfig||["allowedOrigins"].includes(a)||"extensions"===a&&n.curConfig.lockExtensions))return;n.curConfig[a]=n.curConfig[a].concat(s)}else if({}.hasOwnProperty.call(n.defaultConfig,a)){if(!1===o.overwrite&&(n.curConfig.preventAllURLConfig||{}.hasOwnProperty.call(n.curConfig,a)))return;if({}.hasOwnProperty.call(n.curConfig,a)){if(!1===o.overwrite)return;i(n.curConfig,a,s)}else!0===o.allowInitialUserOverride?i(n.defaultConfig,a,s):n.defaultConfig[a]&&"object"===_typeof$1(n.defaultConfig[a])?(n.curConfig[a]=Array.isArray(n.defaultConfig[a])?[]:{},n.curConfig[a]=mergeDeep(n.curConfig[a],s)):n.curConfig[a]=s}}))}},{key:"pref",value:function pref(e,n,o){if(!o&&!n)return e in this.curPrefs?this.curPrefs[e]:this.defaultPrefs[e];this.curPrefs[e]=n}},{key:"load",value:function load(){this.loadFromURL(this.editor),this.setupCurPrefs(this.editor)}}]),ConfigObj}(),Vi={},Ki=function hasCustomHandler(e){return Boolean(Vi[e])},Wi=function getCustomHandler(e){return Vi[e].action},Yi=function injectExtendedContextMenuItemsIntoDom(){Object.values(Vi).forEach((function(e){!function injectExtendedContextMenuItemIntoDom(e){Object.keys(Vi).length||document.getElementById("cmenu_canvas").appendChild("<li class='separator'>");var n=e.shortcut||"";document.getElementById("cmenu_canvas").appendChild("\n    <li class='disabled'><a href='#".concat(e.id,"'>").concat(e.label,"<span class='shortcut'>").concat(n,"</span></a></li>"))}(e)}))},Xi=e.$id,Zi=e.getTypeMap,Ji=function(){function Rulers(n){_classCallCheck$1(this,Rulers),this.rulerIntervals=[];for(var o=.1;o<1e5;o*=10)this.rulerIntervals.push(o),this.rulerIntervals.push(2*o),this.rulerIntervals.push(5*o);this.svgCanvas=n.svgCanvas,this.editor=n;var i=document.createElement("template");i.innerHTML='<style>\n  /* Rulers\n——————————————————————————————————————*/\n\n  #ruler_corner {\n    background: var(--ruler-color);\n    grid-area: corner;\n    width: 15px;\n    height: 15px;\n    overflow: hidden;\n  }\n\n  #ruler_x {\n    background: var(--ruler-color);\n    grid-area: rulerX;\n    height: 15px;\n    border-bottom: 1px solid;\n    border-left: 1px solid #777;\n    overflow: hidden;\n  }\n\n  #ruler_y {\n    background: var(--ruler-color);\n    grid-area: rulerY;\n    width: 15px;\n    border-right: 1px solid;\n    border-top: 1px solid #777;\n    overflow: hidden;\n  }\n\n  #ruler_x canvas {\n    float: left;\n  }\n</style>\n<div id="ruler_corner"></div>\n<div id="ruler_x">\n  <div>\n    <canvas height="15"></canvas>\n  </div>\n</div>\n<div id="ruler_y">\n  <div>\n    <canvas width="15"></canvas>\n  </div>\n</div>',this.editor.$svgEditor.append(i.content.cloneNode(!0));var r=e.$id;this.rulerX=r("ruler_x"),this.rulerY=r("ruler_y"),this.rulerCorner=r("ruler_corner")}return _createClass$1(Rulers,[{key:"display",value:function display(e){e?(this.rulerX.style.removeProperty("display"),this.rulerY.style.removeProperty("display"),this.rulerCorner.style.removeProperty("display")):(this.rulerX.style.display="none",this.rulerY.style.display="none",this.rulerCorner.style.display="none")}},{key:"manageScroll",value:function manageScroll(){this.rulerX&&(this.rulerX.scrollLeft=this.editor.workarea.scrollLeft),this.rulerY&&(this.rulerY.scrollTop=this.editor.workarea.scrollTop)}},{key:"updateRulers",value:function updateRulers(e,n){var o,i,r=this;n||(n=this.svgCanvas.getZoom()),e||(e=document.getElementById("svgcanvas"));var a=3e4,s=this.svgCanvas.getSvgContent(),l=Zi()[this.editor.configObj.curConfig.baseUnit],c=function _loop(){var c=0===o,u=c?"x":"y",d=c?"width":"height",p=Number(s.getAttribute(u)),h=Xi("ruler_"+u).querySelector("canvas"),g=h.cloneNode(!0);h.replaceWith(g);var f=g,v=void 0;"width"===d?v=parseFloat(getComputedStyle(e,null).width.replace("px","")):"height"===d&&(v=parseFloat(getComputedStyle(e,null).height.replace("px","")));var b=v;f.parentNode.style[d]=b+"px";var y=f.getContext("2d"),m=void 0,k=void 0,x=void 0;y.fillStyle="rgb(200,0,0)",y.fillRect(0,0,f.width,f.height);var w=Array.prototype.filter.call(g.parentNode.children,(function(e){return e!==g}));if(Array.from(w).forEach((function(e){e.remove()})),v>=a){var C;for(x=Number.parseInt(v/a)+1,(m=[])[0]=y,i=1;i<x;i++)f[d]=a,C=f.cloneNode(!0),f.parentNode.append(C),m[i]=C.getContext("2d");C[d]=v%a,v=a}f[d]=v;var S=l*n,P=50/S,$=1;for(i=0;i<r.rulerIntervals.length&&($=k=r.rulerIntervals[i],!(P<=k));i++);var E=$*S;y.font="9px sans-serif";for(var L=p/S%$*S,O=L-E,A=0;L<b;){O+=E;var T=Math.round(L)+.5;c?(y.moveTo(T,15),y.lineTo(T,0)):(y.moveTo(15,T),y.lineTo(0,T)),k=(O-p)/S;var j=void 0;if($>=1)j=Math.round(k);else{var I=String($).split(".")[1].length;j=k.toFixed(I)}if(0!==j&&1e3!==j&&j%1e3==0&&(j=j/1e3+"K"),c)y.fillText(j,L+2,8);else{var R=String(j).split("");for(i=0;i<R.length;i++)y.fillText(R[i],1,L+9+9*i)}var M=E/10;for(i=1;i<10;i++){var D=Math.round(L+M*i)+.5;if(m&&D>v){if(A++,y.stroke(),A>=x){i=10,L=b;continue}y=m[A],L-=a,D=Math.round(L+M*i)+.5}var B=i%2?12:10;c?(y.moveTo(D,15),y.lineTo(D,B)):(y.moveTo(15,D),y.lineTo(B,D))}L+=E}y.strokeStyle="#000",y.stroke()};for(o=0;o<2;o++)c()}}]),Rulers}(),Qi=function readySignal(){var e=window.opener||window.parent;if(e)try{var n=new e.CustomEvent("svgEditorReady",{bubbles:!0,cancelable:!0});e.document.documentElement.dispatchEvent(n)}catch(e){}},er=e.$id,tr=e.$qq,nr=e.$click,or=e.convertUnit,ir=function(){function EditorStartup(e){_classCallCheck$1(this,EditorStartup),this.extensionsAdded=!1,this.messageQueue=[],this.$container=null!=e?e:er("svg_editor")}var n,o;return _createClass$1(EditorStartup,[{key:"init",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var n,o,i,r,a,s,l,c,u,d,p,h,g,f,v,b,y,m,k,x,w,C,P,$,E,L,O,A,T,j=this;return _regeneratorRuntime().wrap((function _callee$(I){for(;;)switch(I.prev=I.next){case 0:return E=function _getHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)},$=function _getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)},"localStorage"in window&&(this.storage=window.localStorage),this.configObj.load(),I.next=6,S(this.configObj.pref("lang"),this.goodLangs);case 6:return n=I.sent,o=n.i18next,this.i18next=o,I.next=11,Promise.resolve().then((function(){return ni}));case 11:return I.next=13,Promise.resolve().then((function(){return Bi}));case 13:try{(i=document.createElement("template")).innerHTML='<div class="svg_editor">\n  <div id="workarea">\n    <div id="svgcanvas"></div>\n  </div>\n</div>',this.$container.append(i.content.cloneNode(!0)),this.$svgEditor=tr(".svg_editor"),this.$svgEditor.style.visibility="hidden",this.workarea=er("workarea"),(r=document.createElement("se-img-prop-dialog")).setAttribute("id","se-img-prop"),this.$container.append(r),r.init(this.i18next),(a=document.createElement("se-edit-prefs-dialog")).setAttribute("id","se-edit-prefs"),this.$container.append(a),a.init(this.i18next),(s=document.createElement("se-cmenu_canvas-dialog")).setAttribute("id","se-cmenu_canvas"),this.$container.append(s),s.init(this.i18next),(l=document.createElement("se-alert-dialog")).setAttribute("id","se-alert-dialog"),this.$container.append(l),(c=document.createElement("se-prompt-dialog")).setAttribute("id","se-prompt-dialog"),this.$container.append(c),(u=document.createElement("se-export-dialog")).setAttribute("id","se-export-dialog"),this.$container.append(u),u.init(this.i18next)}catch(e){console.error(e)}return this.svgCanvas=new e(er("svgcanvas"),this.configObj.curConfig),this.leftPanel.init(),this.bottomPanel.init(),this.topPanel.init(),this.layersPanel.init(),this.mainMenu.init(),d=this.svgCanvas.undoMgr,this.canvMenu=er("se-cmenu_canvas"),this.exportWindow=null,this.defaultImageURL="".concat(this.configObj.curConfig.imgPath,"/logo.svg"),this.uiContext="toolbars",Qi(),this.rulers=new Ji(this),this.layersPanel.populateLayers(),this.selectedElement=null,this.multiselected=!1,p=er("cur_context_panel"),nr(p,(function(e){var n=e.target;return n.hasAttribute("data-root")?j.svgCanvas.leaveContext():j.svgCanvas.setContext(n.textContent),j.svgCanvas.clearSelection(),!1})),this.svgCanvas.bind("selected",this.selectedChanged.bind(this)),this.svgCanvas.bind("transition",this.elementTransition.bind(this)),this.svgCanvas.bind("changed",this.elementChanged.bind(this)),this.svgCanvas.bind("exported",this.exportHandler.bind(this)),this.svgCanvas.bind("exportedPDF",function(e,n){n.output&&(n.exportWindowName&&(this.exportWindow=window.open("",this.exportWindowName)),this.exportWindow&&!this.exportWindow.closed?this.exportWindow.location.href=n.output:seAlert(this.i18next.t("notification.popupWindowBlocked")))}.bind(this)),this.svgCanvas.bind("zoomed",this.zoomChanged.bind(this)),this.svgCanvas.bind("zoomDone",this.zoomDone.bind(this)),this.svgCanvas.bind("updateCanvas",function(e,n){var o=n.center,i=n.newCtr;this.updateCanvas(o,i)}.bind(this)),this.svgCanvas.bind("contextset",this.contextChanged.bind(this)),this.svgCanvas.bind("extension_added",this.extAdded.bind(this)),this.svgCanvas.bind("elementRenamed",this.elementRenamed.bind(this)),this.svgCanvas.bind("beforeClear",this.beforeClear.bind(this)),this.svgCanvas.bind("afterClear",this.afterClear.bind(this)),this.svgCanvas.textActions.setInputElem(er("text")),this.setBackground(this.configObj.pref("bkgd_color"),this.configObj.pref("bkgd_url")),h=this.svgCanvas.getResolution(),"px"!==this.configObj.curConfig.baseUnit&&(h.w=or(h.w)+this.configObj.curConfig.baseUnit,h.h=or(h.h)+this.configObj.curConfig.baseUnit),er("se-img-prop").setAttribute("dialog","close"),er("se-img-prop").setAttribute("title",this.svgCanvas.getDocumentTitle()),er("se-img-prop").setAttribute("width",h.w),er("se-img-prop").setAttribute("height",h.h),er("se-img-prop").setAttribute("save",this.configObj.pref("img_save")),g=document.querySelectorAll("select"),Array.from(g).forEach((function(e){e.addEventListener("change",(function(e){e.currentTarget.blur()}))})),f=!1,er("selLayerNames").addEventListener("change",(function(e){var n=e.detail.value,o=j.i18next.t("notification.QmoveElemsToLayer").replace("%s",n),i=function moveToLayer(e){e&&(f=!0,j.svgCanvas.moveSelectedToLayer(n),j.svgCanvas.clearSelection(),j.layersPanel.populateLayers())};if(n)if(f)i(!0);else{if(!seConfirm(o))return;i(!0)}})),er("tool_font_family").addEventListener("change",(function(e){j.svgCanvas.setFontFamily(e.detail.value)})),er("seg_type").addEventListener("change",(function(e){j.svgCanvas.setSegType(e.detail.value)})),(v=function addListenerMulti(e,n,o){n.split(" ").forEach((function(n){return e.addEventListener(n,o,!1)}))})(er("text"),"keyup input",(function(e){j.svgCanvas.setTextContent(e.currentTarget.value)})),er("link_url").addEventListener("change",(function(e){e.currentTarget.value.length?j.svgCanvas.setLinkURL(e.currentTarget.value):j.svgCanvas.removeHyperlink()})),er("g_title").addEventListener("change",(function(e){j.svgCanvas.setGroupTitle(e.currentTarget.value)})),b=null,y=null,m=!1,k=!1,er("svgcanvas").addEventListener("mouseup",(function(e){return!1===m||(j.workarea.scrollLeft-=e.clientX-b,j.workarea.scrollTop-=e.clientY-y,b=e.clientX,y=e.clientY,"mouseup"===e.type&&(m=!1),!1)})),er("svgcanvas").addEventListener("mousemove",(function(e){return!1===m||(j.workarea.scrollLeft-=e.clientX-b,j.workarea.scrollTop-=e.clientY-y,b=e.clientX,y=e.clientY,"mouseup"===e.type&&(m=!1),!1)})),er("svgcanvas").addEventListener("mousedown",(function(e){return 1!==e.button&&!0!==k||(m=!0,b=e.clientX,y=e.clientY,!1)})),window.addEventListener("mouseup",(function(){m=!1})),document.addEventListener("keydown",(function(e){"BODY"===e.target.nodeName&&("space"===e.code.toLowerCase()?(j.svgCanvas.spaceKey=k=!0,e.preventDefault()):"shift"===e.key.toLowerCase()&&"zoom"===j.svgCanvas.getMode()&&(j.workarea.style.cursor="crosshair",e.preventDefault()))})),document.addEventListener("keyup",(function(e){"BODY"===e.target.nodeName&&("space"===e.code.toLowerCase()?(j.svgCanvas.spaceKey=k=!1,e.preventDefault()):"shift"===e.key.toLowerCase()&&"zoom"===j.svgCanvas.getMode()&&(j.workarea.style.cursor="crosshair",e.preventDefault()))})),this.setPanning=function(e){j.svgCanvas.spaceKey=k=e},w=function unfocus(){x.blur()},C=this.$svgEditor.querySelectorAll("button, select, input:not(#text)"),P=this,Array.prototype.forEach.call(C,(function(e){e.addEventListener("focus",(function(e){x=e.currentTarget,P.uiContext="toolbars",P.workarea.addEventListener("mousedown",w)})),e.addEventListener("blur",(function(){P.uiContext="canvas",P.workarea.removeEventListener("mousedown",w),"textedit"===P.svgCanvas.getMode()&&er("text").focus()}))})),L={width:$(),height:E()},window.addEventListener("resize",(function(){Object.entries(L).forEach((function(e){var n=_slicedToArray(e,2),o=n[0],i=n[1],r="width"===o?window.innerWidth-15:window.innerHeight;j.workarea["scroll"+("width"===o?"Left":"Top")]-=(r-i)/2,L[o]=r}))})),this.workarea.addEventListener("scroll",(function(){j.rulers.manageScroll()})),er("stroke_width").value=this.configObj.curConfig.initStroke.width,er("opacity").value=100*this.configObj.curConfig.initOpacity,O=document.getElementsByClassName("push_button"),Array.from(O).forEach((function(e){e.addEventListener("mousedown",(function(e){e.currentTarget.classList.contains("disabled")||(e.currentTarget.classList.add("push_button_pressed"),e.currentTarget.classList.remove("push_button"))})),e.addEventListener("mouseout",(function(e){e.currentTarget.classList.add("push_button"),e.currentTarget.classList.remove("push_button_pressed")})),e.addEventListener("mouseup",(function(e){e.currentTarget.classList.add("push_button"),e.currentTarget.classList.remove("push_button_pressed")}))})),this.layersPanel.populateLayers(),v(window,"load resize",(function centerCanvas(){j.workarea.style.lineHeight=j.workarea.style.height})),A=document.querySelectorAll("input"),Array.from(A).forEach((function(e){e.setAttribute("autocomplete","off")})),T=document.querySelectorAll("select"),Array.from(T).forEach((function(e){e.setAttribute("autocomplete","off")})),er("se-svg-editor-dialog").addEventListener("change",function(e){var n,o,i;"click"===(null==e||null===(n=e.detail)||void 0===n?void 0:n.copy)?this.cancelOverlays(e):"dynamic"===(null==e||null===(o=e.detail)||void 0===o?void 0:o.dialog)?this.toggleDynamicOutput(e):"closed"===(null==e||null===(i=e.detail)||void 0===i?void 0:i.dialog)?this.hideSourceEditor():this.saveSourceEditor(e)}.bind(this)),er("se-cmenu_canvas").addEventListener("change",function(e){var n,o=null==e||null===(n=e.detail)||void 0===n?void 0:n.trigger;switch(o){case"delete":this.svgCanvas.deleteSelectedElements();break;case"cut":this.cutSelected();break;case"copy":this.copySelected();break;case"paste":this.svgCanvas.pasteElements();break;case"paste_in_place":this.svgCanvas.pasteElements("in_place");break;case"group":case"group_elements":this.svgCanvas.groupSelectedElements();break;case"ungroup":this.svgCanvas.ungroupSelectedElement();break;case"move_front":this.svgCanvas.moveToTopSelectedElement();break;case"move_up":this.moveUpDownSelected("Up");break;case"move_down":this.moveUpDownSelected("Down");break;case"move_back":this.svgCanvas.moveToBottomSelectedElement();break;default:Ki(o)&&Wi(o).call()}}.bind(this)),this.ready(function(){var e=er("tool_".concat(this.configObj.curConfig.initTool)),n=er(this.configObj.curConfig.initTool),o=er("tool_select"),i=er("se-edit-prefs");e?e.click():n?n.click():o.click(),this.configObj.curConfig.wireframe&&er("tool_wireframe").click(),this.configObj.curConfig.showRulers?this.rulers.display(!0):this.rulers.display(!1),this.configObj.curConfig.showRulers&&i.setAttribute("showrulers",!0),this.configObj.curConfig.baseUnit&&i.setAttribute("baseunit",this.configObj.curConfig.baseUnit),this.configObj.curConfig.gridSnapping&&i.setAttribute("gridsnappingon",!0),this.configObj.curConfig.snappingStep&&i.setAttribute("gridsnappingstep",this.configObj.curConfig.snappingStep),this.configObj.curConfig.gridColor&&i.setAttribute("gridcolor",this.configObj.curConfig.gridColor),this.configObj.curConfig.dynamicOutput&&i.setAttribute("dynamicoutput",!0)}.bind(this)),er("zoom").value=(100*this.svgCanvas.getZoom()).toFixed(1),this.canvMenu.setAttribute("disableallmenu",!0),this.canvMenu.setAttribute("enablemenuitems","#delete,#cut,#copy"),this.enableOrDisableClipboard(),window.addEventListener("storage",function(e){"svgedit_clipboard"===e.key&&this.enableOrDisableClipboard()}.bind(this)),window.addEventListener("beforeunload",function(e){return 0===d.getUndoStackSize()&&(this.showSaveWarning=!1),!(!this.configObj.curConfig.no_save_warning&&this.showSaveWarning)||(e.returnValue=this.i18next.t("notification.unsavedChanges"),this.i18next.t("notification.unsavedChanges"))}.bind(this)),this.workarea.addEventListener("dragenter",this.onDragEnter),this.workarea.addEventListener("dragover",this.onDragOver),this.workarea.addEventListener("dragleave",this.onDragLeave),this.updateCanvas(!0),this.extAndLocaleFunc(),this.ready((function(){Yi()})),I.next=112,this.runCallbacks();case 112:case"end":return I.stop()}}),_callee,this)}))),function init(){return o.apply(this,arguments)})},{key:"extAndLocaleFunc",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var e=this;return _regeneratorRuntime().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return this.$svgEditor.style.visibility="visible",n.prev=1,n.next=4,Promise.all(this.configObj.curConfig.extensions.map(function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(n){var o,i,r,a,s,l;return _regeneratorRuntime().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,o=e.configObj.curConfig.extPath,c.next=4,import("".concat(o,"/").concat(encodeURIComponent(n),"/").concat(encodeURIComponent(n),".js"));case 4:return i=c.sent,r=i.default,a=r.name,s=void 0===a?n:a,l=r.init,c.abrupt("return",e.addExtension(s,l&&l.bind(e),{langParam:"en"}));case 9:return c.prev=9,c.t0=c.catch(0),console.error("Extension failed to load: "+n+"; ",c.t0),c.abrupt("return",void 0);case 13:case"end":return c.stop()}}),_callee2,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()));case 4:return n.next=6,Promise.all(this.configObj.curConfig.userExtensions.map(function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(n){var o,i,r,a,s,l;return _regeneratorRuntime().wrap((function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:return o=n.pathName,i=n.config,c.prev=1,c.next=4,import(encodeURI(o));case 4:return r=c.sent,a=r.default,s=a.name,l=a.init,c.abrupt("return",e.addExtension(s,l&&l.bind(e,i),{}));case 9:return c.prev=9,c.t0=c.catch(1),console.error("Extension failed to load: "+o+"; ",c.t0),c.abrupt("return",void 0);case 13:case"end":return c.stop()}}),_callee3,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()));case 6:this.svgCanvas.bind("extensions_added",(function(n,o){e.extensionsAdded=!0,e.setAll(),"ignore"===e.storagePromptState&&e.updateCanvas(!0),e.messageQueue.forEach((function(n){e.svgCanvas.call("message",n)}))})),this.svgCanvas.call("extensions_added"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.error(n.t0);case 13:case"end":return n.stop()}}),_callee4,this,[[1,10]])}))),function extAndLocaleFunc(){return n.apply(this,arguments)})}]),EditorStartup}(),rr=e.$id,ar=e.$qa,sr=e.$click,lr=function(){function LeftPanel(e){_classCallCheck$1(this,LeftPanel),this.editor=e}return _createClass$1(LeftPanel,[{key:"updateLeftPanel",value:function updateLeftPanel(e){return!e.disabled&&(ar("#tools_left *[pressed]").forEach((function(e){e.pressed=!1})),rr(e).pressed=!0,!0)}},{key:"clickSelect",value:function clickSelect(){this.updateLeftPanel("tool_select")&&(this.editor.workarea.style.cursor="auto",this.editor.svgCanvas.setMode("select"))}},{key:"clickFHPath",value:function clickFHPath(){this.updateLeftPanel("tool_fhpath")&&this.editor.svgCanvas.setMode("fhpath")}},{key:"clickLine",value:function clickLine(){this.updateLeftPanel("tool_line")&&this.editor.svgCanvas.setMode("line")}},{key:"clickSquare",value:function clickSquare(){this.updateLeftPanel("tool_square")&&this.editor.svgCanvas.setMode("square")}},{key:"clickRect",value:function clickRect(){this.updateLeftPanel("tool_rect")&&this.editor.svgCanvas.setMode("rect")}},{key:"clickFHRect",value:function clickFHRect(){this.updateLeftPanel("tool_fhrect")&&this.editor.svgCanvas.setMode("fhrect")}},{key:"clickCircle",value:function clickCircle(){this.updateLeftPanel("tool_circle")&&this.editor.svgCanvas.setMode("circle")}},{key:"clickEllipse",value:function clickEllipse(){this.updateLeftPanel("tool_ellipse")&&this.editor.svgCanvas.setMode("ellipse")}},{key:"clickFHEllipse",value:function clickFHEllipse(){this.updateLeftPanel("tool_fhellipse")&&this.editor.svgCanvas.setMode("fhellipse")}},{key:"clickImage",value:function clickImage(){this.updateLeftPanel("tool_image")&&this.editor.svgCanvas.setMode("image")}},{key:"clickZoom",value:function clickZoom(){this.updateLeftPanel("tool_zoom")&&(this.editor.svgCanvas.setMode("zoom"),this.editor.workarea.style.cursor=this.editor.zoomInIcon)}},{key:"dblclickZoom",value:function dblclickZoom(){this.updateLeftPanel("tool_zoom")&&(this.editor.zoomImage(),this.clickSelect())}},{key:"clickText",value:function clickText(){this.updateLeftPanel("tool_text")&&this.editor.svgCanvas.setMode("text")}},{key:"clickPath",value:function clickPath(){this.updateLeftPanel("tool_path")&&this.editor.svgCanvas.setMode("path")}},{key:"add",value:function add(e,n){var o=this;sr(rr(e),(function(){o.updateLeftPanel(e)&&n()}))}},{key:"init",value:function init(){var e=document.createElement("template");e.innerHTML='<div id="tools_left">\n    <se-button id="tool_select" title="tools.mode_select" src="select.svg"></se-button>\n    <se-button id="tool_zoom" title="tools.mode_zoom" src="zoom.svg" shortcut="Z"></se-button>\n    <se-button id="tool_fhpath" title="tools.mode_fhpath" src="pencil.svg" shortcut="Q"></se-button>\n    <se-button id="tool_line" title="tools.mode_line" src="pen.svg" shortcut="L"></se-button>\n    <se-button id="tool_path" title="tools.mode_path" src="path.svg" shortcut="P"></se-button>\n    <se-flyingbutton id="tools_rect" title="tools.square_rect_tool">\n        <se-button id="tool_rect" title="tools.mode_rect" src="rect.svg" shortcut="R"></se-button>\n        <se-button id="tool_square" title="tools.mode_square" src="square.svg"></se-button>\n        <se-button id="tool_fhrect" title="tools.mode_fhrect" src="fh_rect.svg"></se-button>\n    </se-flyingbutton>\n    <se-flyingbutton id="tools_ellipse" title="tools.ellipse_circle_tool">\n        <se-button id="tool_ellipse" title="tools.mode_ellipse" src="ellipse.svg" shortcut="E"></se-button>\n        <se-button id="tool_circle" title="tools.mode_circle" src="circle.svg"></se-button>\n        <se-button id="tool_fhellipse" title="tools.mode_fhellipse" src="fh_ellipse.svg"></se-button>\n    </se-flyingbutton>\n    <se-button id="tool_text" title="tools.mode_text" src="text.svg" shortcut="T"></se-button>\n    <se-button id="tool_image" title="tools.mode_image" src="image.svg"></se-button>\n</div>',this.editor.$svgEditor.append(e.content.cloneNode(!0)),sr(rr("tool_select"),this.clickSelect.bind(this)),sr(rr("tool_fhpath"),this.clickFHPath.bind(this)),sr(rr("tool_text"),this.clickText.bind(this)),sr(rr("tool_image"),this.clickImage.bind(this)),sr(rr("tool_zoom"),this.clickZoom.bind(this)),rr("tool_zoom").addEventListener("dblclick",this.dblclickZoom.bind(this)),sr(rr("tool_path"),this.clickPath.bind(this)),sr(rr("tool_line"),this.clickLine.bind(this)),sr(rr("tool_rect"),this.clickRect.bind(this)),sr(rr("tool_square"),this.clickSquare.bind(this)),sr(rr("tool_fhrect"),this.clickFHRect.bind(this)),sr(rr("tool_ellipse"),this.clickEllipse.bind(this)),sr(rr("tool_circle"),this.clickCircle.bind(this)),sr(rr("tool_fhellipse"),this.clickFHEllipse.bind(this))}}]),LeftPanel}(),cr=e.$qa,ur=e.$id,dr=e.$click,pr=e.isValidUnit,hr=e.getTypeMap,gr=e.convertUnit,fr=function(){function TopPanel(e){_classCallCheck$1(this,TopPanel),this.editor=e}return _createClass$1(TopPanel,[{key:"displayTool",value:function displayTool(e){cr(".".concat(e)).map((function(e){return e.style.removeProperty("display")}))}},{key:"hideTool",value:function hideTool(e){cr(".".concat(e)).forEach((function(e){e.style.display="none"}))}},{key:"selectedElement",get:function get(){return this.editor.selectedElement}},{key:"multiselected",get:function get(){return this.editor.multiselected}},{key:"path",get:function get(){return this.editor.svgCanvas.pathActions}},{key:"setStrokeOpt",value:function setStrokeOpt(e,n){var o=_slicedToArray(e.id.split("_"),2),i=o[0],r=o[1];n&&this.svgCanvas.setStrokeAttr("stroke-"+i,r),e.classList.add("current");var a=Array.prototype.filter.call(e.parentNode.children,(function(n){return n!==e}));Array.from(a).forEach((function(e){e.classList.remove("current")}))}},{key:"update",value:function update(){var e,n;if(cr("#title_panel > p")[0].textContent=this.editor.title,this.selectedElement)switch(this.selectedElement.tagName){case"use":case"image":case"foreignObject":break;case"g":case"a":var o=this.selectedElement.getElementsByTagName("*"),i=null;for(e=0,n=o.length;e<n;e++){var r=o[e].getAttribute("stroke-width");0===e?i=r:i!==r&&(i=null)}ur("stroke_width").value=null===i?"":i,this.editor.bottomPanel.updateColorpickers(!1);break;default:this.editor.bottomPanel.updateColorpickers(!1),ur("stroke_width").value=this.selectedElement.getAttribute("stroke-width")||1,ur("stroke_style").value=this.selectedElement.getAttribute("stroke-dasharray")||"none",ur("stroke_style").setAttribute("value",ur("stroke_style").value);var a=this.selectedElement.getAttribute("stroke-linejoin")||"miter";ur("linejoin_"+a)&&(this.setStrokeOpt(ur("linejoin_"+a)),ur("stroke_linejoin").setAttribute("value",a)),a=this.selectedElement.getAttribute("stroke-linecap")||"butt",ur("linecap_"+a)&&(this.setStrokeOpt(ur("linecap_"+a)),ur("stroke_linecap").setAttribute("value",a))}if(this.selectedElement){var s,l=100*(this.selectedElement.getAttribute("opacity")||1);ur("opacity").value=l,ur("elem_id").value=this.selectedElement.id,ur("elem_class").value=null!==(s=this.selectedElement.getAttribute("class"))&&void 0!==s?s:""}this.editor.bottomPanel.updateToolButtonState()}},{key:"promptImgURL",value:function promptImgURL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.cancelDeletes,o=void 0!==n&&n,i=this.editor.svgCanvas.getHref(this.editor.selectedElement);i=i.startsWith("data:")?"":i;var r=prompt(this.editor.i18next.t("notification.enterNewImgURL"),i);r?this.setImageURL(r):o&&this.editor.svgCanvas.deleteSelectedElements()}},{key:"updateContextPanel",value:function updateContextPanel(){var e,n=this,o=this.editor.selectedElement;null!==(e=o)&&void 0!==e&&e.parentNode||(o=null);var i=this.editor.svgCanvas.getCurrentDrawing().getCurrentLayerName(),r=this.editor.svgCanvas.getMode(),a="px"!==this.editor.configObj.curConfig.baseUnit?this.editor.configObj.curConfig.baseUnit:null,s="pathedit"===r,l=document.getElementById("se-cmenu_canvas");if(this.hideTool("selected_panel"),this.hideTool("multiselected_panel"),this.hideTool("g_panel"),this.hideTool("rect_panel"),this.hideTool("circle_panel"),this.hideTool("ellipse_panel"),this.hideTool("line_panel"),this.hideTool("text_panel"),this.hideTool("image_panel"),this.hideTool("container_panel"),this.hideTool("use_panel"),this.hideTool("a_panel"),this.hideTool("xy_panel"),o){var c=o.nodeName,u=this.editor.svgCanvas.getRotationAngle(o);ur("angle").value=u;var d=10*this.editor.svgCanvas.getBlur(o);if(ur("blur").value=d,this.editor.svgCanvas.addedNew&&"image"===c&&"image"===this.editor.svgCanvas.getMode()&&!this.editor.svgCanvas.getHref(o).startsWith("data:")&&this.promptImgURL({cancelDeletes:!0}),s||"pathedit"===r){var p=this.path.getNodePoint();if(ur("tool_add_subpath").pressed=!1,this.path.canDeleteNodes?ur("tool_node_delete").classList.remove("disabled"):ur("tool_node_delete").classList.add("disabled"),p){var h=ur("seg_type");a&&(p.x=gr(p.x),p.y=gr(p.y)),ur("path_node_x").value=p.x,ur("path_node_y").value=p.y,p.type?(h.value=p.type,h.removeAttribute("disabled")):(h.value=4,h.setAttribute("disabled","disabled"))}return}if(this.displayTool("selected_panel"),["line","circle","ellipse"].includes(c))this.hideTool("xy_panel");else{var g,f;if(["g","polyline","path"].includes(c)){var v=this.editor.svgCanvas.getStrokedBBox([o]);v&&(g=v.x,f=v.y)}else g=o.getAttribute("x"),f=o.getAttribute("y");a&&(g=gr(g),f=gr(f)),ur("selected_x").value=g||0,ur("selected_y").value=f||0,this.displayTool("xy_panel")}["image","text","path","g","use"].includes(c)?this.hideTool("tool_topath"):this.displayTool("tool_topath"),"path"===c?this.displayTool("tool_reorient"):this.hideTool("tool_reorient"),ur("tool_reorient").disabled=0===u;var b={g:[],a:[],rect:["rx","width","height"],image:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],text:[],use:[]},y=o.tagName,m=null;if("a"===y&&(m=this.editor.svgCanvas.getHref(o),this.displayTool("g_panel")),o.parentNode){var k=Array.prototype.filter.call(o.parentNode.children,(function(e){return e!==o}));"a"!==o.parentNode.tagName||k.length||(this.displayTool("a_panel"),m=this.editor.svgCanvas.getHref(o.parentNode))}if(m?(this.displayTool("tool_make_link"),this.displayTool("tool_make_link_multi"),ur("link_url").value=m):(this.hideTool("tool_make_link"),this.hideTool("tool_make_link_multi")),b[y]){var x,w,C,S,P=b[y];if(this.displayTool(y+"_panel"),P.forEach((function(e){var i=o.getAttribute(e);if("px"!==n.editor.configObj.curConfig.baseUnit&&o[e]){var r=o[e].baseVal.value;i=gr(r)}ur("".concat(y,"_").concat(e)).value=i||0})),"text"===y)this.displayTool("text_panel"),ur("tool_italic").pressed=this.editor.svgCanvas.getItalic(),ur("tool_bold").pressed=this.editor.svgCanvas.getBold(),ur("tool_text_decoration_underline").pressed=this.editor.svgCanvas.hasTextDecoration("underline"),ur("tool_text_decoration_linethrough").pressed=this.editor.svgCanvas.hasTextDecoration("line-through"),ur("tool_text_decoration_overline").pressed=this.editor.svgCanvas.hasTextDecoration("overline"),ur("tool_font_family").setAttribute("value",o.getAttribute("font-family")),ur("tool_text_anchor").setAttribute("value",o.getAttribute("text-anchor")),ur("font_size").value=o.getAttribute("font-size"),ur("tool_letter_spacing").value=null!==(x=o.getAttribute("letter-spacing"))&&void 0!==x?x:0,ur("tool_word_spacing").value=null!==(w=o.getAttribute("word-spacing"))&&void 0!==w?w:0,ur("tool_text_length").value=null!==(C=o.getAttribute("textLength"))&&void 0!==C?C:0,ur("tool_length_adjust").value=null!==(S=o.getAttribute("lengthAdjust"))&&void 0!==S?S:0,ur("text").value=o.textContent,this.editor.svgCanvas.addedNew&&setTimeout((function(){ur("text").focus(),ur("text").select()}),100);else if("image"===y&&"image"===this.editor.svgCanvas.getMode())this.editor.svgCanvas.setImageURL(this.editor.svgCanvas.getHref(o));else if("g"===y||"use"===y){this.displayTool("container_panel");var $=this.editor.svgCanvas.getTitle();ur("g_title").value=$,ur("g_title").disabled="use"===y}}l.setAttribute(("g"===y?"en":"dis")+"ablemenuitems","#ungroup"),l.setAttribute(("g"!==y&&this.multiselected?"en":"dis")+"ablemenuitems","#group")}else if(this.multiselected){this.editor.svgCanvas.getSelectedElements().every((function(e){return"text"===e.tagName}))&&this.displayTool("text_panel"),this.displayTool("multiselected_panel"),l.setAttribute("enablemenuitems","#group"),l.setAttribute("disablemenuitems","#ungroup")}else l.setAttribute("disablemenuitems","#delete,#cut,#copy,#group,#ungroup,#move_front,#move_up,#move_down,#move_back");(ur("tool_undo").disabled=0===this.editor.svgCanvas.undoMgr.getUndoStackSize(),ur("tool_redo").disabled=0===this.editor.svgCanvas.undoMgr.getRedoStackSize(),this.editor.svgCanvas.addedNew=!1,o&&!s||this.multiselected)?(ur("selLayerNames").removeAttribute("disabled"),ur("selLayerNames").value=i,ur("selLayerNames").setAttribute("value",i),document.getElementById("se-cmenu_canvas").setAttribute("enablemenuitems","#delete,#cut,#copy,#move_front,#move_up,#move_down,#move_back")):ur("selLayerNames").setAttribute("disabled","disabled")}},{key:"showSourceEditor",value:function showSourceEditor(e,n){var o=document.getElementById("se-svg-editor-dialog");if("open"!==o.getAttribute("dialog")){var i=this.editor.svgCanvas.getSvgString();o.setAttribute("dialog","open"),o.setAttribute("value",i),o.setAttribute("copysec",Boolean(n)),o.setAttribute("applysec",!n)}}},{key:"clickWireframe",value:function clickWireframe(){ur("tool_wireframe").pressed=!ur("tool_wireframe").pressed,this.editor.workarea.classList.toggle("wireframe");var e=ur("wireframe_rules");if(e)for(;e.firstChild;)e.removeChild(e.firstChild);else{var n=document.createElement("style");n.setAttribute("id","wireframe_rules"),document.getElementsByTagName("head")[0].appendChild(n)}this.editor.updateWireFrame()}},{key:"clickUndo",value:function clickUndo(){var e=this.editor.svgCanvas,n=e.undoMgr,o=e.textActions;n.getUndoStackSize()>0&&(n.undo(),this.editor.layersPanel.populateLayers(),"textedit"===this.editor.svgCanvas.getMode()&&o.clear())}},{key:"clickRedo",value:function clickRedo(){var e=this.editor.svgCanvas.undoMgr;e.getRedoStackSize()>0&&(e.redo(),this.editor.layersPanel.populateLayers())}},{key:"changeRectRadius",value:function changeRectRadius(e){this.editor.svgCanvas.setRectRadius(e.target.value)}},{key:"changeFontSize",value:function changeFontSize(e){this.editor.svgCanvas.setFontSize(e.target.value)}},{key:"changeRotationAngle",value:function changeRotationAngle(e){this.editor.svgCanvas.setRotationAngle(e.target.value),0===Number.parseInt(e.target.value)?ur("tool_reorient").classList.add("disabled"):ur("tool_reorient").classList.remove("disabled")}},{key:"changeBlur",value:function changeBlur(e){this.editor.svgCanvas.setBlur(e.target.value/10,!0)}},{key:"clickGroup",value:function clickGroup(){this.editor.multiselected?this.editor.svgCanvas.groupSelectedElements():this.editor.selectedElement&&this.editor.svgCanvas.ungroupSelectedElement()}},{key:"clickClone",value:function clickClone(){this.editor.svgCanvas.cloneSelectedElements(20,20)}},{key:"clickAlignEle",value:function clickAlignEle(e){this.editor.svgCanvas.alignSelectedElements(e.detail.value,"page")}},{key:"clickAlign",value:function clickAlign(e){var n=ur("tool_align_relative").value;""===n&&(n="selected"),this.editor.svgCanvas.alignSelectedElements(e,n)}},{key:"attrChanger",value:function attrChanger(e){var n=e.target.getAttribute("data-attr"),o=e.target.value;if(!pr(n,o,this.selectedElement))return e.target.value=this.selectedElement.getAttribute(n),alert(this.editor.i18next.t("notification.invalidAttrValGiven")),!1;if("id"!==n&&"class"!==n)if(isNaN(o))o=this.editor.svgCanvas.convertToNum(n,o);else if("px"!==this.editor.configObj.curConfig.baseUnit){var i=hr();(this.editor.selectedElement[n]||"pathedit"===this.editor.svgCanvas.getMode()||"x"===n||"y"===n)&&(o*=i[this.editor.configObj.curConfig.baseUnit])}return this.editor.svgCanvas.changeSelectedAttribute(n,o),!0}},{key:"convertToPath",value:function convertToPath(){this.editor.selectedElement&&this.editor.svgCanvas.convertToPath()}},{key:"reorientPath",value:function reorientPath(){this.editor.selectedElement&&this.path.reorient()}},{key:"makeHyperlink",value:function makeHyperlink(){if(this.editor.selectedElement||this.multiselected){var e=prompt(this.editor.i18next.t("notification.enterNewLinkURL"),"http://");e&&this.editor.svgCanvas.makeHyperlink(e)}}},{key:"linkControlPoints",value:function linkControlPoints(){ur("tool_node_link").pressed=!ur("tool_node_link").pressed;var e=!!ur("tool_node_link").pressed;this.path.linkControlPoints(e)}},{key:"clonePathNode",value:function clonePathNode(){this.path.getNodePoint()&&this.path.clonePathNode()}},{key:"deletePathNode",value:function deletePathNode(){this.path.getNodePoint()&&this.path.deletePathNode()}},{key:"addSubPath",value:function addSubPath(){var e=ur("tool_add_subpath"),n=!e.classList.contains("pressed");e.pressed=n,this.path.addSubPath(n)}},{key:"opencloseSubPath",value:function opencloseSubPath(){this.path.opencloseSubPath()}},{key:"deleteSelected",value:function deleteSelected(){(this.editor.selectedElement||this.editor.multiselected)&&this.editor.svgCanvas.deleteSelectedElements()}},{key:"moveToTopSelected",value:function moveToTopSelected(){this.editor.selectedElement&&this.editor.svgCanvas.moveToTopSelectedElement()}},{key:"moveToBottomSelected",value:function moveToBottomSelected(){this.editor.selectedElement&&this.editor.svgCanvas.moveToBottomSelectedElement()}},{key:"clickBold",value:function clickBold(){return this.editor.svgCanvas.setBold(!this.editor.svgCanvas.getBold()),this.updateContextPanel(),!1}},{key:"clickItalic",value:function clickItalic(){return this.editor.svgCanvas.setItalic(!this.editor.svgCanvas.getItalic()),this.updateContextPanel(),!1}},{key:"clickTextDecoration",value:function clickTextDecoration(e){return this.editor.svgCanvas.hasTextDecoration(e)?this.editor.svgCanvas.removeTextDecoration(e):this.editor.svgCanvas.addTextDecoration(e),this.updateContextPanel(),!1}},{key:"clickTextAnchor",value:function clickTextAnchor(e){return this.editor.svgCanvas.setTextAnchor(e.detail.value),!1}},{key:"changeLetterSpacing",value:function changeLetterSpacing(e){this.editor.svgCanvas.setLetterSpacing(e.target.value)}},{key:"changeWordSpacing",value:function changeWordSpacing(e){this.editor.svgCanvas.setWordSpacing(e.target.value)}},{key:"changeTextLength",value:function changeTextLength(e){this.editor.svgCanvas.setTextLength(e.target.value)}},{key:"changeLengthAdjust",value:function changeLengthAdjust(e){this.editor.svgCanvas.setLengthAdjust(e.detail.value)}},{key:"setImageURL",value:function setImageURL(e){var n=this.editor;(e||(e=n.defaultImageURL),n.svgCanvas.setImageURL(e),ur("image_url").value=e,e.startsWith("data:"))?this.hideTool("image_url"):(n.svgCanvas.embedImage(e).then((function(){n.svgCanvas.setMode("select"),n.svgCanvas.selectOnly(n.svgCanvas.getSelectedElements(),!0)}),(function(e){console.error("error =",e),seAlert(n.i18next.t("tools.no_embed")),n.svgCanvas.deleteSelectedElements()})),this.displayTool("image_url"))}},{key:"updateTitle",value:function updateTitle(e){e&&(this.editor.title=e);var n=cr("#title_panel > p")[0];n&&(n.textContent=this.editor.title)}},{key:"togglePathEditMode",value:function togglePathEditMode(e,n){e?this.displayTool("path_node_panel"):this.hideTool("path_node_panel"),e?(ur("tool_path").pressed=!1,ur("tool_select").pressed=!0,ur("tool_select").setAttribute("src","select_node.svg"),this.editor.multiselected=!1,n.length&&(this.editor.selectedElement=n[0])):setTimeout((function(){ur("tool_select").setAttribute("src","select.svg")}),1e3)}},{key:"init",value:function init(){var e=this,n=document.createElement("template"),o=this.editor.i18next;n.innerHTML='<div id="tools_top">\n  <div id="title_panel">\n    <p>untitled.svg</p>\n  </div> \x3c!-- title panel --\x3e\n  <div id="editor_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_source" title="tools.tool_source" shortcut="U" src="source.svg"></se-button>\n    <se-button id="tool_wireframe" title="tools.wireframe_mode" shortcut="F" src="wireframe.svg"></se-button>\n  </div> \x3c!-- editor_panel --\x3e\n  <div id="history_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_undo" title="tools.undo" shortcut="Z" src="undo.svg" disabled="disabled"></se-button>\n    <se-button id="tool_redo" title="tools.redo" shortcut="Y" src="redo.svg" disabled="disabled"></se-button>\n  </div> \x3c!-- history_panel --\x3e\n  \x3c!-- Buttons when a single element is selected --\x3e\n  <div class="selected_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_clone" title="tools.clone" shortcut="D" src="clone.svg"></se-button>\n    <se-button id="tool_delete" title="tools.del" shortcut="Delete/Backspace" src="delete.svg"></se-button>\n  </div>\n  <div class="selected_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_move_top" title="tools.move_top" shortcut="Ctrl+Shift+]" src="move_top.svg"></se-button>\n    <se-button id="tool_move_bottom" title="tools.move_bottom" shortcut="Ctrl+Shift+[" src="move_bottom.svg">\n    </se-button>\n  </div>\n  <div class="selected_panel">\n    <se-button id="tool_topath" title="tools.to_path" src="to_path.svg"></se-button>\n    <se-button id="tool_reorient" title="tools.reorient_path" src="reorient.svg"></se-button>\n    <se-button id="tool_make_link" title="tools.make_link" src="globe_link.svg"></se-button>\n  </div>\n  <div class="selected_panel">\n    <div class="tool_sep"></div>\n    <se-input id="elem_id" data-attr="id" size="10" label="properties.id_label" title="properties.id"></se-input>\n  </div>\n  <div class="selected_panel">\n    <se-input id="elem_class" data-attr="class" size="10" label="properties.class_label" title="properties.class">\n    </se-input>\n    <se-spin-input size="3" id="angle" min="-180" max="180" step="5" src="angle.svg" title="properties.angle">\n    </se-spin-input>\n    <se-spin-input size="2" id="blur" min="0" max="100" step="5" src="blur.svg" title="properties.blur"></se-spin-input>\n    <se-list id="tool_position" title="tools.align_to_page" label="" width="22px" height="22px">\n      <se-list-item id="tool_posleft" value="l" title="tools.align_left" src="align_left.svg" img-height="22px">\n      </se-list-item>\n      <se-list-item id="tool_poscenter" value="c" title="tools.align_center" src="align_center.svg" img-height="22px"></se-list-item>\n      <se-list-item id="tool_posright" value="r" title="tools.align_right" src="align_right.svg" img-height="22px"></se-list-item>\n      <se-list-item id="tool_postop" value="t" title="tools.align_top" src="align_top.svg" img-height="22px">\n      </se-list-item>\n      <se-list-item id="tool_posmiddle" value="m" title="tools.align_middle" src="align_middle.svg" img-height="22px"></se-list-item>\n      <se-list-item id="tool_posbottom" value="b" src="align_bottom.svg" title="tools.align_bottom" img-height="22px"></se-list-item>\n      <se-list-item id="tool_poshoriz" value="dh" src="align_distrib_horiz.svg" title="tools.align_distrib_horiz" img-height="22px"></se-list-item>\n      <se-list-item id="tool_posverti" value="dv" src="align_distrib_verti.svg" title="tools.align_distrib_verti" img-height="22px"></se-list-item>\n    </se-list>\n  </div>\n  <div class="xy_panel">\n    <se-spin-input id="selected_x" data-attr="x" size="4" type="text" label="properties.x_label" title="properties.pos_x">\n    </se-spin-input>\n    <se-spin-input id="selected_y" data-attr="y" size="4" type="text" label="properties.y_label" title="properties.pos_y">\n    </se-spin-input>\n  </div>\n  \x3c!-- Buttons when multiple elements are selected --\x3e\n  <div class="multiselected_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_clone_multi" title="tools.clone" shortcut="C" src="clone.svg"></se-button>\n    <se-button id="tool_delete_multi" title="tools.del" shortcut="Delete/Backspace" src="delete.svg"></se-button>\n  </div>\n  <div class="multiselected_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_group_elements" title="tools.group_elements" shortcut="G" src="group_elements.svg">\n    </se-button>\n    <se-button id="tool_make_link_multi" title="tools.make_link" src="globe_link.svg"></se-button>\n    <se-button id="tool_align_left" title="tools.align_left" src="align_left.svg"></se-button>\n    <se-button id="tool_align_center" title="tools.align_center" src="align_center.svg"></se-button>\n    <se-button id="tool_align_right" title="tools.align_right" src="align_right.svg"></se-button>\n    <se-button id="tool_align_top" title="tools.align_top" src="align_top.svg"></se-button>\n    <se-button id="tool_align_middle" title="tools.align_middle" src="align_middle.svg"></se-button>\n    <se-button id="tool_align_bottom" title="tools.align_bottom" src="align_bottom.svg"></se-button>\n    <se-button id="tool_align_distrib_horiz" title="tools.align_distrib_horiz" src="align_distrib_horiz.svg"></se-button>\n    <se-button id="tool_align_distrib_verti" title="tools.align_distrib_verti" src="align_distrib_verti.svg"></se-button>\n    <se-select id="tool_align_relative" label="tools.relativeTo" options="tools.selected_objects,tools.largest_object,tools.smallest_object,tools.page" values="selected::largest::smallest::page">\n      \n    </se-select>\n  </div> \x3c!-- multiselected_panel --\x3e\n  <div class="rect_panel">\n    <se-spin-input id="rect_width" data-attr="width" size="4" label="properties.w_label" title="properties.rect_width"></se-spin-input>\n    <se-spin-input id="rect_height" data-attr="height" size="4" label="properties.h_label" title="properties.rect_height"></se-spin-input>\n    <se-spin-input id="rect_rx" min="0" max="1000" step="1" size="3" title="properties.corner_radius" data-attr="Corner Radius" src="c_radius.svg"></se-spin-input>\n  </div> \x3c!-- rect_panel --\x3e\n  <div class="image_panel">\n    <se-spin-input id="image_width" data-attr="width" size="4" type="text" label="properties.w_label" title="properties.image_width"></se-spin-input>\n    <se-spin-input id="image_height" data-attr="height" size="4" type="text" label="properties.h_label" title="properties.image_height"></se-spin-input>\n  </div>\n  <div class="image_panel">\n    <se-input id="image_url" data-attr="image_url" size="15" label="properties.image_url"></se-input>\n  </div>\n  <div class="circle_panel">\n    <se-spin-input id="circle_cx" data-attr="cx" size="4" label="properties.cx_label"></se-spin-input>\n    <se-spin-input id="circle_cy" data-attr="cy" size="4" label="properties.cy_label"></se-spin-input>\n  </div>\n  <div class="circle_panel">\n    <se-spin-input id="circle_r" data-attr="r" size="4" label="properties.r_label"></se-spin-input>\n  </div>\n  <div class="ellipse_panel">\n    <se-spin-input id="ellipse_cx" data-attr="cx" size="4" title="properties.ellipse_cx" label="properties.cx_label"></se-spin-input>\n    <se-spin-input id="ellipse_cy" data-attr="cy" size="4" title="properties.ellipse_cy" label="properties.cy_label"></se-spin-input>\n  </div>\n  <div class="ellipse_panel">\n    <se-spin-input id="ellipse_rx" data-attr="rx" size="4" title="properties.ellipse_rx" label="properties.rx_label"></se-spin-input>\n    <se-spin-input id="ellipse_ry" data-attr="ry" size="4" title="properties.ellipse_ry" label="properties.ry_label"></se-spin-input>\n  </div>\n  <div class="line_panel">\n    <se-spin-input id="line_x1" data-attr="x1" size="4" title="properties.line_x1" label="properties.x1_label">\n    </se-spin-input>\n    <se-spin-input id="line_y1" data-attr="y1" size="4" title="properties.line_y1" label="properties.y1_label">\n    </se-spin-input>\n    <se-spin-input id="line_x2" data-attr="x2" size="4" title="properties.line_x2" label="properties.x2_label">\n    </se-spin-input>\n    <se-spin-input id="line_y2" data-attr="y2" size="4" title="properties.line_y2" label="properties.y2_label">\n    </se-spin-input>\n  </div>\n  <div class="text_panel">\n    \x3c!-- Text styles --\x3e\n    <se-button id="tool_bold" title="properties.bold" src="bold.svg" shortcut="B"></se-button>\n    <se-button id="tool_italic" title="properties.italic" src="italic.svg" shortcut="I"></se-button>\n    <se-button id="tool_text_decoration_underline" title="properties.text_decoration_underline" src="text_decoration_underline.svg"></se-button>\n    <se-button id="tool_text_decoration_linethrough" title="properties.text_decoration_linethrough" src="text_decoration_linethrough.svg"></se-button>\n    <se-button id="tool_text_decoration_overline" title="properties.text_decoration_overline" src="text_decoration_overline.svg"></se-button>\n\n    \x3c!-- Font Size--\x3e\n    <se-select id="tool_font_family" label="properties.font_family_label" options="properties.serif,properties.sans_serif,properties.cursive,properties.fantasy,properties.monospace,properties.courier,properties.helvetica,properties.times" values="Serif::Sans-serif::Cursive::Fantasy::Monospace::Courier::Helvetica::Times"></se-select>\n    <se-spin-input size="2" id="font_size" min="1" max="1000" step="1" title="properties.font_size" src="fontsize.svg"></se-spin-input>\n\n    \x3c!-- Text Anchor --\x3e\n    <se-list id="tool_text_anchor" label="" width="22px" height="22px">\n      <se-list-item id="tool_text_anchor_start" value="start" title="properties.text_anchor_start" src="anchor_start.svg" img-height="25px"></se-list-item>\n      <se-list-item id="tool_text_anchor_middle" value="middle" title="properties.text_anchor_middle" src="anchor_middle.svg" img-height="25px"></se-list-item>\n      <se-list-item id="tool_text_anchor_end" value="end" title="properties.text_anchor_end" src="anchor_end.svg" img-height="25px"></se-list-item>\n    </se-list>\n\n    \x3c!-- Letter Spacing --\x3e\n    <se-spin-input size="2" id="tool_letter_spacing" min="0" max="100" step="1" title="properties.text_letter_spacing" src="letter_spacing.svg"></se-spin-input>\n\n    \x3c!-- Word Spacing --\x3e\n    <se-spin-input size="2" id="tool_word_spacing" min="0" max="1000" step="1" title="properties.text_word_spacing" src="word_spacing.svg"></se-spin-input>\n\n    \x3c!-- Text Length --\x3e\n    <se-spin-input size="2" id="tool_text_length" min="0" max="1000" step="1" title="properties.text_length" src="text_length.svg"></se-spin-input>\n\n    \x3c!-- Length Adjust --\x3e\n    <se-select id="tool_length_adjust" label="properties.text_length_adjust" options="properties.text_length_adjust_spacing,properties.text_length_adjust_spacing_and_glyphs" values="spacing::spacingAndGlyphs"></se-select>\n  </div>\n  \x3c!-- Not visible, but still used --\x3e\n  <input id="text" type="text" size="35">\n  <div class="container_panel">\n    <div class="tool_sep"></div>\n    <se-input id="g_title" data-attr="title" size="8" label="properties.label"></se-input>\n  </div> \x3c!-- container_panel --\x3e\n  <div class="use_panel">\n    <se-button id="tool_unlink_use" title="tools.tool_unlink_use" src="unlink_use.svg"></se-button>\n  </div> \x3c!-- use_panel --\x3e\n  <div class="g_panel">\n    <se-button id="tool_ungroup" title="tools.ungroup" src="ungroup.svg"></se-button>\n  </div> \x3c!-- g_panel --\x3e\n  \x3c!-- For anchor elements --\x3e\n  <div class="a_panel">\n    <label id="tool_link_url">\n      <span id="linkLabel" class="icon_label"></span>\n      <input id="link_url" type="text" size="35">\n    </label>\n  </div> \x3c!-- a_panel --\x3e\n  <div class="path_node_panel">\n    <div class="tool_sep"></div>\n    <se-button id="tool_node_link" title="tools.node_link" src="tool_node_link.svg" pressed></se-button>\n    <div class="tool_sep"></div>\n    <se-spin-input id="path_node_x" data-attr="x" size="4" title="properties.node_x" label="properties.x_label">\n    </se-spin-input>\n    <se-spin-input id="path_node_y" data-attr="y" size="4" title="properties.node_y" label="properties.y_label">\n    </se-spin-input>\n    <se-select id="seg_type" title="properties.seg_type" label="" options="properties.straight_segments,properties.curve_segments" values="4::6"></se-select>\n    <se-button id="tool_node_clone" title="tools.node_clone" src="tool_node_clone.svg"></se-button>\n    <se-button id="tool_node_delete" title="tools.node_delete" src="tool_node_delete.svg"></se-button>\n    <se-button id="tool_openclose_path" title="tools.openclose_path" src="tool_openclose_path.svg"></se-button>\n    <se-button id="tool_add_subpath" title="tools.add_subpath" src="tool_add_subpath.svg"></se-button>\n  </div> \x3c!-- path_node_panel --\x3e\n  <div id="cur_context_panel"></div>\n</div>\n',this.editor.$svgEditor.append(n.content.cloneNode(!0));var i=document.createElement("se-svg-source-editor-dialog");i.setAttribute("id","se-svg-editor-dialog"),this.editor.$container.append(i),this.updateTitle(),i.init(o),ur("tool_link_url").setAttribute("title",o.t("tools.set_link_url")),dr(ur("tool_source"),this.showSourceEditor.bind(this)),dr(ur("tool_wireframe"),this.clickWireframe.bind(this)),dr(ur("tool_undo"),this.clickUndo.bind(this)),dr(ur("tool_redo"),this.clickRedo.bind(this)),dr(ur("tool_clone"),this.clickClone.bind(this)),dr(ur("tool_clone_multi"),this.clickClone.bind(this)),dr(ur("tool_delete"),this.deleteSelected.bind(this)),dr(ur("tool_delete_multi"),this.deleteSelected.bind(this)),dr(ur("tool_move_top"),this.moveToTopSelected.bind(this)),dr(ur("tool_move_bottom"),this.moveToBottomSelected.bind(this)),dr(ur("tool_topath"),this.convertToPath.bind(this)),dr(ur("tool_make_link"),this.makeHyperlink.bind(this)),dr(ur("tool_make_link_multi"),this.makeHyperlink.bind(this)),dr(ur("tool_reorient"),this.reorientPath.bind(this)),dr(ur("tool_group_elements"),this.clickGroup.bind(this)),ur("tool_position").addEventListener("change",(function(n){return e.clickAlignEle.bind(e)(n)})),dr(ur("tool_align_left"),(function(){return e.clickAlign.bind(e)("left")})),dr(ur("tool_align_right"),(function(){return e.clickAlign.bind(e)("right")})),dr(ur("tool_align_center"),(function(){return e.clickAlign.bind(e)("center")})),dr(ur("tool_align_top"),(function(){return e.clickAlign.bind(e)("top")})),dr(ur("tool_align_bottom"),(function(){return e.clickAlign.bind(e)("bottom")})),dr(ur("tool_align_middle"),(function(){return e.clickAlign.bind(e)("middle")})),dr(ur("tool_align_distrib_horiz"),(function(){return e.clickAlign.bind(e)("distrib_horiz")})),dr(ur("tool_align_distrib_verti"),(function(){return e.clickAlign.bind(e)("distrib_verti")})),dr(ur("tool_node_clone"),this.clonePathNode.bind(this)),dr(ur("tool_node_delete"),this.deletePathNode.bind(this)),dr(ur("tool_openclose_path"),this.opencloseSubPath.bind(this)),dr(ur("tool_add_subpath"),this.addSubPath.bind(this)),dr(ur("tool_node_link"),this.linkControlPoints.bind(this)),ur("angle").addEventListener("change",this.changeRotationAngle.bind(this)),ur("blur").addEventListener("change",this.changeBlur.bind(this)),ur("rect_rx").addEventListener("change",this.changeRectRadius.bind(this)),ur("font_size").addEventListener("change",this.changeFontSize.bind(this)),dr(ur("tool_ungroup"),this.clickGroup.bind(this)),dr(ur("tool_bold"),this.clickBold.bind(this)),dr(ur("tool_italic"),this.clickItalic.bind(this)),dr(ur("tool_text_decoration_underline"),(function(){return e.clickTextDecoration.bind(e)("underline")})),dr(ur("tool_text_decoration_linethrough"),(function(){return e.clickTextDecoration.bind(e)("line-through")})),dr(ur("tool_text_decoration_overline"),(function(){return e.clickTextDecoration.bind(e)("overline")})),ur("tool_text_anchor").addEventListener("change",(function(n){return e.clickTextAnchor.bind(e)(n)})),ur("tool_letter_spacing").addEventListener("change",this.changeLetterSpacing.bind(this)),ur("tool_word_spacing").addEventListener("change",this.changeWordSpacing.bind(this)),ur("tool_text_length").addEventListener("change",this.changeTextLength.bind(this)),ur("tool_length_adjust").addEventListener("change",(function(n){return e.changeLengthAdjust.bind(e)(n)})),dr(ur("tool_unlink_use"),this.clickGroup.bind(this)),ur("image_url").addEventListener("change",(function(n){e.setImageURL(n.currentTarget.value)})),["elem_id","elem_class","circle_cx","circle_cy","circle_r","ellipse_cx","ellipse_cy","ellipse_rx","ellipse_ry","selected_x","selected_y","rect_width","rect_height","line_x1","line_x2","line_y1","line_y2","image_width","image_height","path_node_x","path_node_y"].forEach((function(n){return ur(n).addEventListener("change",e.attrChanger.bind(e))}))}}]),TopPanel}(),vr=e.$id,br=function(){function BottomPanel(e){_classCallCheck$1(this,BottomPanel),this.editor=e}return _createClass$1(BottomPanel,[{key:"selectedElement",get:function get(){return this.editor.selectedElement}},{key:"multiselected",get:function get(){return this.editor.multiselected}},{key:"changeStrokeWidth",value:function changeStrokeWidth(e){var n=e.target.value;0===n&&this.editor.selectedElement&&["line","polyline"].includes(this.editor.selectedElement.nodeName)&&(n=1),this.editor.svgCanvas.setStrokeWidth(n)}},{key:"changeZoom",value:function changeZoom(e){switch(e){case"canvas":case"selection":case"layer":case"content":this.editor.zoomChanged(window,e);break;default:var n=Number(e)>.1?.01*Number(e):.1,o=this.editor.svgCanvas.getZoom(),i=this.editor.workarea;this.editor.zoomChanged(window,{width:0,height:0,x:(i.scrollLeft+parseFloat(getComputedStyle(i,null).width.replace("px",""))/2)/o,y:(i.scrollTop+parseFloat(getComputedStyle(i,null).height.replace("px",""))/2)/o,zoom:n},!0)}}},{key:"updateToolButtonState",value:function updateToolButtonState(){var e=this,n="none"===this.editor.svgCanvas.getColor("fill"),o="none"===this.editor.svgCanvas.getColor("stroke"),i=["tool_fhpath","tool_line"],r=["tools_rect","tools_ellipse","tool_text","tool_path"];o?i.forEach((function(n){vr(n).pressed&&e.editor.leftPanel.clickSelect(),vr(n).disabled=!0})):i.forEach((function(e){vr(e).disabled=!1})),o&&n?r.forEach((function(n){vr(n).pressed&&e.editor.leftPanel.clickSelect(),vr(n).disabled=!0})):r.forEach((function(e){vr(e).disabled=!1})),this.editor.svgCanvas.runExtensions("toolButtonStateUpdate",{nofill:n,nostroke:o})}},{key:"handleColorPicker",value:function handleColorPicker(e,n){var o=n.detail.paint;this.editor.svgCanvas.setPaint(e,o),this.updateToolButtonState()}},{key:"handleStrokeAttr",value:function handleStrokeAttr(e,n){this.editor.svgCanvas.setStrokeAttr(e,n.detail.value)}},{key:"handleOpacity",value:function handleOpacity(e){var n=Number.parseInt(e.currentTarget.value.split("%")[0]);this.editor.svgCanvas.setOpacity(n/100)}},{key:"handlePalette",value:function handlePalette(e){e.preventDefault();var n=e.detail,o=n.picker,i=n.color,r="none"===i?new Uo.Paint:new Uo.Paint({alpha:100,solidColor:i.substr(1)});"fill"===o?vr("fill_color").setPaint(r):vr("stroke_color").setPaint(r),this.editor.svgCanvas.setColor(o,i),"none"!==i&&1!==this.editor.svgCanvas.getPaintOpacity(o)&&this.editor.svgCanvas.setPaintOpacity(o,1),this.updateToolButtonState()}},{key:"init",value:function init(){var e=this,n=document.createElement("template"),o=this.editor.i18next;n.innerHTML='<div id="tools_bottom">\n    \x3c!-- Zoom buttons --\x3e\n    <se-zoom id="zoom" src="zoom.svg" title="Change zoom level" inputsize="40px">\n      <se-text value="1000" text="1000%"></se-text>\n      <se-text value="400" text="400%"></se-text>\n      <se-text value="200" text="200%"></se-text>\n      <se-text value="100" text="100%"></se-text>\n      <se-text value="50" text="50%"></se-text>\n      <se-text value="25" text="25%"></se-text>\n      <se-text value="canvas" text="tools.fit_to_canvas"></se-text>\n      <se-text value="selection" text="tools.fit_to_sel"></se-text>\n      <se-text value="layer" text="tools.fit_to_layer_content"></se-text>\n      <se-text value="content" text="tools.fit_to_all"></se-text>\n    </se-zoom>\n    <se-colorpicker id="fill_color" src="fill.svg" label="properties.fill_color" type="fill"></se-colorpicker>\n    <se-colorpicker id="stroke_color" src="stroke.svg" label="properties.stroke_color" type="stroke"></se-colorpicker>\n    <se-spin-input id="stroke_width" min="0" max="99" step="1" title="properties.stroke_width" label=""></se-spin-input>\n    <se-select id="stroke_style" title="properties.stroke_style" label="" width="22px" height="22px" options="&#8212;,...,- -,- .,- .." values="none::2,2::5,5::5,2,2,2::5,2,2,2,2,2">     \n    </se-select>\n    <se-list id="stroke_linejoin" title="properties.linejoin_miter" label="" width="22px" height="22px">\n      <se-list-item id="linejoin_miter" value="miter" src="linejoin_miter.svg" title="properties.linejoin_miter" img-height="22px"></se-list-item>\n      <se-list-item id="linejoin_round" value="round" src="linejoin_round.svg" title="properties.linejoin_round" img-height="22px"></se-list-item>\n      <se-list-item id="linejoin_bevel" value="bevel" src="linejoin_bevel.svg" title="properties.linejoin_bevel" img-height="22px"></se-list-item>\n    </se-list>\n    <se-list id="stroke_linecap" title="properties.linecap_butt" label="" width="22px" height="22px">\n      <se-list-item id="linecap_butt" value="butt" src="linecap_butt.svg" title="properties.linecap_butt" img-height="22px"></se-list-item>\n      <se-list-item id="linecap_square" value="square" src="linecap_square.svg" title="properties.linecap_square" img-height="22px"></se-list-item>\n      <se-list-item id="linecap_round" value="round" src="linecap_round.svg" title="properties.linecap_round" img-height="22px"></se-list-item>\n    </se-list>\n    <se-spin-input size="3" id="opacity" min="0" max="100" step="5" title="properties.opacity" src="opacity.svg"></se-spin-input>\n    <se-palette id="palette"></se-palette>\n  </div>',this.editor.$svgEditor.append(n.content.cloneNode(!0)),vr("palette").addEventListener("change",this.handlePalette.bind(this)),vr("palette").init(o);var i=this.editor.configObj.curConfig;vr("fill_color").setPaint(new Uo.Paint({alpha:100,solidColor:i.initFill.color})),vr("stroke_color").setPaint(new Uo.Paint({alpha:100,solidColor:i.initStroke.color})),vr("zoom").addEventListener("change",(function(n){return e.changeZoom.bind(e)(n.detail.value)})),vr("stroke_color").addEventListener("change",(function(n){return e.handleColorPicker.bind(e)("stroke",n)})),vr("fill_color").addEventListener("change",(function(n){return e.handleColorPicker.bind(e)("fill",n)})),vr("stroke_width").addEventListener("change",this.changeStrokeWidth.bind(this)),vr("stroke_style").addEventListener("change",(function(n){return e.handleStrokeAttr.bind(e)("stroke-dasharray",n)})),vr("stroke_linejoin").addEventListener("change",(function(n){return e.handleStrokeAttr.bind(e)("stroke-linejoin",n)})),vr("stroke_linecap").addEventListener("change",(function(n){return e.handleStrokeAttr.bind(e)("stroke-linecap",n)})),vr("opacity").addEventListener("change",this.handleOpacity.bind(this)),vr("fill_color").init(o),vr("stroke_color").init(o)}},{key:"updateColorpickers",value:function updateColorpickers(e){vr("fill_color").update(this.editor.svgCanvas,this.editor.selectedElement,e),vr("stroke_color").update(this.editor.svgCanvas,this.editor.selectedElement,e)}}]),BottomPanel}(),yr=e.$id,mr=e.$click,_r=function(){function LayersPanel(e){_classCallCheck$1(this,LayersPanel),this.updateContextPanel=e.topPanel.updateContextPanel.bind(e.topPanel),this.editor=e}return _createClass$1(LayersPanel,[{key:"lmenuFunc",value:function lmenuFunc(e){var n;switch(null==e||null===(n=e.detail)||void 0===n?void 0:n.trigger){case"dupe":this.cloneLayer();break;case"delete":this.deleteLayer();break;case"merge_down":this.mergeLayer();break;case"merge_all":this.editor.svgCanvas.mergeAllLayers(),this.updateContextPanel(),this.populateLayers()}}},{key:"init",value:function init(){var e=this,n=document.createElement("template"),o=this.editor.i18next;n.innerHTML='<div id="sidepanels">\n    <se-text id="sidepanel_handle" title="ui.panel_action" text="ui.panel"></se-text>\n    <div id="sidepanel_content">\n        <div id="layerpanel">\n            <se-text id="layersLabel" text="layers.layers"></se-text>\n            <fieldset id="layerbuttons">\n                <se-button id="layer_new" title="layers.new" size="small" src="new.svg"></se-button>\n                <se-button id="layer_delete" title="layers.del" size="small" src="delete.svg"></se-button>\n                <se-button id="layer_rename" title="layers.rename" size="small" src="text.svg"></se-button>\n                <se-button id="layer_up" title="layers.move_up" size="small" src="go_up.svg"></se-button>\n                <se-button id="layer_down" title="layers.move_down" size="small" src="go_down.svg"></se-button>\n                <se-button id="layer_moreopts" title="common.more_opts" size="small" src="context_menu.svg">\n                </se-button>\n            </fieldset>\n            <table id="layerlist">\n                <tr class="layer">\n                    <td class="layervis"></td>\n                    <td class="layername">Layer 1</td>\n                </tr>\n            </table>\n            <se-select id="selLayerNames" title="layers.move_selected" label="layers.move_elems_to" options="Layer 1" values="layer1" value="layer1" disabled="disabled">\n            </se-select>\n        </div>\n    </div>\n</div>',this.editor.$svgEditor.append(n.content.cloneNode(!0));var i=document.createElement("se-cmenu-layers");i.setAttribute("id","se-cmenu-layers-more"),i.value="layer_moreopts",i.setAttribute("leftclick",!0),this.editor.$container.append(i),i.init(o);var r=document.createElement("se-cmenu-layers");r.setAttribute("id","se-cmenu-layers-list"),r.value="layerlist",r.setAttribute("leftclick",!1),this.editor.$container.append(r),r.init(o),mr(yr("layer_new"),this.newLayer.bind(this)),mr(yr("layer_delete"),this.deleteLayer.bind(this)),mr(yr("layer_up"),(function(){return e.moveLayer.bind(e)(-1)})),mr(yr("layer_down"),(function(){return e.moveLayer.bind(e)(1)})),mr(yr("layer_rename"),this.layerRename.bind(this)),yr("se-cmenu-layers-more").addEventListener("change",this.lmenuFunc.bind(this)),yr("se-cmenu-layers-list").addEventListener("change",(function(n){e.lmenuFunc(n)})),mr(yr("sidepanel_handle"),(function(){return e.toggleSidePanel()})),this.toggleSidePanel(this.editor.configObj.curConfig.showlayers)}},{key:"toggleSidePanel",value:function toggleSidePanel(e){void 0===e?this.editor.$svgEditor.classList.toggle("open"):e?this.editor.$svgEditor.classList.add("open"):this.editor.$svgEditor.classList.remove("open")}},{key:"newLayer",value:function newLayer(){var e,n=this.editor.svgCanvas.getCurrentDrawing().getNumLayers();do{e=this.editor.i18next.t("layers.layer")+" "+ ++n}while(this.editor.svgCanvas.getCurrentDrawing().hasLayer(e));var o=prompt(this.editor.i18next.t("notification.enterUniqueLayerName"),e);o&&(this.editor.svgCanvas.getCurrentDrawing().hasLayer(o)?alert(this.editor.i18next.t("notification.dupeLayerName")):(this.editor.svgCanvas.createLayer(o),this.updateContextPanel(),this.populateLayers()))}},{key:"deleteLayer",value:function deleteLayer(){if(this.editor.svgCanvas.deleteCurrentLayer()){this.updateContextPanel(),this.populateLayers();var e=document.querySelectorAll("#layerlist tr.layer");Array.prototype.forEach.call(e,(function(e){e.classList.remove("layersel")})),document.querySelector("#layerlist tr.layer").classList.add("layersel")}}},{key:"cloneLayer",value:function cloneLayer(){var e=this.editor.svgCanvas.getCurrentDrawing().getCurrentLayerName()+" copy",n=prompt(this.editor.i18next.t("notification.enterUniqueLayerName"),e);n&&(this.editor.svgCanvas.getCurrentDrawing().hasLayer(n)?alert(this.editor.i18next.t("notification.dupeLayerName")):(this.editor.svgCanvas.cloneLayer(n),this.updateContextPanel(),this.populateLayers()))}},{key:"index",value:function index(e){return e?Array.from(document.querySelector("#layerlist tbody").children).indexOf(e):-1}},{key:"mergeLayer",value:function mergeLayer(){this.index(document.querySelector("#layerlist tr.layersel"))-1!=this.editor.svgCanvas.getCurrentDrawing().getNumLayers()-1&&(this.editor.svgCanvas.mergeLayer(),this.updateContextPanel(),this.populateLayers())}},{key:"moveLayer",value:function moveLayer(e){var n=this.editor.svgCanvas.indexCurrentLayer();-1!==n&&(this.editor.svgCanvas.setCurrentLayerPosition(n-e),this.populateLayers())}},{key:"layerRename",value:function layerRename(){var e=document.querySelector("#layerlist tr.layersel td.layername"),n=e?e.textContent:"",o=prompt(this.editor.i18next.t("notification.enterNewLayerName"),"");o&&(n===o||this.editor.svgCanvas.getCurrentDrawing().hasLayer(o)?alert(this.editor.i18next.t("notification.layerHasThatName")):(this.editor.svgCanvas.renameCurrentLayer(o),this.populateLayers()))}},{key:"toggleHighlightLayer",value:function toggleHighlightLayer(e){var n,o=this,i=[],r=this.editor.svgCanvas.getCurrentDrawing().getNumLayers();for(n=0;n<r;n++)i[n]=this.editor.svgCanvas.getCurrentDrawing().getLayerName(n);e?i.forEach((function(n){n!==e&&o.editor.svgCanvas.getCurrentDrawing().setLayerOpacity(n,.5)})):i.forEach((function(e){o.editor.svgCanvas.getCurrentDrawing().setLayerOpacity(e,1)}))}},{key:"populateLayers",value:function populateLayers(){this.editor.svgCanvas.clearSelection();for(var e=this,n=yr("layerlist").querySelector("tbody");n.firstChild;)n.removeChild(n.firstChild);yr("selLayerNames").setAttribute("options","");for(var o=this.editor.svgCanvas.getCurrentDrawing(),i=o.getCurrentLayerName(),r=this.editor.svgCanvas.getCurrentDrawing().getNumLayers(),a="",s="";r--;){var l=o.getLayerName(r),c=document.createElement("tr");c.className=l===i?"layer layersel":"layer";var u=document.createElement("td");u.className=o.getLayerVisibility(l)?"layervis":"layerinvis layervis";var d=document.createElement("td");d.className="layername",d.textContent=l,c.appendChild(u),c.appendChild(d),n.appendChild(c),a=a?a+"::"+l:l,s=s?s+","+l:l}yr("selLayerNames").setAttribute("options",s),yr("selLayerNames").setAttribute("values",a);var p=yr("layerlist").querySelectorAll("td.layername");Array.from(p).forEach((function(n){n.addEventListener("mouseup",(function(n){var o=yr("layerlist").querySelectorAll("tr.layer");Array.from(o).forEach((function(e){e.classList.remove("layersel")})),n.currentTarget.parentNode.classList.add("layersel"),e.editor.svgCanvas.setCurrentLayer(n.currentTarget.textContent),n.preventDefault()})),n.addEventListener("mouseup",(function(n){e.toggleHighlightLayer(n.currentTarget.textContent)})),n.addEventListener("mouseout",(function(n){e.toggleHighlightLayer()}))}));var h=yr("layerlist").querySelectorAll("td.layervis");Array.from(h).forEach((function(n){mr(n,(function(n){var o=n.currentTarget.parentNode.querySelector("td.layername"),i=o?o.textContent:"",r=n.currentTarget.classList.contains("layerinvis");e.editor.svgCanvas.setLayerVisibility(i,r),n.currentTarget.classList.toggle("layerinvis")}))}));for(var g=5-yr("layerlist").querySelectorAll("tr.layer").length;g-- >0;){var f=document.createElement("tr");f.innerHTML='<td style="color:white">_</td><td/>',n.append(f)}}}]),LayersPanel}(),kr=e.$id,xr=e.$click,wr=e.convertUnit,Cr=e.isValidUnit,Sr=function(){function MainMenu(e){_classCallCheck$1(this,MainMenu),this.editor=e,this.exportWindowCt=0}var e,n;return _createClass$1(MainMenu,[{key:"hideDocProperties",value:function hideDocProperties(){var e=kr("se-img-prop");e.setAttribute("dialog","close"),e.setAttribute("save",this.editor.configObj.pref("img_save")),this.editor.docprops=!1}},{key:"hidePreferences",value:function hidePreferences(){kr("se-edit-prefs").setAttribute("dialog","close"),this.editor.configObj.preferences=!1}},{key:"saveDocProperties",value:function saveDocProperties(e){var n=e.detail,o=n.title,i=n.w,r=n.h,a=n.save;return this.editor.svgCanvas.setDocumentTitle(o),("fit"===i||Cr("width",i))&&("fit"===r||Cr("height",r))?this.editor.svgCanvas.setResolution(i,r)?(this.editor.configObj.pref("img_save",a),this.editor.updateCanvas(),this.hideDocProperties(),!0):(seAlert(this.editor.i18next.t("notification.noContentToFitTo")),!1):(seAlert(this.editor.i18next.t("notification.invalidAttrValGiven")),!1)}},{key:"savePreferences",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var n,o,i,r,a,s,l,c,u;return _regeneratorRuntime().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:n=e.detail,o=n.lang,i=n.bgcolor,r=n.bgurl,a=n.gridsnappingon,s=n.gridsnappingstep,l=n.gridcolor,c=n.showrulers,u=n.baseunit,this.editor.setBackground(i,r),o&&o!==this.editor.configObj.pref("lang")&&(this.editor.configObj.pref("lang",o),seAlert("Changing the language needs reload")),this.editor.configObj.curConfig.gridSnapping=a,this.editor.configObj.curConfig.snappingStep=s,this.editor.configObj.curConfig.gridColor=l,this.editor.configObj.curConfig.showRulers=c,this.editor.configObj.curConfig.showRulers&&this.editor.rulers.updateRulers(),this.editor.configObj.curConfig.baseUnit=u,this.editor.svgCanvas.setConfig(this.editor.configObj.curConfig),this.editor.updateCanvas(),this.hidePreferences();case 12:case"end":return d.stop()}}),_callee,this)}))),function savePreferences(e){return n.apply(this,arguments)})},{key:"clickExport",value:(e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n,o,i,r,a,s,l,c,u,d=this;return _regeneratorRuntime().wrap((function _callee2$(p){for(;;)switch(p.prev=p.next){case 0:if("ok"===(null==e||null===(n=e.detail)||void 0===n?void 0:n.trigger)&&void 0!==(null==e||null===(o=e.detail)||void 0===o?void 0:o.imgType)){p.next=2;break}return p.abrupt("return");case 2:if(s=null==e||null===(i=e.detail)||void 0===i?void 0:i.imgType,l=null!=e&&null!==(r=e.detail)&&void 0!==r&&r.quality?(null==e||null===(a=e.detail)||void 0===a?void 0:a.quality)/100:1,c=function openExportWindow(){var e,n,o=d.editor.i18next.t("notification.loadingImage");if("new"===d.editor.configObj.curConfig.exportWindowType&&d.editor.exportWindowCt++,d.editor.exportWindowName=d.editor.configObj.curConfig.canvasName+d.editor.exportWindowCt,d.editor.loadingURL)n=d.editor.loadingURL;else{var i;if(e='<!DOCTYPE html><html>\n          <head>\n            <meta charset="utf-8">\n            <title>'.concat(o,"</title>\n          </head>\n          <body><h1>").concat(o,"</h1></body>\n        <html>"),null!==(i=URL)&&void 0!==i&&i.createObjectURL){var r=new Blob([e],{type:"text/html"});n=URL.createObjectURL(r)}else n="data:text/html;base64;charset=utf-8,"+e;d.editor.loadingURL=n}d.editor.exportWindow=window.open(n,d.editor.exportWindowName)},u=qi(),"PDF"!==s){p.next=11;break}this.editor.customExportPDF||u||c(),this.editor.svgCanvas.exportPDF(void 0),p.next=14;break;case 11:return this.editor.customExportImage||c(),p.next=14,this.editor.svgCanvas.rasterExport(s,l,this.editor.exportWindowName);case 14:case"end":return p.stop()}}),_callee2,this)}))),function clickExport(n){return e.apply(this,arguments)})},{key:"showDocProperties",value:function showDocProperties(){if(!this.editor.docprops){this.editor.docprops=!0;var e=kr("se-img-prop"),n=this.editor.svgCanvas.getResolution();"px"!==this.editor.configObj.curConfig.baseUnit&&(n.w=wr(n.w)+this.editor.configObj.curConfig.baseUnit,n.h=wr(n.h)+this.editor.configObj.curConfig.baseUnit),e.setAttribute("save",this.editor.configObj.pref("img_save")),e.setAttribute("width",n.w),e.setAttribute("height",n.h),e.setAttribute("title",this.editor.svgCanvas.getDocumentTitle()),e.setAttribute("dialog","open")}}},{key:"showPreferences",value:function showPreferences(){if(!this.editor.configObj.preferences){this.editor.configObj.preferences=!0;var e=kr("se-edit-prefs"),n=this.editor.configObj.curPrefs.bkgd_color,o=this.editor.configObj.pref("bkgd_url");o&&e.setAttribute("bgurl",o),e.setAttribute("gridsnappingon",this.editor.configObj.curConfig.gridSnapping),e.setAttribute("gridsnappingstep",this.editor.configObj.curConfig.snappingStep),e.setAttribute("gridcolor",this.editor.configObj.curConfig.gridColor),e.setAttribute("canvasbg",n),e.setAttribute("dialog","open")}}},{key:"openHomePage",value:function openHomePage(){window.open("https://github.com/SVG-Edit/svgedit","_blank")}},{key:"init",value:function init(){var e=document.createElement("template");e.innerHTML='\n    <se-menu id="main_button" label="SVG-Edit" src="logo.svg" alt="logo">\n        <se-menu-item id="tool_export" label="tools.export_img" src="export.svg"></se-menu-item>\n        <se-menu-item id="tool_docprops" label="tools.docprops" shortcut="D" src="docprop.svg"></se-menu-item>\n        <se-menu-item id="tool_editor_prefs" label="config.editor_prefs" src="editPref.svg"></se-menu-item>\n        <se-menu-item id="tool_editor_homepage" label="tools.editor_homepage" src="logo.svg"></se-menu-item>\n    </se-menu>',this.editor.$svgEditor.append(e.content.cloneNode(!0)),xr(kr("tool_export"),(function(){document.getElementById("se-export-dialog").setAttribute("dialog","open")})),kr("se-export-dialog").addEventListener("change",this.clickExport.bind(this)),kr("tool_docprops").addEventListener("click",this.showDocProperties.bind(this)),kr("tool_editor_prefs").addEventListener("click",this.showPreferences.bind(this)),kr("tool_editor_homepage").addEventListener("click",this.openHomePage.bind(this)),kr("se-img-prop").addEventListener("change",function(e){"closed"===e.detail.dialog?this.hideDocProperties():this.saveDocProperties(e)}.bind(this)),kr("se-edit-prefs").addEventListener("change",function(e){"closed"===e.detail.dialog?this.hidePreferences():this.savePreferences(e)}.bind(this))}}]),MainMenu}(),Pr=e.$id,$r=e.$click,Er=e.decode64,Lr=e.blankPageObjectURL,Or=function(e){_inherits$1(Editor,ir);var n,o,i,r,a=_createSuper$4(Editor);function Editor(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck$1(this,Editor),(e=a.call(this,n)).langChanged=!1,e.showSaveWarning=!1,e.storagePromptState="ignore",e.title="untitled.svg",e.svgCanvas=null,e.$click=$r,e.isReady=!1,e.customExportImage=!1,e.customExportPDF=!1,e.configObj=new Ui(_assertThisInitialized$1(e)),e.configObj.pref=e.configObj.pref.bind(e.configObj),e.setConfig=e.configObj.setConfig.bind(e.configObj),e.callbacks=[],e.curContext=null,e.exportWindowName=null,e.docprops=!1,e.configObj.preferences=!1,e.canvMenu=null,e.goodLangs=["ar","cs","de","en","es","fa","fr","fy","hi","it","ja","nl","pl","pt-BR","ro","ru","sk","sl","tr","zh-CN","zh-TW"];var o=Hi()?"meta+":"ctrl+";return e.shortcuts=[{key:"ctrl+arrowleft",fn:function fn(){e.rotateSelected(0,1)}},{key:"ctrl+arrowright",fn:function fn(){e.rotateSelected(1,1)}},{key:"ctrl+shift+arrowleft",fn:function fn(){e.rotateSelected(0,5)}},{key:"ctrl+shift+arrowright",fn:function fn(){e.rotateSelected(1,5)}},{key:"shift+o",fn:function fn(){e.svgCanvas.cycleElement(0)}},{key:"shift+p",fn:function fn(){e.svgCanvas.cycleElement(1)}},{key:"tab",fn:function fn(){e.svgCanvas.cycleElement(0)}},{key:"shift+tab",fn:function fn(){e.svgCanvas.cycleElement(1)}},{key:[o+"arrowup",!0],fn:function fn(){e.zoomImage(2)}},{key:[o+"arrowdown",!0],fn:function fn(){e.zoomImage(.5)}},{key:[o+"]",!0],fn:function fn(){e.moveUpDownSelected("Up")}},{key:[o+"[",!0],fn:function fn(){e.moveUpDownSelected("Down")}},{key:["arrowup",!0],fn:function fn(){e.moveSelected(0,-1)}},{key:["arrowdown",!0],fn:function fn(){e.moveSelected(0,1)}},{key:["arrowleft",!0],fn:function fn(){e.moveSelected(-1,0)}},{key:["arrowright",!0],fn:function fn(){e.moveSelected(1,0)}},{key:"shift+arrowup",fn:function fn(){e.moveSelected(0,-10)}},{key:"shift+arrowdown",fn:function fn(){e.moveSelected(0,10)}},{key:"shift+arrowleft",fn:function fn(){e.moveSelected(-10,0)}},{key:"shift+arrowright",fn:function fn(){e.moveSelected(10,0)}},{key:["alt+arrowup",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(0,-1)}},{key:["alt+arrowdown",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(0,1)}},{key:["alt+arrowleft",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(-1,0)}},{key:["alt+arrowright",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(1,0)}},{key:["alt+shift+arrowup",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(0,-10)}},{key:["alt+shift+arrowdown",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(0,10)}},{key:["alt+shift+arrowleft",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(-10,0)}},{key:["alt+shift+arrowright",!0],fn:function fn(){e.svgCanvas.cloneSelectedElements(10,0)}},{key:["delete/backspace",!0],fn:function fn(){(e.selectedElement||e.multiselected)&&e.svgCanvas.deleteSelectedElements()}},{key:"a",fn:function fn(){e.svgCanvas.selectAllInCurrentLayer()}},{key:o+"a",fn:function fn(){e.svgCanvas.selectAllInCurrentLayer()}},{key:o+"x",fn:function fn(){e.cutSelected()}},{key:o+"c",fn:function fn(){e.copySelected()}},{key:o+"v",fn:function fn(){e.pasteInCenter()}}],e.leftPanel=new lr(_assertThisInitialized$1(e)),e.bottomPanel=new br(_assertThisInitialized$1(e)),e.topPanel=new fr(_assertThisInitialized$1(e)),e.layersPanel=new _r(_assertThisInitialized$1(e)),e.mainMenu=new Sr(_assertThisInitialized$1(e)),window.svgEditor=_assertThisInitialized$1(e),e}return _createClass$1(Editor,[{key:"loadSvgString",value:function loadSvgString(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.noAlert,i=!1!==this.svgCanvas.setSvgString(e);if(!i)throw o||seAlert(this.i18next.t("notification.errorLoadingSVG")),new Error("Error loading SVG");this.updateCanvas()}},{key:"randomizeIds",value:function randomizeIds(e){this.svgCanvas.randomizeIds(e)}},{key:"setAll",value:function setAll(){var e={};this.shortcuts.forEach((function(n){if(n.key){var o=n.key,i=!1;Array.isArray(n.key)&&(o=n.key[0],n.key.length>1&&(i=n.key[1])),o=String(o);var r=n.fn;o.split("/").forEach((function(n){e[n]={fn:r,pd:i}}))}return!0})),document.addEventListener("keydown",(function(n){if("BODY"===n.target.nodeName){var o="".concat(n.altKey?"alt+":"").concat(n.shiftKey?"shift+":"").concat(n.metaKey?"meta+":"").concat(n.ctrlKey?"ctrl+":"").concat(n.key.toLowerCase());e[o]&&(e[o].fn(),e[o].pd&&n.preventDefault())}}));var n=document.getElementsByClassName("attr_changer");Array.from(n).forEach((function(e){e.addEventListener("keydown",(function(e){e.currentTarget.dispatchEvent(new Event("change")),e.preventDefault()}))})),Pr("image_url").addEventListener("keydown",(function(e){e.currentTarget.dispatchEvent(new Event("change")),e.preventDefault()}))}},{key:"getParents",value:function getParents(e,n){void 0===n&&(n=document);for(var o=[],i=e.parentNode;i!==n;){var r=i;o.push(r),i=r.parentNode}return o.push(n),o}},{key:"getButtonData",value:function getButtonData(e){return Object.values(this.shortcuts).find((function(n){return n.sel===e}))}},{key:"exportHandler",value:function exportHandler(e,n){var o=n.issues,i=n.exportWindowName;if(this.exportWindow=window.open(Lr||"",i),this.exportWindow&&!this.exportWindow.closed){if(this.exportWindow.location.href=n.bloburl||n.datauri,"all"!==this.configObj.pref("export_notice_done")){var r=this.i18next.t("notification.saveFromBrowser",{type:n.type});if(o.length){var a="\n • ";r+="\n\n"+this.i18next.t("notification..noteTheseIssues")+a+o.join(a)}this.configObj.pref("export_notice_done","all"),seAlert(r)}}else seAlert(this.i18next.t("notification.popupWindowBlocked"))}},{key:"setBackground",value:function setBackground(e,n){this.configObj.pref("bkgd_color",e),this.configObj.pref("bkgd_url",n,!0),this.svgCanvas.setBackground(e,n)}},{key:"updateCanvas",value:function updateCanvas(e,n){var o=this.svgCanvas.getZoom(),i=this.workarea,r=Pr("svgcanvas"),a=parseFloat(getComputedStyle(i,null).width.replace("px","")),s=parseFloat(getComputedStyle(i,null).height.replace("px","")),l=a,c=s,u=i.scrollLeft+l/2,d=i.scrollTop+c/2,p=this.configObj.curConfig.canvas_expansion;a=Math.max(l,this.svgCanvas.contentW*o*p),s=Math.max(c,this.svgCanvas.contentH*o*p),i.style.overflow=a===l&&s===c?"hidden":"scroll";var h=parseFloat(getComputedStyle(r,null).height.replace("px",""))/2,g=parseFloat(getComputedStyle(r,null).width.replace("px",""))/2;r.style.width=a+"px",r.style.height=s+"px";var f=s/2,v=a/2,b=this.svgCanvas.updateCanvas(a,s),y=v/g,m=a/2-l/2,k=s/2-c/2;n?(n.x+=b.x,n.y+=b.y):n={x:v+(u-g)*y,y:f+(d-h)*y};e?this.svgCanvas.contentW>parseFloat(getComputedStyle(i,null).width.replace("px",""))?(i.scrollLeft=b.x-10,i.scrollTop=b.y-10):(i.scrollLeft=m,i.scrollTop=k):(i.scrollLeft=n.x-l/2,i.scrollTop=n.y-c/2),this.configObj.curConfig.showRulers&&(this.rulers.updateRulers(r,o),i.scroll()),!0!==this.configObj.urldata.storagePrompt&&"ignore"===this.storagePromptState&&null!=Pr("dialog_box")&&(Pr("dialog_box").style.display="none")}},{key:"updateWireFrame",value:function updateWireFrame(){var e="\n      #workarea.wireframe #svgcontent * {\n        stroke-width: ".concat(1/this.svgCanvas.getZoom(),"px;\n      }\n    ");document.querySelectorAll("#wireframe_rules").length>0&&(document.querySelector("#wireframe_rules").textContent=this.workarea.classList.contains("wireframe")?e:"")}},{key:"selectedChanged",value:function selectedChanged(e,n){var o=this.svgCanvas.getMode();"select"===o&&this.leftPanel.clickSelect();var i="pathedit"===o;this.selectedElement=1!==n.length&&n[1]?null:n[0],this.multiselected=n.length>=2&&n[1],this.selectedElement&&!i&&this.topPanel.update(),this.topPanel.togglePathEditMode(i,n),this.topPanel.updateContextPanel(),this.svgCanvas.runExtensions("selectedChanged",{elems:n,selectedElement:this.selectedElement,multiselected:this.multiselected})}},{key:"elementTransition",value:function elementTransition(e,n){var o=this.svgCanvas.getMode(),i=n[0];if(i){if(this.multiselected=n.length>=2&&n[1],!this.multiselected&&"rotate"===o){var r=this.svgCanvas.getRotationAngle(i);Pr("angle").value=r,0===r?Pr("tool_reorient").classList.add("disabled"):Pr("tool_reorient").classList.remove("disabled")}this.svgCanvas.runExtensions("elementTransition",{elems:n})}}},{key:"elementChanged",value:function elementChanged(e,n){var o=this,i=this.svgCanvas.getMode();"select"===i&&this.leftPanel.clickSelect(),n.forEach((function(e){var n,i="svg"===(null==e?void 0:e.tagName);i||o.svgCanvas.isLayer(e)?(o.layersPanel.populateLayers(),i&&o.updateCanvas()):!e||null!==(n=o.selectedElement)&&void 0!==n&&n.parentNode||(o.selectedElement=e)})),this.showSaveWarning=!0,this.topPanel.updateContextPanel(),this.selectedElement&&"select"===i&&this.bottomPanel.updateColorpickers(),this.svgCanvas.runExtensions("elementChanged",{elems:n})}},{key:"elementRenamed",value:function elementRenamed(e,n){this.svgCanvas.runExtensions("elementRenamed",{renameObj:n})}},{key:"afterClear",value:function afterClear(e){this.svgCanvas.runExtensions("afterClear")}},{key:"beforeClear",value:function beforeClear(e){this.svgCanvas.runExtensions("beforeClear")}},{key:"zoomDone",value:function zoomDone(){var e,n=_createForOfIteratorHelper(this.svgCanvas.selectedElements);try{for(n.s();!(e=n.n()).done;){var o=e.value;this.svgCanvas.selectorManager.requestSelector(o).resize()}}catch(e){n.e(e)}finally{n.f()}this.updateWireFrame()}},{key:"zoomChanged",value:function zoomChanged(e,n,o){var i=this.svgCanvas.setBBoxZoom(n,parseFloat(getComputedStyle(this.workarea,null).width.replace("px",""))-15,parseFloat(getComputedStyle(this.workarea,null).height.replace("px",""))-15);if(i){var r=i.zoom,a=i.bbox;r<.001?this.changeZoom(.1):(Pr("zoom").value=(100*this.svgCanvas.getZoom()).toFixed(1),o?this.updateCanvas():this.updateCanvas(!1,{x:a.x*r+a.width*r/2,y:a.y*r+a.height*r/2}),"zoom"===this.svgCanvas.getMode()&&a.width&&this.leftPanel.clickSelect(),this.zoomDone())}}},{key:"contextChanged",value:function contextChanged(e,n){var o="";if(n){var i="";o='<a href="#" data-root="y">'+this.svgCanvas.getCurrentDrawing().getCurrentLayerName()+"</a>",function getParentsUntil(e,n,o){for(var i=[],r=null==n?void 0:n.charAt(0),a=null==o?void 0:o.selector.charAt(0);e&&e!==document;e=e.parentNode){if(n){if("."===r&&e.classList.contains(n.substr(1)))break;if("#"===r&&e.id===n.substr(1))break;if("["===r&&e.hasAttribute(n.substr(1,n.length-1)))break;if(e.tagName.toLowerCase()===n)break}o?("."===a&&e.classList.contains(o.substr(1))&&i.push(e),"#"===a&&e.id===o.substr(1)&&i.push(e),"["===a&&e.hasAttribute(o.substr(1,o.length-1))&&i.push(e),e.tagName.toLowerCase()===o&&i.push(e)):i.push(e)}return i.length?i:null}(n,"#svgcontent").forEach((function(e){e.id&&(i+=" > "+e.id,o+=e!==n?' > <a href="#">'.concat(e.id,"</a>"):" > ".concat(e.id))})),this.curContext=i}else this.curContext=null;Pr("cur_context_panel").style.display=n?"block":"none",Pr("cur_context_panel").innerHTML=o}},{key:"setIcon",value:function setIcon(e,n){var o=document.createElement("img");o.src=this.configObj.curConfig.imgPath+n;var i="string"==typeof n?o:n.cloneNode(!0);if(i){for(;Pr(e).firstChild;)Pr(e).removeChild(Pr(e).firstChild);Pr(e).appendChild(i)}else console.warn("NOTE: Icon image missing: "+n)}},{key:"extAdded",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e,n){var o,i,r=this;return _regeneratorRuntime().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",void 0);case 2:return o=!1,i=function runCallback(){n.callback&&!o&&(o=!0,n.callback.call(r))},n.events&&this.leftPanel.add(n.events.id,n.events.click),e.abrupt("return",i());case 6:case"end":return e.stop()}}),_callee,this)}))),function extAdded(e,n){return r.apply(this,arguments)})},{key:"zoomImage",value:function zoomImage(e){var n=this.svgCanvas.getResolution();e=e?n.zoom*e:1,Pr("zoom").value=(100*e).toFixed(1),this.svgCanvas.setCurrentZoom(e),this.zoomDone(),this.updateCanvas(!0)}},{key:"cutSelected",value:function cutSelected(){(this.selectedElement||this.multiselected)&&this.svgCanvas.cutSelectedElements()}},{key:"copySelected",value:function copySelected(){(this.selectedElement||this.multiselected)&&this.svgCanvas.copySelectedElements()}},{key:"pasteInCenter",value:function pasteInCenter(){var e=this.workarea,n=this.svgCanvas.getZoom(),o=(e.scrollLeft+parseFloat(getComputedStyle(e,null).width.replace("px",""))/2)/n-this.svgCanvas.contentW,i=(e.scrollTop+parseFloat(getComputedStyle(e,null).height.replace("px",""))/2)/n-this.svgCanvas.contentH;this.svgCanvas.pasteElements("point",o,i)}},{key:"moveUpDownSelected",value:function moveUpDownSelected(e){this.selectedElement&&this.svgCanvas.moveUpDownSelected(e)}},{key:"moveSelected",value:function moveSelected(e,n){if(this.selectedElement||this.multiselected){if(this.configObj.curConfig.gridSnapping){var o=this.svgCanvas.getZoom()*this.configObj.curConfig.snappingStep;e*=o,n*=o}this.svgCanvas.moveSelectedElements(e,n)}}},{key:"selectNext",value:function selectNext(){this.svgCanvas.cycleElement(1)}},{key:"selectPrev",value:function selectPrev(){this.svgCanvas.cycleElement(0)}},{key:"rotateSelected",value:function rotateSelected(e,n){if(this.selectedElement&&!this.multiselected){e||(n*=-1);var o=Number.parseFloat(Pr("angle").value)+n;this.svgCanvas.setRotationAngle(o),this.topPanel.updateContextPanel()}}},{key:"hideSourceEditor",value:function hideSourceEditor(){Pr("se-svg-editor-dialog").setAttribute("dialog","closed")}},{key:"saveSourceEditor",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var n,o,i=this;return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if("open"===Pr("se-svg-editor-dialog").getAttribute("dialog")){r.next=3;break}return r.abrupt("return");case 3:if(n=function saveChanges(){i.svgCanvas.clearSelection(),i.hideSourceEditor(),i.zoomImage(),i.layersPanel.populateLayers()},this.svgCanvas.setSvgString(e.detail.value)){r.next=12;break}return r.next=7,seConfirm(this.i18next.t("notification.QerrorsRevertToSource"));case 7:if(!1!==(o=r.sent)&&"Cancel"!==o){r.next=10;break}return r.abrupt("return");case 10:return n(),r.abrupt("return");case 12:n(),this.leftPanel.clickSelect();case 14:case"end":return r.stop()}}),_callee2,this)}))),function saveSourceEditor(e){return i.apply(this,arguments)})},{key:"cancelOverlays",value:function cancelOverlays(e){null!=Pr("dialog_box")&&(Pr("dialog_box").style.display="none");var n="open"===Pr("se-svg-editor-dialog").getAttribute("dialog");n||this.docprops||this.configObj.preferences?n&&(this.svgCanvas.getSvgString()!==e.detail.value?seConfirm(this.i18next.t("notification.QignoreSourceChanges"))&&this.hideSourceEditor():this.hideSourceEditor()):this.curContext&&this.svgCanvas.leaveContext()}},{key:"toggleDynamicOutput",value:function toggleDynamicOutput(e){this.configObj.curConfig.dynamicOutput=e.detail.dynamic,this.svgCanvas.setConfig(this.configObj.curConfig);var n=document.getElementById("se-svg-editor-dialog"),o=this.svgCanvas.getSvgString();n.setAttribute("dialog","open"),n.setAttribute("value",o)}},{key:"enableOrDisableClipboard",value:function enableOrDisableClipboard(){var e;try{e=this.localStorage.getItem("svgedit_clipboard")}catch(e){}this.canvMenu.setAttribute((e?"en":"dis")+"ablemenuitems","#paste,#paste_in_place")}},{key:"openPrep",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){return _regeneratorRuntime().wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.svgCanvas.undoMgr.getUndoStackSize()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,seConfirm(this.i18next.t("notification.QwantToOpen"));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),_callee3,this)}))),function openPrep(){return o.apply(this,arguments)})},{key:"onDragEnter",value:function onDragEnter(e){e.stopPropagation(),e.preventDefault()}},{key:"onDragOver",value:function onDragOver(e){e.stopPropagation(),e.preventDefault()}},{key:"onDragLeave",value:function onDragLeave(e){e.stopPropagation(),e.preventDefault()}},{key:"setLang",value:function setLang(e){this.langChanged=!0,this.configObj.pref("lang",e),Pr("se-edit-prefs").setAttribute("lang",e);var n=(Pr("#layerlist")?Pr("#layerlist").querySelector("tr.layersel td.layername").textContent:"")===this.i18next.t("notification.common.layer")+" 1";this.setTitles(),n&&(this.svgCanvas.renameCurrentLayer(this.i18next.t("notification.common.layer")+" 1"),this.layersPanel.populateLayers()),this.svgCanvas.runExtensions("langChanged",e)}},{key:"ready",value:function ready(e){var n=this;return new Promise((function(o,i){n.isReady?o(e()):n.callbacks.push([e,o,i])}))}},{key:"runCallbacks",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){return _regeneratorRuntime().wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.callbacks.map((function(e){return(0,_slicedToArray(e,1)[0])()})));case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),this.callbacks.forEach((function(e){(0,_slicedToArray(e,3)[2])()})),e.t0;case 9:this.callbacks.forEach((function(e){(0,_slicedToArray(e,2)[1])()})),this.isReady=!0;case 11:case"end":return e.stop()}}),_callee4,this,[[0,5]])}))),function runCallbacks(){return n.apply(this,arguments)})},{key:"loadFromString",value:function loadFromString(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.noAlert;return this.ready(_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){return _regeneratorRuntime().wrap((function _callee5$(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.loadSvgString(e,{noAlert:i});case 3:o.next=9;break;case 5:if(o.prev=5,o.t0=o.catch(0),!i){o.next=9;break}throw o.t0;case 9:case"end":return o.stop()}}),_callee5,null,[[0,5]])}))))}},{key:"loadFromURL",value:function loadFromURL(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.cache,r=o.noAlert;return this.ready((function(){return new Promise((function(o,a){fetch(e,{cache:i?"force-cache":"no-cache"}).then((function(e){if(!e.ok){if(r)return void a(new Error("URLLoadFail"));seAlert(n.i18next.t("notification.URLLoadFail")),o()}return e.text()})).then((function(e){return n.loadSvgString(e,{noAlert:r}),e})).catch((function(e){r?a(new Error("URLLoadFail")):(seAlert(n.i18next.t("notification.URLLoadFail")+": \n"+e),o())}))}))}))}},{key:"loadFromDataURI",value:function loadFromDataURI(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.noAlert;return this.ready((function(){var o=!1,r=e.match(/^data:image\/svg\+xml;base64,/);r?o=!0:r=e.match(/^data:image\/svg\+xml(?:;|;utf8)?,/),r&&(r=r[0]);var a=e.slice(r.length);return n.loadSvgString(o?Er(a):decodeURIComponent(a),{noAlert:i})}))}},{key:"addExtension",value:function addExtension(e,n,o){if(!this.svgCanvas)throw new Error("Extension added too early");return this.svgCanvas.addExtension(e,n,o)}}]),Editor}();export{Or as default};
