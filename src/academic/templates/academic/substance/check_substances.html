{% extends 'base.html' %}
{% load static i18n gtsettings label_tags %}

{% block pre_head %}
    {% define_true  "use_datatables" %}
{% endblock %}

{% block content %}
<div class="row">
<div class="col-md-offset-2 col-md-8">
        <div class="page-header col-xs-13" align="center">
          <h3 class="heading-1" ><span> {% trans 'List of Substances' %}  </span></h3>
        </div>
</div>
</div>

<div class="row">
<div class="col-md-12">
  <table id="sustancetable" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>{% trans 'Creator' %}</th>
                <th>{% trans 'Substances' %}</th>
                <th>{% trans 'Actions' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for substance in substances %}
                           {% get_personal_template substance.pk as template %}

                <tr class="text-center">
                    <td>{{substance.creator}}</td>
                    <td>{{substance.comercial_name}}</td>
                    <td><a title="{% trans 'Approve' %}" href="" class="btn btn-success"><i class="icons fa fa-check"></i></a>
                        <a class="btn btn-warning" title="{% trans 'Detail' %}" href="{% url 'detail_substance' organilabcontext substance.pk %}"><i class="icons fa fa-eye"></i></a>
                        {% if template %}
                        <a class="btn  btn-md  btn-info btnpreview" title="{% trans 'Preview' %}" data-id="{{template}}"><i class="icons fa fa-eye"></i></a>
                        <a class="btn  btn-md  btn-primary" title="{% trans 'Generate PNG' %}" href="{% url 'sga:get_svgexport' 0 template %}"><i class="icons fa fa-file-image-o" aria-hidden="true"></i></a>
                        <a class="btn  btn-md  btn-danger" title="{% trans 'Generate PDF' %}" href="{% url 'sga:get_svgexport' 1 template %}"><i class="icons fa fa-file-pdf-o" aria-hidden="true"></i></a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
  </table>
</div>
</div>
<div class="modal fade bs-example-modal-lg" id="svgtemplate" tabindex="-1"
        role="dialog" aria-hidden="true" data-backdrop="static">
        <div class="stylo modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">{% trans 'Preview' %}</h4>
                </div>
                <div class="modal-body text-center">
                    <img>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block js %}
{{block.super}}

<script>

(function(){
    $("#sustancetable").DataTable();
})(jQuery);
</script>
<script>
    document.url_get_preview = "{% url 'sga:get_preview' organilabcontext 0 %}";
</script>
<script type="text/javascript" src="{% static 'sga/js/personal_template.js' %}"></script>


{% endblock %}